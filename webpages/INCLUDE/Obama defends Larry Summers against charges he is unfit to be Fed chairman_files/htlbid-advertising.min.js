(()=>{"use strict";const e=e=>{const t=parseInt(e.getTargeting("ad_rendercount"),10),n=0<=t?t+1:1;e.setTargeting("ad_rendercount",`${n}`)};function t(e,t){if(window&&window.sessionStorage)try{window.sessionStorage.setItem(e,t)}catch(e){}}function n(e){let t;try{t=window[e];const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}let i="";null!=window?.NXSTdata?.identity?.nexstarId?i=String(window?.NXSTdata?.identity?.nexstarId):window?.NXSTdata?.identity?.blueconicId&&(i=String(window?.NXSTdata?.identity?.blueconicId));let o=window.getCookie("referralId");const s=!!window.NXSTdata.ads?.companionsEnabled;window.googletag=window.googletag||{},window.googletag.cmd=googletag.cmd||[],googletag.cmd.push((()=>{googletag.pubads().enableSingleRequest(),googletag.pubads().enableAsyncRendering(),googletag.pubads().collapseEmptyDivs(),s&&googletag.companionAds().setRefreshUnfilledSlots(!0),googletag.pubads().disableInitialLoad(),googletag.pubads().enableVideoAds(),i&&googletag.pubads().setPublisherProvidedId(i)})),googletag.cmd.push((()=>{const{page_attributes:e,gpt:i}=window.amScripts,s=googletag.pubads(),{ab_test:d}=i,a=window.NXSTdata.ads.htlbidEnabled?"applied":"notapplied";s.setTargeting("htlbid",a);const r=window.NXSTdata?.content?.providerName.toLowerCase();("sports illustrated"===r||"arena-nfl"===r||r.match("^si.+nfl$"))&&s.setTargeting("cs","minute_media"),e.article_id&&s.setTargeting("pid",String(e.article_id)),e.page_type&&s.setTargeting("pagetype",e.page_type);const l=((e,t)=>{const n=Math.ceil(e);return Math.floor(Math.random()*(Math.floor(t)-n))+n})(d.min,d.max);s.setTargeting("pagetest",String(l));const g=encodeURIComponent(window.location.search).substring(3).replace("%26","&").replace("%3D","="),c=new URLSearchParams(g);c.has("page_key")&&s.setTargeting("page_key",c.get("page_key"));let w=function(e){if(window&&window.sessionStorage)return window.sessionStorage.getItem(e)}(d.storage_key);if(w||(w=l,t(d.storage_key,w)),s.setTargeting("sessiontest",String(w)),window&&window.NXSTdata.content.persistentId&&s.setTargeting("pers_cid",window.NXSTdata.content.persistentId),window&&window.NXSTdata.content.pageDcode&&s.setTargeting("d_code",window.NXSTdata.content.pageDcode),window&&window.NXSTdata.content.nlpCategories){const e=Object.entries(window.NXSTdata.content.nlpCategories).sort(((e,t)=>e[1]!==t[1]?t[1]-e[1]:e[0].length!==t[0].length?t[0].length-e[0].length:e[0].localeCompare(t[0]))),t=[];e.forEach((e=>{e[0].split("/").forEach(((e,n)=>{if(e){let i=e.replace(/[^A-Z0-9]+/gi,"_");i=0===i.indexOf("_")?i.substring(1):i,t[n]=t[n]||[],t[n].push(i.slice(0,24).toLowerCase())}}))})),t.forEach(((e,t)=>{0<t&&4>t&&s.setTargeting(`nlpcat${t}`,e)}))}if(window&&window.NXSTdata.content.nlpEvent){const e=e=>Object.entries(e).sort((function(e,t){return t[1]-e[1]})).slice(0,5).map((([e])=>e)),t=e(window.NXSTdata?.content?.nlpEvent??[]).join(",");console.log("%c{0}".replace("{0}","!@NLP EVENT"),"background-color: black; color: white; font-size: 23px;"),console.log("!@",t),s.setTargeting("nlpevent",t)}if(window&&window.NXSTdata.content.nlpSentiment){const e=window.NXSTdata.content.nlpSentiment.score;let t="0";0!==e&&(t=0<e?"positive":"negative"),s.setTargeting("nlpsent",t)}window&&window.NXSTdata.page.uniqueId&&s.setTargeting("upid",window.NXSTdata.page.uniqueId);try{Array.from(function(){if(!n("localStorage")||!n("sessionStorage"))return null;let e=null;try{const t=window.localStorage.getItem("bcDFPTargetingParams");e=JSON.parse(t)}catch(e){}return e}()).forEach((({key:e,value:t})=>s.setTargeting(e,t)))}catch(e){}o=window.getCookie("referralId"),o&&s.setTargeting("refid",o),googletag.enableServices()})),window&&window.top&&window.NXSTdata.content.pageDcode&&(window.top.rtkcategories=window.NXSTdata.content.pageDcode),(()=>{if(!document||!window)return;const{referrer:e}=window.NXSTdata.page,{navigator:{userAgent:n}}=window;if(void 0===e||void 0===n)return;let i="x";(e.includes("facebook.com")||n.includes("FB_IAB"))&&(i="fb"),t("ns.gpt.refGroup",i)})();const d=new class{apstagSlots=[];slotsInitialized;lazyloadConfig={};device="";pageType="";constructor(e=!1,t=!1){this.slotsInitialized=e,this.lazyloadConfig=t,this.pageType=(()=>{const{page_attributes:e}=window.amScripts;return["index","subindex","story","mlite"].includes(e.page_type)?e.page_type:"other"})(),this.device=(()=>{const e=window.innerWidth||document.documentElement.clientWidth;let t="mobile";return 768<e&&(t="tablet"),1024<e&&(t="desktop"),t})(),this.readMoreArticle=this.isReadMoreArticle(),this.setUpSlot=this.setUpSlot.bind(this),this.refreshSlots=this.refreshSlots.bind(this),this.refreshSingleSlot=this.refreshSingleSlot.bind(this),window.NXSTdata&&window.NXSTdata.content&&window.NXSTdata.content.pageDcode&&window.htlbid.cmd.push((()=>{window.pbjs.onEvent("beforeRequestBids",(e=>{e.forEach((e=>{e.bids.filter((e=>"rubicon"===e.bidder)).forEach((e=>{e.params.inventory={d_code:window.NXSTdata.content.pageDcode}}))}))}))}))}setUpSlot(e,t,n,i,o){this.pushCmd((()=>{let s=null;const d=window.htlbid?.enums?.OutOfPageFormat?.INTERSTITIAL;s="interstitial"===i.pos&&d?window.htlbid.defineOutOfPageSlot(n,d):t.is_oop?window.htlbid.defineOutOfPageSlot(n,e):window.htlbid.defineSlot(n,t.size,e),s&&(i&&Object.keys(i).forEach((e=>{s.setTargeting(e,i[e])})),t.sizes.length&&s.defineSizeMapping(t.sizes),t.is_companion&&o&&s.addService(window.htlbid.companionAds()),"interstitial"===i.pos?s.addService({interstitial:{triggers:{navBar:!0,unhideWindow:!1}}}):s.addService(window.htlbid.pubads()))}))}initVisibleSlots(){this.slotsInitialized=!0,this.refreshSlots()}isReadMoreArticle(){const e="mobile"===this.device,{isMobileReadMoreEnabled:t}=window;return t&&e}showHiddenSlots(){this.readMoreArticle&&this.pushCmd((()=>{let t=window.htlbid.pubads().getSlots();t=(e=>e.filter((e=>-1<e.getSlotElementId().indexOf("_ab"))))(t),t.forEach((t=>{e(t)}));const n=this.getLazySlots(t),i=this.getEagerSlots(t);window.htlbid.pubads().refresh(i),this.watchLazySlots(n)}))}refreshSlots(){this.pushCmd((()=>{let t=window.htlbid.pubads().getSlots();for(let e=t.length-1;-1<e;e-=1){const n=t[e].getTargeting("do_not_refresh"),i=t[e].getTargeting("ad_rendercount"),o=parseInt(i,10)||0;n&&0<o&&t.splice(e,1)}this.readMoreArticle&&(t=(e=>e.filter((e=>-1===e.getSlotElementId().indexOf("_ab"))))(t)),t.forEach((t=>{e(t)}));const n=this.getLazySlots(t),i=this.getEagerSlots(t);window.htlbid.pubads().refresh(i),this.watchLazySlots(n)}))}refreshSingleSlot(t){this.pushCmd((()=>{const{slotElementId:n}=t.detail,i=n,o=window.htlbid.pubads().getSlots().filter((e=>e.getSlotElementId()===i))[0];e(o),(e=>{"function"==typeof window.oPageUnload&&window.oPageUnload(e.getSlotElementId())})(o),window.htlbid.pubads().refresh([o])}))}pushCmd(e){window.htlbid.cmd.push(e)}isSlotLazy(e){const t=e.getSlotElementId();if((e=>{const t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(document.getElementById(t)))return!1;const n=e.getTargeting("pos"),i=[this.pageType,n,this.device].join("/");return!!this.lazyloadConfig[i]}getLazySlots(e){return e.filter((e=>this.isSlotLazy(e)))}getEagerSlots(e){return e.filter((e=>!this.isSlotLazy(e)))}watchLazySlots(e){if(!e.length)return;const t=e.reduce(((e,t)=>{const n=t.getTargeting("pos"),i=[this.pageType,n,this.device].join("/"),o=this.lazyloadConfig[i]??!1;return o&&(e[o]||(e[o]=[]),e[o].push(t.getSlotElementId())),e}),{});Object.keys(t).forEach((n=>{let i=null;i=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){i.unobserve(t.target);const n=t.target.id,o=e.filter((e=>e.getSlotElementId()===n));window.htlbid.pubads().refresh(o)}}))}),{root:null,rootMargin:`${n}px`,threshold:0}),t[n].forEach((e=>{const t=document.getElementById(e);i.observe(t)}))}))}}(window.slotsInitialized,window.adLazyloadConfig);var a;window.addEventListener("nsDfpSlotRendered",(e=>{const{id:t}=e.detail,n=document.getElementById(t);if(!n)return;const i=JSON.parse(n.dataset.slot);if(!i)return;const a=n.dataset.unit;if(!a)return;if(o=window.getCookie("referralId"),o){const{refids:e,notRefids:t}=n.dataset;if(e&&!e.split(",").includes(o))return;if(t&&t.split(",").includes(o))return}const r=JSON.parse(n.dataset.targeting);(function(e){const{nxsAcmConditionals:t}=window;if(!t||!t[e])return!0;const n=new URLSearchParams(window.location.search);return!t[e].some((e=>n.get(e.query_var)===e.value))})(r.pos)&&d.setUpSlot(t,i,a,r,s)})),window.addEventListener("nsDfpInitVisibleSlots",(()=>{d.initVisibleSlots()})),a=()=>{d.slotsInitialized||d.initVisibleSlots()},"loading"!==document.readyState&&a(),document.addEventListener("DOMContentLoaded",a),window.addEventListener("nsDfpShowHidden",(()=>{d.showHiddenSlots()})),window.addEventListener("nsDfpRefreshSlots",d.refreshSlots),window.addEventListener("nsDfpRefreshSingleSlot",d.refreshSingleSlot)})();