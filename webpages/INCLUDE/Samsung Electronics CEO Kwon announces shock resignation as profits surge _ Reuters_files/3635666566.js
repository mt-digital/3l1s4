(()=>{"use strict";var e=1e4;function t(e){return{lang:e?.lang??undefined,message:e?.message,abortEarly:e?.abortEarly??undefined,abortPipeEarly:e?.abortPipeEarly??undefined}}function n(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function r(e,t,r,s,i){const o=i&&"input"in i?i.input:r.value,a=i?.expected??e.expects??null,u=i?.received??n(o),c={kind:e.kind,type:e.type,input:o,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},l="schema"===e.kind,p=i?.message??e.message??(e.reference,void c.lang)??(l?void c.lang:null)??s.message??void c.lang;void 0!==p&&(c.message="function"==typeof p?p(c):p),l&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function s(e){return{version:1,vendor:"valibot",validate:n=>e["~run"]({value:n},t())}}function i(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var o=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function a(e,t,n){return"function"==typeof e.fallback?e.fallback(t,n):e.fallback}function u(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function c(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}const l={array:function e(t,n){return{kind:"schema",type:"array",reference:e,expects:"Array",async:!1,item:t,message:n,get"~standard"(){return s(this)},"~run"(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let r=0;r<n.length;r++){const s=n[r],i=this.item["~run"]({value:s},t);if(i.issues){const o={type:"array",origin:"value",input:n,key:r,value:s};for(const t of i.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.push(i.value)}}else r(this,"type",e,t);return e}}},boolean:function e(t){return{kind:"schema",type:"boolean",reference:e,expects:"boolean",async:!1,message:t,get"~standard"(){return s(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:r(this,"type",e,t),e}}},custom:function e(t,n){return{kind:"schema",type:"custom",reference:e,expects:"unknown",async:!1,check:t,message:n,get"~standard"(){return s(this)},"~run"(e,t){return this.check(e.value)?e.typed=!0:r(this,"type",e,t),e}}},literal:function e(t,i){return{kind:"schema",type:"literal",reference:e,expects:n(t),async:!1,literal:t,message:i,get"~standard"(){return s(this)},"~run"(e,t){return e.value===this.literal?e.typed=!0:r(this,"type",e,t),e}}},number:function e(t){return{kind:"schema",type:"number",reference:e,expects:"number",async:!1,message:t,get"~standard"(){return s(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?r(this,"type",e,t):e.typed=!0,e}}},object:function e(t,n){return{kind:"schema",type:"object",reference:e,expects:"Object",async:!1,entries:t,message:n,get"~standard"(){return s(this)},"~run"(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const s in this.entries){const i=this.entries[s];if(s in n||("exact_optional"===i.type||"optional"===i.type||"nullish"===i.type)&&void 0!==i.default){const r=s in n?n[s]:u(i),o=i["~run"]({value:r},t);if(o.issues){const i={type:"object",origin:"value",input:n,key:s,value:r};for(const t of o.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[s]=o.value}else if(void 0!==i.fallback)e.value[s]=a(i);else if("exact_optional"!==i.type&&"optional"!==i.type&&"nullish"!==i.type&&(r(this,"key",e,t,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:n,key:s,value:n[s]}]}),t.abortEarly))break}}else r(this,"type",e,t);return e}}},optional:function e(t,n){return{kind:"schema",type:"optional",reference:e,expects:`(${t.expects} | undefined)`,async:!1,wrapped:t,default:n,get"~standard"(){return s(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=u(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}},parse:function(e,n,r){const s=e["~run"]({value:n},t(r));if(s.issues)throw new o(s.issues);return s.value},pipe:function(...e){return{...e[0],pipe:e,get"~standard"(){return s(this)},"~run"(t,n){for(const r of e)if("metadata"!==r.kind){if(t.issues&&("schema"===r.kind||"transformation"===r.kind)){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=r["~run"](t,n))}return t}}},regex:function e(t,n){return{kind:"validation",type:"regex",reference:e,async:!1,expects:`${t}`,requirement:t,message:n,"~run"(e,t){return e.typed&&!this.requirement.test(e.value)&&r(this,"format",e,t),e}}},safeParse:function(e,n,r){const s=e["~run"]({value:n},t(r));return{typed:s.typed,success:!s.issues,output:s.value,issues:s.issues}},string:function e(t){return{kind:"schema",type:"string",reference:e,expects:"string",async:!1,message:t,get"~standard"(){return s(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:r(this,"type",e,t),e}}},transform:function e(t){return{kind:"transformation",type:"transform",reference:e,async:!1,operation:t,"~run"(e){return e.value=this.operation(e.value),e}}},union:function e(t,n){return{kind:"schema",type:"union",reference:e,expects:i(t.map(e=>e.expects),"|"),async:!1,options:t,message:n,get"~standard"(){return s(this)},"~run"(e,t){let n,s,i;for(const r of this.options){const o=r["~run"]({value:e.value},t);if(o.typed){if(!o.issues){n=o;break}s?s.push(o):s=[o]}else i?i.push(o):i=[o]}if(n)return n;if(s){if(1===s.length)return s[0];r(this,"type",e,t,{issues:c(s)}),e.typed=!0}else{if(1===i?.length)return i[0];r(this,"type",e,t,{issues:c(i)})}return e}}}},p={control:"control",variant:"variant",holdout:"holdout"},d={C:p.control,V:p.variant,H:p.holdout},f=l.pipe(l.string(),l.custom(e=>!!e.match(/.*-[CVH]$/))),h=l.pipe(l.string(),l.regex(/[a-z:_-\d]*test(\d)_(a(?:a|b))$/,e=>`Invalid configuration: "id" is required and must be a string ending in test1_ab or similar. Received: ${e}`)),y=l.object({distributionPercent:l.number(),name:f}),m=l.pipe(l.array(y),l.custom(e=>{const t=e.reduce((e,t)=>e+t.distributionPercent,0);if(100!==t)throw new Error(`Invalid configuration: sum of distributionPercent must be 100. Received: ${t}`);return!0}),l.custom(e=>{const t=e.map(e=>e.name);if(new Set(t).size!==t.length)throw new Error("Invalid configuration: segment names must be unique");return!0})),g=l.union([l.literal("external"),l.literal("internal")]),v=l.object({id:h,groups:m,type:g}),b=l.optional(l.object({default:l.boolean()}),{default:!0}),w=l.object({name:l.string()}),x=l.optional(l.object({id:w,session:w}),{id:{name:"_ml_id"},session:{name:"_ml_ses"}}),k=l.pipe(l.array(v),l.custom(e=>{const t=e.map(e=>e.id);if(new Set(t).size!==t.length)throw new Error("Invalid configuration: experiment IDs must be unique");return!0}),l.custom(e=>{const t=e,n={internal:0,external:0};for(const e of t)n[e.type]++;if(n.internal>1)throw new Error(`Invalid configuration: ${n.internal} internal tests found, only one is allowed`);if(n.external>1)throw new Error(`Invalid configuration: ${n.external} external tests found, only one is allowed`);return!0}),l.transform(e=>(e.sort((e,t)=>"internal"===e.type&&"external"===t.type?-1:"external"===e.type&&"internal"===t.type?1:0),e))),E=l.object({hostname:l.string(),experiments:k,cookies:x,consent:b}),_=JSON.parse('{"hostname":"reuters.com","consent":{"default":false},"experiments":[{"id":"pw:article:test1_ab","type":"external","groups":[{"distributionPercent":100,"name":"MATHER_QS_AB_TEST1-C"}]},{"id":"i:test1_ab","type":"internal","groups":[{"distributionPercent":50,"name":"INTERNAL_AB_TEST1-C"},{"distributionPercent":50,"name":"INTERNAL_AB_TEST1-V"}]}],"cookies":{"id":{"name":"_ml_id"},"session":{"name":"_ml_ses"}}}'),S=new class{constructor(e){const t=(n=e,l.parse(E,n));var n;this.cookies=t.cookies,this.hostname=t.hostname,this.experiments=t.experiments,this.baseConsent=t.consent}get consent(){var e;const t=(()=>{if("undefined"==typeof sessionStorage)return null;const e=sessionStorage.getItem("sophi_abtest_config");if(null!==e)try{return JSON.parse(e)}catch(e){return null}return null})();return null!==(e=null==t?void 0:t.consent)&&void 0!==e?e:this.baseConsent}}(_);var $=function(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,$)};const j=(e,t,n,r)=>{((e,t)=>{localStorage&&localStorage.setItem(e,t)})(e,t);const s=[`${e}=${t}`,`expires=${n}`,`domain=.${r.hostname}`,"path=/","SameSite=None","Secure"].join(";");window.document.cookie=s},A=e=>{if(!document.cookie)return"";const t=document.cookie.split("; ").find(t=>0===t.indexOf(e));return t?t.split("=")[1]:""},I=e=>{let t;return localStorage&&(t=localStorage.getItem(e)),t||(t=A(e)),t&&"false"!==t?t:""},C=S.cookies.id.name,O=(t,n,r)=>{return s=function(t){if(100!==t.map(function(e){return e.distributionPercent}).reduce(function(e,t){return e+t}))throw new Error("Total weight percentages must equal 100%");var n=0,r=[];return t.forEach(function(t){if(n!=e){var s=n+t.distributionPercent*e/100,i={id:t.name,range_start:0===n?n:n+1,range_end:Math.min(s,e)};n=s,r.push(i)}}),r}(t),i=r,o=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=t/Math.pow(2,32);return Math.floor(r*n)}(function(e){return function(e,t){var n,r,s,i,o,a,u,c;for(n=3&e.length,r=e.length-n,s=t,o=3432918353,a=461845907,c=0;c<r;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,s=27492+(65535&(i=5*(65535&(s=(s^=u=(65535&(u=(u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<13|s>>>19))+((5*(s>>>16)&65535)<<16)&4294967295))+(((i>>>16)+58964&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:s^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(c)))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*a+(((u>>>16)*a&65535)<<16)&4294967295}return s^=e.length,s=2246822507*(65535&(s^=s>>>16))+((2246822507*(s>>>16)&65535)<<16)&4294967295,s=3266489909*(65535&(s^=s>>>13))+((3266489909*(s>>>16)&65535)<<16)&4294967295,(s^=s>>>16)>>>0}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}("".concat(n,"-").concat(i))),function(e,t){var n=null;return e.forEach(function(e){t>=e.range_start&&t<=e.range_end&&(n=e.id)}),n}(s,o);var s,i,o};var P="Sophi AB Test:";const T={log:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,[P].concat(n))},warn:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,[P].concat(n))},error:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,[P].concat(n))}};var L=function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((r=r.apply(e,t||[])).next())})};const N="sophi_abtest_group",R="sophi_abtest_id";window.sophi=window.sophi||{};let q=S.consent.default;const M=()=>{const e=(e=>{if(A(e))return I(e).split(".")[0];const t=new Date,n=new Date(t.setFullYear(t.getFullYear()+2)).toUTCString(),r=$(),s=Math.floor(t.getTime()/1e3),i=[r,s,"1",s,s].join(".");return j(e,i,n,S),r})(C),t=I("_matheriSegs"),n=A("_matheriSegs"),r=t.split(","),s=[];for(const t of S.experiments){const n=t.groups.find(e=>r.includes(e.name));s.push((null==n?void 0:n.name)||O(t.groups,t.id,e))}const i=((e,t)=>{let n=t;return e.some(e=>"external"===e.type)||(n+=",always-H"),n})(S.experiments,s.join(","));i===r.join(",")&&n===t||j("_matheriSegs",i,(()=>{const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()})(),S)},D=e=>{const t=e.charAt(e.length-1);return d[t]},U=e=>{const t=Object.assign({},e);if(window.location.search){const n=new URLSearchParams(window.location.search);n.has(R)&&((e,t,n)=>{e?(t.experimentId=e.toLowerCase(),T.log(`Test ID override. Original: ${n.experimentId}. Overridden by: ${e}.`)):T.warn(`Invalid test ID override in URL parameter ${R}: ${e}`)})(n.get(R),t,e),n.has(N)&&((e,t,n)=>{e&&e.toLowerCase()in p?(t.assignedGroup=e,T.log(`Test group override. Original: ${n.assignedGroup}. Overridden by: ${e}.`)):T.warn(`Invalid test group override in URL parameter ${N}: ${e}`)})(n.get(N),t,e)}return t},z=function(){var e;if(!q)return[];const t=S.experiments,n=I("_matheriSegs").split(","),r=[];for(const s of t){const t=null===(e=s.groups.find(e=>n.includes(e.name)))||void 0===e?void 0:e.name;if(!t)continue;const i=D(t),o={experimentId:s.id,assignedGroup:i,type:s.type};r.push(o)}return r};function B(e="external"){return z().filter(t=>t.type===e).map(e=>{var{type:t}=e;return function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["type"])}).map("external"===e?U:e=>e)}function H(e){if(!q)return;const t=z();let n="";if("string"!=typeof e)return;n=e.toLowerCase();const r=t.find(e=>e.experimentId.toLowerCase()===n);return void 0===r&&T.warn(`Experiment ${e} not found`),r&&"external"===r.type?U(r):r}if(q)try{M()}catch(e){T.error("Error initializing storage:",e)}const V={getAllExperiments:(...e)=>L(void 0,[...e],void 0,function*(e="external"){return B(e)}),getAllExperimentsSync:(e="external")=>B(e),getExperiment:e=>L(void 0,void 0,void 0,function*(){return H(e)}),getExperimentSync:e=>H(e),enableConsent:()=>{try{q=!0,M()}catch(e){T.error("Error enabling consent:",e)}}};window.sophi.abTests=V,window.dispatchEvent(new Event("sophi.abTests:ready"))})();(()=>{"use strict";var e={1(e,t,r){var n=r(5578),i=r(7255),o=r(5755),a=r(1866),s=r(6029),l=r(5022),c=n.Symbol,u=i("wks"),p=l?c.for||c:c&&c.withoutSetter||a;e.exports=function(e){return o(u,e)||(u[e]=s&&o(c,e)?c[e]:p("Symbol."+e)),u[e]}},41(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},69(e,t,r){var n=r(231).has;e.exports=function(e){return n(e),e}},169(e,t,r){var n=r(4762),i=r(8473),o=r(1483),a=r(5755),s=r(382),l=r(2048).CONFIGURABLE,c=r(7268),u=r(4483),p=u.enforce,d=u.get,y=String,f=Object.defineProperty,h=n("".slice),w=n("".replace),v=n([].join),g=s&&!i(function(){return 8!==f(function(){},"length",{value:8}).length}),m=String(String).split("String"),b=e.exports=function(e,t,r){"Symbol("===h(y(t),0,7)&&(t="["+w(y(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||l&&e.name!==t)&&(s?f(e,"name",{value:t,configurable:!0}):e.name=t),g&&r&&a(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=p(e);return a(n,"source")||(n.source=v(m,"string"==typeof t?t:"")),e};Function.prototype.toString=b(function(){return o(this)&&d(this).source||c(this)},"toString")},194(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(7035);n({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){return i(a,this,o(e))}})},231(e,t,r){var n=r(4762),i=WeakSet.prototype;e.exports={WeakSet,add:n(i.add),has:n(i.has),remove:n(i.delete)}},274(e,t,r){var n=r(8473);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},312(e,t,r){var n=r(1409),i=r(1483),o=r(4713),a=r(1704),s=n("Set");e.exports=function(e){return function(e){return a(e)&&"number"==typeof e.size&&i(e.has)&&i(e.keys)}(e)?e:o(e)?new s(e):e}},348(e,t,r){var n=r(1807),i=r(1483),o=r(1704),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&i(r=e.toString)&&!o(s=n(r,e)))return s;if(i(r=e.valueOf)&&!o(s=n(r,e)))return s;if("string"!==t&&i(r=e.toString)&&!o(s=n(r,e)))return s;throw new a("Can't convert object to primitive value")}},382(e,t,r){var n=r(8473);e.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},458(e,t,r){r(7227)},507(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(6006);n({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){return i(a,this,o(e))}})},560(e,t,r){var n=r(8612),i=r(7380),o=r(1506),a=r(8618).set;n({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var t=i(this),r=arguments.length,n=0;n<r;)o(arguments[n++],function(e,r){a(t,e,r)},{AS_ENTRIES:!0});return t}})},670(e,t,r){var n=r(382),i=r(5835),o=r(7738);e.exports=function(e,t,r){n?i.f(e,t,o(0,r)):e[t]=r}},680(e,t,r){var n=r(4762),i=r(8120);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},864(e,t,r){var n=r(8612),i=r(8120),o=r(7380),a=r(3197),s=TypeError;n({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=o(this),r=arguments.length<2,n=r?void 0:arguments[1];if(i(e),a(t,function(i,o){r?(r=!1,n=i):n=e(n,i,o,t)}),r)throw new s("Reduce of empty map with no initial value");return n}})},1e3(e,t,r){var n=r(8612),i=r(4762),o=r(4246),a=r(1639),s=r(6261),l=i([].join),c=i([].push);n({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=o(this),r=void 0===e?",":s(e),n=[];return a(t,function(e){c(n,e)}),l(n,r)}})},1278(e,t,r){var n=r(4762),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},1409(e,t,r){var n=r(5578),i=r(1483);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},1423(e,t,r){var n=r(1409),i=r(1483),o=r(4815),a=r(5022),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,s(e))}},1483(e){var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},1506(e,t,r){var n=r(2914),i=r(1807),o=r(2293),a=r(8761),s=r(5299),l=r(6960),c=r(4815),u=r(4887),p=r(6665),d=r(6721),y=TypeError,f=function(e,t){this.stopped=e,this.result=t},h=f.prototype;e.exports=function(e,t,r){var w,v,g,m,b,S,x,P=r&&r.that,A=!(!r||!r.AS_ENTRIES),k=!(!r||!r.IS_RECORD),D=!(!r||!r.IS_ITERATOR),V=!(!r||!r.INTERRUPTED),L=n(t,P),E=function(e){return w&&d(w,"normal"),new f(!0,e)},O=function(e){return A?(o(e),V?L(e[0],e[1],E):L(e[0],e[1])):V?L(e,E):L(e)};if(k)w=e.iterator;else if(D)w=e;else{if(!(v=p(e)))throw new y(a(e)+" is not iterable");if(s(v)){for(g=0,m=l(e);m>g;g++)if((b=O(e[g]))&&c(h,b))return b;return new f(!1)}w=u(e,v)}for(S=k?e.next:w.next;!(x=i(S,w)).done;){try{b=O(x.value)}catch(e){d(w,"throw",e)}if("object"==typeof b&&b&&c(h,b))return b}return new f(!1)}},1507(e){e.exports={}},1591(e,t,r){var n=r(8612),i=r(4246),o=r(6880).add;n({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=i(this),t=0,r=arguments.length;t<r;t++)o(e,arguments[t]);return e}})},1639(e,t,r){var n=r(4762),i=r(6001),o=r(6880),a=o.Set,s=o.proto,l=n(s.forEach),c=n(s.keys),u=c(new a).next;e.exports=function(e,t,r){return r?i({iterator:c(e),next:u},t):l(e,t)}},1641(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(8618),s=r(3197),l=a.Map,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e,i){c(n,i,r(e,i,t))}),n}})},1703(e){var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},1704(e,t,r){var n=r(1483);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},1799(e,t,r){var n=r(382),i=r(8473),o=r(3145);e.exports=!n&&!i(function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},1807(e,t,r){var n=r(274),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},1831(e,t,r){var n=r(9557),i=r(5578),o=r(2095),a="__core-js_shared__",s=e.exports=i[a]||o(a,{});(s.versions||(s.versions=[])).push({version:"3.46.0",mode:n?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.46.0/LICENSE",source:"https://github.com/zloirock/core-js"})},1851(e,t,r){var n,i,o,a=r(8473),s=r(1483),l=r(1704),c=r(5290),u=r(3181),p=r(7914),d=r(1),y=r(9557),f=d("iterator"),h=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(n=i):h=!0),!l(n)||a(function(){var e={};return n[f].call(e)!==e})?n={}:y&&(n=c(n)),s(n[f])||p(n,f,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:h}},1866(e,t,r){var n=r(4762),i=0,o=Math.random(),a=n(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},1911(e,t,r){var n=r(8612),i=r(7380),o=r(8618).remove;n({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),r=!0,n=0,a=arguments.length;n<a;n++)e=o(t,arguments[n]),r=r&&e;return!!r}})},1916(e,t,r){var n=r(4246),i=r(6880),o=r(4824),a=r(3131),s=r(6001),l=i.add,c=i.has,u=i.remove;e.exports=function(e){var t=n(this),r=a(e).getIterator(),i=o(t);return s(r,function(e){c(t,e)?u(i,e):l(i,e)}),i}},1969(e,t,r){var n=r(4762),i=WeakMap.prototype;e.exports={WeakMap,set:n(i.set),get:n(i.get),has:n(i.has),remove:n(i.delete)}},1975(e,t,r){var n=r(8612),i=r(1807),o=r(8120),a=r(2293),s=r(41),l=r(8660),c=r(8901),u=r(9557),p=r(6721),d=r(7486),y=r(5267),f=!u&&!d("filter",function(){}),h=!u&&!f&&y("filter",TypeError),w=u||f||h,v=l(function(){for(var e,t,r=this.iterator,n=this.predicate,o=this.next;;){if(e=a(i(o,r)),this.done=!!e.done)return;if(t=e.value,c(r,n,[t,this.counter++],!0))return t}});n({target:"Iterator",proto:!0,real:!0,forced:w},{filter:function(e){a(this);try{o(e)}catch(e){p(this,"throw",e)}return h?i(h,this,e):new v(s(this),{predicate:e})}})},1983(e,t,r){var n=r(6721);e.exports=function(e,t,r){for(var i=e.length-1;i>=0;i--)if(void 0!==e[i])try{r=n(e[i].iterator,t,r)}catch(e){t="throw",r=e}if("throw"===t)throw r;return r}},1984(e,t,r){var n=r(4246),i=r(5828),o=r(1639),a=r(3131);e.exports=function(e){var t=n(this),r=a(e);return!(i(t)>r.size)&&!1!==o(t,function(e){if(!r.includes(e))return!1},!0)}},2048(e,t,r){var n=r(382),i=r(5755),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),l=s&&"something"===function(){}.name,c=s&&(!n||n&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},2095(e,t,r){var n=r(5578),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},2121(e,t,r){var n=r(4762),i=r(8473),o=r(1278),a=Object,s=n("".split);e.exports=i(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"===o(e)?s(e,""):a(e)}:a},2278(e,t,r){var n=r(6742),i=r(4741).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},2293(e,t,r){var n=r(1704),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not an object")}},2313(e,t,r){var n=r(7914);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},2347(e,t,r){var n=r(3312),i=Object;e.exports=function(e){return i(n(e))}},2355(e,t,r){var n=r(1807),i=r(1704),o=r(1423),a=r(2564),s=r(348),l=r(1),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,l=a(e,u);if(l){if(void 0===t&&(t="default"),r=n(l,e,t),!i(r)||o(r))return r;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},2455(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(1639);n({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=a(t,function(e){if(r(e,e,t))return{value:e}},!0);return n&&n.value}})},2477(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(5790);n({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){return i(a,this,o(e))}})},2564(e,t,r){var n=r(8120),i=r(5983);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},2592(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(8618),s=r(3197),l=a.Map,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e,i){r(e,i,t)&&c(n,i,e)}),n}})},2811(e,t,r){var n=r(1409);e.exports=n("document","documentElement")},2822(e,t,r){var n=r(8612),i=r(8120),o=r(4246),a=r(1639),s=TypeError;n({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=o(this),r=arguments.length<2,n=r?void 0:arguments[1];if(i(e),a(t,function(i){r?(r=!1,n=i):n=e(n,i,i,t)}),r)throw new s("Reduce of empty set with no initial value");return n}})},2914(e,t,r){var n=r(3786),i=r(8120),o=r(274),a=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},3005(e,t,r){var n=r(1703);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},3049(e,t,r){var n=r(4246),i=r(6880).has,o=r(5828),a=r(3131),s=r(6001),l=r(6721);e.exports=function(e){var t=n(this),r=a(e);if(o(t)<r.size)return!1;var c=r.getIterator();return!1!==s(c,function(e){if(!i(t,e))return l(c,"normal",!1)})}},3067(e,t,r){var n=r(274),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(o):function(){return a.apply(o,arguments)})},3131(e,t,r){var n=r(8120),i=r(2293),o=r(1807),a=r(3005),s=r(41),l="Invalid size",c=RangeError,u=TypeError,p=Math.max,d=function(e,t){this.set=e,this.size=p(t,0),this.has=n(e.has),this.keys=n(e.keys)};d.prototype={getIterator:function(){return s(i(o(this.keys,this.set)))},includes:function(e){return o(this.has,this.set,e)}},e.exports=function(e){i(e);var t=+e.size;if(t!=t)throw new u(l);var r=a(t);if(r<0)throw new c(l);return new d(e,r)}},3145(e,t,r){var n=r(5578),i=r(1704),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},3181(e,t,r){var n=r(5755),i=r(1483),o=r(2347),a=r(5409),s=r(9441),l=a("IE_PROTO"),c=Object,u=c.prototype;e.exports=s?c.getPrototypeOf:function(e){var t=o(e);if(n(t,l))return t[l];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof c?u:null}},3197(e,t,r){var n=r(4762),i=r(6001),o=r(8618),a=o.Map,s=o.proto,l=n(s.forEach),c=n(s.entries),u=c(new a).next;e.exports=function(e,t,r){return r?i({iterator:c(e),next:u},function(e){return t(e[1],e[0])}):l(e,t)}},3211(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(8618),s=r(3197),l=a.Map,c=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e,i){c(n,r(e,i,t),e)}),n}})},3242(e,t,r){var n=r(8612),i=r(1807),o=r(1506),a=r(8120),s=r(2293),l=r(41),c=r(6721),u=r(5267)("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{find:function(e){s(this);try{a(e)}catch(e){c(this,"throw",e)}if(u)return i(u,this,e);var t=l(this),r=0;return o(t,function(t,n){if(e(t,r++))return n(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},3312(e,t,r){var n=r(5983),i=TypeError;e.exports=function(e){if(n(e))throw new i("Can't call method on "+e);return e}},3392(e,t,r){var n=r(3005),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},3567(e,t,r){var n=r(8612),i=r(9531),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return!0===a(o(this),function(t){if(i(t,e))return!0},!0)}})},3617(e,t,r){var n=r(8612),i=r(5578),o=r(6021),a=r(2293),s=r(1483),l=r(3181),c=r(3864),u=r(670),p=r(8473),d=r(5755),y=r(1),f=r(1851).IteratorPrototype,h=r(382),w=r(9557),v="constructor",g="Iterator",m=y("toStringTag"),b=TypeError,S=i[g],x=w||!s(S)||S.prototype!==f||!p(function(){S({})}),P=function(){if(o(this,f),l(this)===f)throw new b("Abstract class Iterator not directly constructable")},A=function(e,t){h?c(f,e,{configurable:!0,get:function(){return t},set:function(t){if(a(this),this===f)throw new b("You can't redefine this property");d(this,e)?this[e]=t:u(this,e,t)}}):f[e]=t};d(f,m)||A(m,g),!x&&d(f,v)&&f[v]!==Object||A(v,P),P.prototype=f,n({global:!0,constructor:!0,forced:x},{Iterator:P})},3644(e,t,r){var n=r(8612),i=r(69),o=r(231).add;n({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=i(this),t=0,r=arguments.length;t<r;t++)o(e,arguments[t]);return e}})},3658(e,t,r){var n=r(6742),i=r(4741);e.exports=Object.keys||function(e){return n(e,i)}},3786(e,t,r){var n=r(1278),i=r(4762);e.exports=function(e){if("Function"===n(e))return i(e)}},3789(e,t,r){var n=r(8612),i=r(7380),o=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){var t=o(i(this),function(t,r){if(t===e)return{key:r}},!0);return t&&t.key}})},3815(e,t,r){var n=r(2355),i=r(1423);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},3864(e,t,r){var n=r(169),i=r(5835);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},3896(e,t,r){var n=r(382),i=r(8473);e.exports=n&&i(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},3991(e,t,r){var n=r(8612),i=r(1807),o=r(8120),a=r(2293),s=r(41),l=r(8660),c=r(8901),u=r(6721),p=r(7486),d=r(5267),y=r(9557),f=!y&&!p("map",function(){}),h=!y&&!f&&d("map",TypeError),w=y||f||h,v=l(function(){var e=this.iterator,t=a(i(this.next,e));if(!(this.done=!!t.done))return c(e,this.mapper,[t.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:w},{map:function(e){a(this);try{o(e)}catch(e){u(this,"throw",e)}return h?i(h,this,e):new v(s(this),{mapper:e})}})},4246(e,t,r){var n=r(6880).has;e.exports=function(e){return n(e),e}},4338(e,t,r){var n={};n[r(1)("toStringTag")]="z",e.exports="[object z]"===String(n)},4347(e,t){t.f=Object.getOwnPropertySymbols},4364(e,t,r){r(3991)},4483(e,t,r){var n,i,o,a=r(4644),s=r(5578),l=r(1704),c=r(9037),u=r(5755),p=r(1831),d=r(5409),y=r(1507),f="Object already initialized",h=s.TypeError,w=s.WeakMap;if(a||p.state){var v=p.state||(p.state=new w);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw new h(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},o=function(e){return v.has(e)}}else{var g=d("state");y[g]=!0,n=function(e,t){if(u(e,g))throw new h(f);return t.facade=e,c(e,g,t),t},i=function(e){return u(e,g)?e[g]:{}},o=function(e){return u(e,g)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=i(t)).type!==e)throw new h("Incompatible receiver, "+e+" required");return r}}}},4644(e,t,r){var n=r(5578),i=r(1483),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},4697(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=a(t,function(e,n){if(r(e,n,t))return{value:e}},!0);return n&&n.value}})},4713(e,t,r){var n=r(6145),i=r(5755),o=r(5983),a=r(1),s=r(6775),l=a("iterator"),c=Object;e.exports=function(e){if(o(e))return!1;var t=c(e);return void 0!==t[l]||"@@iterator"in t||i(s,n(t))}},4741(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},4762(e,t,r){var n=r(274),i=Function.prototype,o=i.call,a=n&&i.bind.bind(o,o);e.exports=n?a:function(e){return function(){return o.apply(e,arguments)}}},4815(e,t,r){var n=r(4762);e.exports=n({}.isPrototypeOf)},4824(e,t,r){var n=r(6880),i=r(1639),o=n.Set,a=n.add;e.exports=function(e){var t=new o;return i(e,function(e){a(t,e)}),t}},4846(e,t,r){r(3617)},4887(e,t,r){var n=r(1807),i=r(8120),o=r(2293),a=r(8761),s=r(6665),l=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(i(r))return o(n(r,e));throw new l(a(e)+" is not iterable")}},4961(e,t,r){var n=r(382),i=r(1807),o=r(7611),a=r(7738),s=r(5599),l=r(3815),c=r(5755),u=r(1799),p=Object.getOwnPropertyDescriptor;t.f=n?p:function(e,t){if(e=s(e),t=l(t),u)try{return p(e,t)}catch(e){}if(c(e,t))return a(!i(o.f,e,t),e[t])}},5022(e,t,r){var n=r(6029);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5231(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=a(t,function(e,n){if(r(e,n,t))return{key:n}},!0);return n&&n.key}})},5247(e){e.exports=function(e,t){return{value:e,done:t}}},5267(e,t,r){var n=r(5578);e.exports=function(e,t){var r=n.Iterator,i=r&&r.prototype,o=i&&i[e],a=!1;if(o)try{o.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(e){e instanceof t||(a=!1)}if(!a)return o}},5281(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(5472);n({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){return i(a,this,o(e))}})},5290(e,t,r){var n,i=r(2293),o=r(5799),a=r(4741),s=r(1507),l=r(2811),c=r(3145),u=r(5409),p="prototype",d="script",y=u("IE_PROTO"),f=function(){},h=function(e){return"<"+d+">"+e+"</"+d+">"},w=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;v="undefined"!=typeof document?document.domain&&n?w(n):(t=c("iframe"),r="java"+d+":",t.style.display="none",l.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):w(n);for(var i=a.length;i--;)delete v[p][a[i]];return v()};s[y]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[p]=i(e),r=new f,f[p]=null,r[y]=e):r=v(),void 0===t?r:o.f(r,t)}},5299(e,t,r){var n=r(1),i=r(6775),o=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},5409(e,t,r){var n=r(7255),i=r(1866),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5472(e,t,r){var n=r(4246),i=r(6880),o=r(5828),a=r(3131),s=r(1639),l=r(6001),c=i.Set,u=i.add,p=i.has;e.exports=function(e){var t=n(this),r=a(e),i=new c;return o(t)>r.size?l(r.getIterator(),function(e){p(t,e)&&u(i,e)}):s(t,function(e){r.includes(e)&&u(i,e)}),i}},5473(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(1916);n({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){return i(a,this,o(e))}})},5568(e,t,r){r(9217)},5578(e){var t=function(e){return e&&e.Math===Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof globalThis&&globalThis)||t("object"==typeof this&&this)||function(){return this}()||Function("return this")()},5599(e,t,r){var n=r(2121),i=r(3312);e.exports=function(e){return n(i(e))}},5755(e,t,r){var n=r(4762),i=r(2347),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},5790(e,t,r){var n=r(4246),i=r(6880).add,o=r(4824),a=r(3131),s=r(6001);e.exports=function(e){var t=n(this),r=a(e).getIterator(),l=o(t);return s(r,function(e){i(l,e)}),l}},5799(e,t,r){var n=r(382),i=r(3896),o=r(5835),a=r(2293),s=r(5599),l=r(3658);t.f=n&&!i?Object.defineProperties:function(e,t){a(e);for(var r,n=s(t),i=l(t),c=i.length,u=0;c>u;)o.f(e,r=i[u++],n[r]);return e}},5828(e,t,r){var n=r(680),i=r(6880);e.exports=n(i.proto,"size","get")||function(e){return e.size}},5835(e,t,r){var n=r(382),i=r(1799),o=r(3896),a=r(2293),s=r(3815),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,p="enumerable",d="configurable",y="writable";t.f=n?o?function(e,t,r){if(a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&y in r&&!r[y]){var n=u(e,t);n&&n[y]&&(e[t]=r.value,r={configurable:d in r?r[d]:n[d],enumerable:p in r?r[p]:n[p],writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(a(e),t=s(t),a(r),i)try{return c(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new l("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},5899(e,t,r){var n=r(1969).has;e.exports=function(e){return n(e),e}},5983(e){e.exports=function(e){return null==e}},6001(e,t,r){var n=r(1807);e.exports=function(e,t,r){for(var i,o,a=r?e:e.iterator,s=e.next;!(i=n(s,a)).done;)if(void 0!==(o=t(i.value)))return o}},6006(e,t,r){var n=r(4246),i=r(6880),o=r(4824),a=r(5828),s=r(3131),l=r(1639),c=r(6001),u=i.has,p=i.remove;e.exports=function(e){var t=n(this),r=s(e),i=o(t);return a(t)<=r.size?l(t,function(e){r.includes(e)&&p(i,e)}):c(r.getIterator(),function(e){u(i,e)&&p(i,e)}),i}},6021(e,t,r){var n=r(4815),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new i("Incorrect invocation")}},6029(e,t,r){var n=r(6477),i=r(8473),o=r(5578).String;e.exports=!!Object.getOwnPropertySymbols&&!i(function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},6145(e,t,r){var n=r(4338),i=r(1483),o=r(1278),a=r(1)("toStringTag"),s=Object,l="Arguments"===o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=s(e),a))?r:l?o(t):"Object"===(n=o(t))&&i(t.callee)?"Arguments":n}},6211(e,t,r){r(3242)},6237(e,t,r){var n=r(8612),i=r(4246),o=r(6880).remove;n({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),r=!0,n=0,a=arguments.length;n<a;n++)e=o(t,arguments[n]),r=r&&e;return!!r}})},6261(e,t,r){var n=r(6145),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},6477(e,t,r){var n,i,o=r(5578),a=r(9461),s=o.process,l=o.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u&&(i=(n=u.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},6651(e,t,r){var n=r(5599),i=r(3392),o=r(6960),a=function(e){return function(t,r,a){var s=n(t),l=o(s);if(0===l)return!e&&-1;var c,u=i(a,l);if(e&&r!=r){for(;l>u;)if((c=s[u++])!=c)return!0}else for(;l>u;u++)if((e||u in s)&&s[u]===r)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},6665(e,t,r){var n=r(6145),i=r(2564),o=r(5983),a=r(6775),s=r(1)("iterator");e.exports=function(e){if(!o(e))return i(e,s)||i(e,"@@iterator")||a[n(e)]}},6721(e,t,r){var n=r(1807),i=r(2293),o=r(2564);e.exports=function(e,t,r){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw r;if(s)throw a;return i(a),r}},6726(e,t,r){var n=r(5755),i=r(9497),o=r(4961),a=r(5835);e.exports=function(e,t,r){for(var s=i(t),l=a.f,c=o.f,u=0;u<s.length;u++){var p=s[u];n(e,p)||r&&n(r,p)||l(e,p,c(t,p))}}},6742(e,t,r){var n=r(4762),i=r(5755),o=r(5599),a=r(6651).indexOf,s=r(1507),l=n([].push);e.exports=function(e,t){var r,n=o(e),c=0,u=[];for(r in n)!i(s,r)&&i(n,r)&&l(u,r);for(;t.length>c;)i(n,r=t[c++])&&(~a(u,r)||l(u,r));return u}},6746(e,t,r){var n=r(8612),i=r(5899),o=r(1969).remove;n({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),r=!0,n=0,a=arguments.length;n<a;n++)e=o(t,arguments[n]),r=r&&e;return!!r}})},6775(e){e.exports={}},6880(e,t,r){var n=r(4762),i=Set.prototype;e.exports={Set,add:n(i.add),has:n(i.has),remove:n(i.delete),proto:i}},6913(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(1984);n({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){return i(a,this,o(e))}})},6960(e,t,r){var n=r(8324);e.exports=function(e){return n(e.length)}},6993(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(1639);n({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0);return!1!==a(t,function(e){if(!r(e,e,t))return!1},!0)}})},7035(e,t,r){var n=r(4246),i=r(6880).has,o=r(5828),a=r(3131),s=r(1639),l=r(6001),c=r(6721);e.exports=function(e){var t=n(this),r=a(e);if(o(t)<=r.size)return!1!==s(t,function(e){if(r.includes(e))return!1},!0);var u=r.getIterator();return!1!==l(u,function(e){if(i(t,e))return c(u,"normal",!1)})}},7080(e,t,r){var n=r(8612),i=r(69),o=r(231).remove;n({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=i(this),r=!0,n=0,a=arguments.length;n<a;n++)e=o(t,arguments[n]),r=r&&e;return!!r}})},7227(e,t,r){var n=r(8612),i=r(1506),o=r(8120),a=r(2293),s=r(41),l=r(6721),c=r(5267),u=r(3067),p=r(8473),d=TypeError,y=p(function(){[].keys().reduce(function(){},void 0)}),f=!y&&c("reduce",d);n({target:"Iterator",proto:!0,real:!0,forced:y||f},{reduce:function(e){a(this);try{o(e)}catch(e){l(this,"throw",e)}var t=arguments.length<2,r=t?void 0:arguments[1];if(f)return u(f,this,t?[e]:[e,r]);var n=s(this),c=0;if(i(n,function(n){t?(t=!1,r=n):r=e(r,n,c),c++},{IS_RECORD:!0}),t)throw new d("Reduce of empty iterator with no initial value");return r}})},7255(e,t,r){var n=r(1831);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},7268(e,t,r){var n=r(4762),i=r(1483),o=r(1831),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},7368(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(6880),s=r(1639),l=a.Set,c=a.add;n({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e){c(n,r(e,e,t))}),n}})},7380(e,t,r){var n=r(8618).has;e.exports=function(e){return n(e),e}},7458(e,t,r){r(1975)},7486(e){e.exports=function(e,t){var r="function"==typeof Iterator&&Iterator.prototype[e];if(r)try{r.call({next:null},t).next()}catch(e){return!0}}},7611(e,t){var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7738(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7750(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0);return!0===a(t,function(e,n){if(r(e,n,t))return!0},!0)}})},7911(e,t,r){var n=r(8612),i=r(2914),o=r(7380),a=r(3197);n({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0);return!1!==a(t,function(e,n){if(!r(e,n,t))return!1},!0)}})},7914(e,t,r){var n=r(1483),i=r(5835),o=r(169),a=r(2095);e.exports=function(e,t,r,s){s||(s={});var l=s.enumerable,c=void 0!==s.name?s.name:t;if(n(r)&&o(r,c,s),s.global)l?e[t]=r:a(t,r);else{try{s.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},7918(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(6880),s=r(1639),l=a.Set,c=a.add;n({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0),n=new l;return s(t,function(e){r(e,e,t)&&c(n,e)}),n}})},8120(e,t,r){var n=r(1483),i=r(8761),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a function")}},8324(e,t,r){var n=r(3005),i=Math.min;e.exports=function(e){var t=n(e);return t>0?i(t,9007199254740991):0}},8473(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},8608(e,t,r){var n=r(8612),i=r(1807),o=r(312),a=r(3049);n({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){return i(a,this,o(e))}})},8612(e,t,r){var n=r(5578),i=r(4961).f,o=r(9037),a=r(7914),s=r(2095),l=r(6726),c=r(8730);e.exports=function(e,t){var r,u,p,d,y,f=e.target,h=e.global,w=e.stat;if(r=h?n:w?n[f]||s(f,{}):n[f]&&n[f].prototype)for(u in t){if(d=t[u],p=e.dontCallGetSet?(y=i(r,u))&&y.value:r[u],!c(h?u:f+(w?".":"#")+u,e.forced)&&void 0!==p){if(typeof d==typeof p)continue;l(d,p)}(e.sham||p&&p.sham)&&o(d,"sham",!0),a(r,u,d,e)}}},8618(e,t,r){var n=r(4762),i=Map.prototype;e.exports={Map,set:n(i.set),get:n(i.get),has:n(i.has),remove:n(i.delete),proto:i}},8660(e,t,r){var n=r(1807),i=r(5290),o=r(9037),a=r(2313),s=r(1),l=r(4483),c=r(2564),u=r(1851).IteratorPrototype,p=r(5247),d=r(6721),y=r(1983),f=s("toStringTag"),h="IteratorHelper",w="WrapForValidIterator",v="normal",g="throw",m=l.set,b=function(e){var t=l.getterFor(e?w:h);return a(i(u),{next:function(){var r=t(this);if(e)return r.nextHandler();if(r.done)return p(void 0,!0);try{var n=r.nextHandler();return r.returnHandlerResult?n:p(n,r.done)}catch(e){throw r.done=!0,e}},return:function(){var r=t(this),i=r.iterator;if(r.done=!0,e){var o=c(i,"return");return o?n(o,i):p(void 0,!0)}if(r.inner)try{d(r.inner.iterator,v)}catch(e){return d(i,g,e)}if(r.openIters)try{y(r.openIters,v)}catch(e){return d(i,g,e)}return i&&d(i,v),p(void 0,!0)}})},S=b(!0),x=b(!1);o(x,f,"Iterator Helper"),e.exports=function(e,t,r){var n=function(n,i){i?(i.iterator=n.iterator,i.next=n.next):i=n,i.type=t?w:h,i.returnHandlerResult=!!r,i.nextHandler=e,i.counter=0,i.done=!1,m(this,i)};return n.prototype=t?S:x,n}},8730(e,t,r){var n=r(8473),i=r(1483),o=/#|\.prototype\./,a=function(e,t){var r=l[s(e)];return r===u||r!==c&&(i(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},8761(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},8901(e,t,r){var n=r(2293),i=r(6721);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){i(e,"throw",t)}}},9037(e,t,r){var n=r(382),i=r(5835),o=r(7738);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},9217(e,t,r){var n=r(8612),i=r(1807),o=r(1506),a=r(8120),s=r(2293),l=r(41),c=r(6721),u=r(5267)("some",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{some:function(e){s(this);try{a(e)}catch(e){c(this,"throw",e)}if(u)return i(u,this,e);var t=l(this),r=0;return o(t,function(t,n){if(e(t,r++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},9271(e,t,r){var n=r(8612),i=r(8120),o=r(7380),a=r(8618),s=TypeError,l=a.get,c=a.has,u=a.set;n({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,t){var r=o(this),n=arguments.length;i(t);var a=c(r,e);if(!a&&n<3)throw new s("Updating absent value");var p=a?l(r,e):i(n>2?arguments[2]:void 0)(e,r);return u(r,e,t(p,e,r)),r}})},9441(e,t,r){var n=r(8473);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},9461(e,t,r){var n=r(5578).navigator,i=n&&n.userAgent;e.exports=i?String(i):""},9497(e,t,r){var n=r(1409),i=r(4762),o=r(2278),a=r(4347),s=r(2293),l=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=a.f;return r?l(t,r(e)):t}},9531(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},9557(e){e.exports=!1},9655(e,t,r){r(9930)},9828(e,t,r){var n=r(8612),i=r(2914),o=r(4246),a=r(1639);n({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var t=o(this),r=i(e,arguments.length>1?arguments[1]:void 0);return!0===a(t,function(e){if(r(e,e,t))return!0},!0)}})},9930(e,t,r){var n=r(8612),i=r(1807),o=r(1506),a=r(8120),s=r(2293),l=r(41),c=r(6721),u=r(5267)("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{forEach:function(e){s(this);try{a(e)}catch(e){c(this,"throw",e)}if(u)return i(u,this,e);var t=l(this),r=0;o(t,function(t){e(t,r++)},{IS_RECORD:!0})}})}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}function n(e){return{lang:e?.lang??undefined,message:e?.message,abortEarly:e?.abortEarly??undefined,abortPipeEarly:e?.abortPipeEarly??undefined}}function i(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function o(e,t,r,n,o){const a=o&&"input"in o?o.input:r.value,s=o?.expected??e.expects??null,l=o?.received??i(a),c={kind:e.kind,type:e.type,input:a,expected:s,received:l,message:`Invalid ${t}: ${s?`Expected ${s} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:o?.path,issues:o?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},u="schema"===e.kind,p=o?.message??e.message??(e.reference,void c.lang)??(u?void c.lang:null)??n.message??void c.lang;void 0!==p&&(c.message="function"==typeof p?p(c):p),u&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function a(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},n())}}function s(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function l(e,t){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:r[0]??"never"}function c(e){if(e.path){let t="";for(const r of e.path){if("string"!=typeof r.key&&"number"!=typeof r.key)return null;t+=t?`.${r.key}`:r.key}return t}return null}r(4846),r(7458),r(4364),r(6746),r(3644),r(7080),r(1911),r(7911),r(2592),r(4697),r(5231),r(3567),r(3789),r(3211),r(1641),r(560),r(864),r(7750),r(9271);var u=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function p(e){return{kind:"transformation",type:"transform",reference:p,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function d(e,t,r){return"function"==typeof e.fallback?e.fallback(t,r):e.fallback}function y(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function f(e){return{kind:"schema",type:"boolean",reference:f,expects:"boolean",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:o(this,"type",e,t),e}}}function h(e){return{kind:"schema",type:"date",reference:h,expects:"Date",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return e.value instanceof Date?isNaN(e.value)?o(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:o(this,"type",e,t),e}}}function w(e,t){if(typeof e==typeof t){if(e===t||e instanceof Date&&t instanceof Date&&+e===+t)return{value:e};if(e&&t&&e.constructor===Object&&t.constructor===Object){for(const r in t)if(r in e){const n=w(e[r],t[r]);if(n.issue)return n;e[r]=n.value}else e[r]=t[r];return{value:e}}if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){for(let r=0;r<e.length;r++){const n=w(e[r],t[r]);if(n.issue)return n;e[r]=n.value}return{value:e}}}return{issue:!0}}function v(e,t){return{kind:"schema",type:"non_optional",reference:v,expects:"!undefined",async:!1,wrapped:e,message:t,get"~standard"(){return a(this)},"~run"(e,t){return void 0!==e.value&&(e=this.wrapped["~run"](e,t)),void 0===e.value&&o(this,"type",e,t),e}}}function g(e){return{kind:"schema",type:"null",reference:g,expects:"null",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return null===e.value?e.typed=!0:o(this,"type",e,t),e}}}function m(e){return{kind:"schema",type:"number",reference:m,expects:"number",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?o(this,"type",e,t):e.typed=!0,e}}}function b(e,t){return{kind:"schema",type:"object",reference:b,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return a(this)},"~run"(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in this.entries){const i=this.entries[n];if(n in r||("exact_optional"===i.type||"optional"===i.type||"nullish"===i.type)&&void 0!==i.default){const o=n in r?r[n]:y(i),a=i["~run"]({value:o},t);if(a.issues){const i={type:"object",origin:"value",input:r,key:n,value:o};for(const t of a.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[n]=a.value}else if(void 0!==i.fallback)e.value[n]=d(i);else if("exact_optional"!==i.type&&"optional"!==i.type&&"nullish"!==i.type&&(o(this,"key",e,t,{input:void 0,expected:`"${n}"`,path:[{type:"object",origin:"key",input:r,key:n,value:r[n]}]}),t.abortEarly))break}}else o(this,"type",e,t);return e}}}function S(e,t){return{kind:"schema",type:"optional",reference:S,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return a(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=y(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function x(e,t){return{kind:"schema",type:"picklist",reference:x,expects:l(e.map(i),"|"),async:!1,options:e,message:t,get"~standard"(){return a(this)},"~run"(e,t){return this.options.includes(e.value)?e.typed=!0:o(this,"type",e,t),e}}}function P(e,t,r){return{kind:"schema",type:"record",reference:P,expects:"Object",async:!1,key:e,value:t,message:r,get"~standard"(){return a(this)},"~run"(e,t){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const n in r)if(s(r,n)){const i=r[n],o=this.key["~run"]({value:n},t);if(o.issues){const a={type:"object",origin:"key",input:r,key:n,value:i};for(const t of o.issues)t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}const a=this.value["~run"]({value:i},t);if(a.issues){const o={type:"object",origin:"value",input:r,key:n,value:i};for(const t of a.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}o.typed&&a.typed||(e.typed=!1),o.typed&&(e.value[o.value]=a.value)}}else o(this,"type",e,t);return e}}}function A(e){return{kind:"schema",type:"string",reference:A,expects:"string",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:o(this,"type",e,t),e}}}function k(e){let t;if(e)for(const r of e)t?t.push(...r.issues):t=r.issues;return t}function D(e,t){return{kind:"schema",type:"union",reference:D,expects:l(e.map(e=>e.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return a(this)},"~run"(e,t){let r,n,i;for(const o of this.options){const a=o["~run"]({value:e.value},t);if(a.typed){if(!a.issues){r=a;break}n?n.push(a):n=[a]}else i?i.push(a):i=[a]}if(r)return r;if(n){if(1===n.length)return n[0];o(this,"type",e,t,{issues:k(n)}),e.typed=!0}else{if(1===i?.length)return i[0];o(this,"type",e,t,{issues:k(i)})}return e}}}function V(e,t,r){const i=e["~run"]({value:t},n(r));if(i.issues)throw new u(i.issues);return i.value}function L(...e){return{...e[0],pipe:e,get"~standard"(){return a(this)},"~run"(t,r){for(const n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n["~run"](t,r))}return t}}}const E={any:function e(){return{kind:"schema",type:"any",reference:e,expects:"any",async:!1,get"~standard"(){return a(this)},"~run":e=>(e.typed=!0,e)}},array:function e(t,r){return{kind:"schema",type:"array",reference:e,expects:"Array",async:!1,item:t,message:r,get"~standard"(){return a(this)},"~run"(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<r.length;n++){const i=r[n],o=this.item["~run"]({value:i},t);if(o.issues){const a={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else o(this,"type",e,t);return e}}},boolean:f,check:function e(t,r){return{kind:"validation",type:"check",reference:e,async:!1,expects:null,requirement:t,message:r,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&o(this,"input",e,t),e}}},custom:function e(t,r){return{kind:"schema",type:"custom",reference:e,expects:"unknown",async:!1,check:t,message:r,get"~standard"(){return a(this)},"~run"(e,t){return this.check(e.value)?e.typed=!0:o(this,"type",e,t),e}}},exactOptional:function e(t,r){return{kind:"schema",type:"exact_optional",reference:e,expects:t.expects,async:!1,wrapped:t,default:r,get"~standard"(){return a(this)},"~run"(e,t){return this.wrapped["~run"](e,t)}}},flatten:function(e){const t={};for(const r of e)if(r.path){const e=c(r);e?(t.nested||(t.nested={}),t.nested[e]?t.nested[e].push(r.message):t.nested[e]=[r.message]):t.other?t.other.push(r.message):t.other=[r.message]}else t.root?t.root.push(r.message):t.root=[r.message];return t},intersect:function e(t,r){return{kind:"schema",type:"intersect",reference:e,expects:l(t.map(e=>e.expects),"&"),async:!1,options:t,message:r,get"~standard"(){return a(this)},"~run"(e,t){if(this.options.length){const r=e.value;let n;e.typed=!0;for(const i of this.options){const o=i["~run"]({value:r},t);if(o.issues&&(e.issues?e.issues.push(...o.issues):e.issues=o.issues,t.abortEarly)){e.typed=!1;break}o.typed||(e.typed=!1),e.typed&&(n?n.push(o.value):n=[o.value])}if(e.typed){e.value=n[0];for(let r=1;r<n.length;r++){const i=w(e.value,n[r]);if(i.issue){o(this,"type",e,t,{received:"unknown"});break}e.value=i.value}}}else o(this,"type",e,t);return e}}},literal:function e(t,r){return{kind:"schema",type:"literal",reference:e,expects:i(t),async:!1,literal:t,message:r,get"~standard"(){return a(this)},"~run"(e,t){return e.value===this.literal?e.typed=!0:o(this,"type",e,t),e}}},maxValue:function e(t,r){return{kind:"validation",type:"max_value",reference:e,async:!1,expects:`<=${t instanceof Date?t.toJSON():i(t)}`,requirement:t,message:r,"~run"(e,t){return!e.typed||e.value<=this.requirement||o(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():i(e.value)}),e}}},message:function(e,t){return{...e,get"~standard"(){return a(this)},"~run":(r,n)=>e["~run"](r,{...n,message:t})}},minLength:function e(t,r){return{kind:"validation",type:"min_length",reference:e,async:!1,expects:`>=${t}`,requirement:t,message:r,"~run"(e,t){return e.typed&&e.value.length<this.requirement&&o(this,"length",e,t,{received:`${e.value.length}`}),e}}},minValue:function e(t,r){return{kind:"validation",type:"min_value",reference:e,async:!1,expects:`>=${t instanceof Date?t.toJSON():i(t)}`,requirement:t,message:r,"~run"(e,t){return!e.typed||e.value>=this.requirement||o(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():i(e.value)}),e}}},null_:g,number:m,object:b,optional:S,parse:V,partial:function(e,t){const r={};for(const n in e.entries)r[n]=!t||t.includes(n)?S(e.entries[n]):e.entries[n];return{...e,entries:r,get"~standard"(){return a(this)}}},picklist:x,pipe:L,record:P,required:function(e,t,r){const n=Array.isArray(t)?t:void 0,i=Array.isArray(t)?r:t,o={};for(const t in e.entries)o[t]=!n||n.includes(t)?v(e.entries[t],i):e.entries[t];return{...e,entries:o,get"~standard"(){return a(this)}}},safeParse:function(e,t,r){const i=e["~run"]({value:t},n(r));return{typed:i.typed,success:!i.issues,output:i.value,issues:i.issues}},string:A,transform:p,toLowerCase:function e(){return{kind:"transformation",type:"to_lower_case",reference:e,async:!1,"~run":e=>(e.value=e.value.toLowerCase(),e)}},trim:function e(){return{kind:"transformation",type:"trim",reference:e,async:!1,"~run":e=>(e.value=e.value.trim(),e)}},tuple:function e(t,r){return{kind:"schema",type:"tuple",reference:e,expects:"Array",async:!1,items:t,message:r,get"~standard"(){return a(this)},"~run"(e,t){const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){const i=r[n],o=this.items[n]["~run"]({value:i},t);if(o.issues){const a={type:"array",origin:"value",input:r,key:n,value:i};for(const t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else o(this,"type",e,t);return e}}},union:D,unwrap:function(e){return e.wrapped},url:function e(t){return{kind:"validation",type:"url",reference:e,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:t,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&o(this,"URL",e,t),e}}},ValiError:u,value:function e(t,r){return{kind:"validation",type:"value",reference:e,async:!1,expects:t instanceof Date?t.toJSON():i(t),requirement:t,message:r,"~run"(e,t){return!e.typed||this.requirement<=e.value&&this.requirement>=e.value||o(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():i(e.value)}),e}}}},O=b({assignedGroup:x(["control","variant","holdout"]),experimentId:A()}),j={PAYWALL:"paywall",REGWALL:"regwall"},T="always",_="never",B="anonymous",C="registered",$=E.union([E.literal(B),E.literal(C),E.literal("subscribed")]),I=E.picklist([j.REGWALL,j.PAYWALL]),W=E.picklist([T,_]),R={nowall:0,paywall:1,regwall:2},U={always:1,never:0},M={regwall:"b",paywall:"d",finalEnsemble:"z",onDevicePolicy:"v",contentPropensityTier:"q",userPropensityTier:"s"},N=(new Map([[R.nowall,void 0],[R.paywall,j.PAYWALL],[R.regwall,j.REGWALL]]),new Map([[R.nowall,_],[R.paywall,T],[R.regwall,T]]),E.object({wallVisibility:W,wallType:I})),G=E.object(Object.assign(Object.assign({},N.entries),{score:E.number(),threshold:E.pipe(E.number(),E.minValue(0),E.maxValue(1))})),F=E.array(G),z=E.object({wallVisibility:E.literal(T),wallType:I,outcomes:F}),q=E.object({wallVisibility:E.literal(_),outcomes:F}),H=E.union([z,q]),J=E.object({wallType:E.literal(j.REGWALL),wallTypeCode:E.literal(R.regwall),wallVisibility:E.literal(T),wallVisibilityCode:E.literal(U.always)}),Y=E.object({wallType:E.literal(j.PAYWALL),wallTypeCode:E.literal(R.paywall),wallVisibility:E.literal(T),wallVisibilityCode:E.literal(U.always)}),Z=E.object({wallVisibility:E.literal(_),wallVisibilityCode:E.literal(U.never)}),K=E.union([J,Y,Z]),X=E.object({id:E.string(),createdAt:E.string(),trace:E.string(),context:E.string(),inputs:E.string(),outcome:K,searchParams:E.string(),userProperties:E.string(),paywallScore:E.optional(E.pipe(E.number(),E.minValue(0),E.maxValue(100))),contentProperties:E.optional(E.string(),""),experiment:E.union([E.null_(),O])}),Q=E.partial(E.object({id:E.string(),createdAt:E.string(),context:E.string(),trace:E.string(),inputs:E.string(),outcome:E.union([E.partial(J),E.partial(Y),E.partial(Z)]),searchParams:E.string(),userProperties:E.string(),paywallScore:E.optional(E.pipe(E.number(),E.minValue(0),E.maxValue(100))),contentProperties:E.optional(E.string(),""),experiment:E.union([E.null_(),O])})),ee=new class{constructor(){this.key="demeter"}get(){try{const e=sessionStorage.getItem(this.key);return null===e?e:JSON.parse(atob(e))}catch(e){return null}}set(e){try{return sessionStorage.setItem(this.key,btoa(JSON.stringify(e)))}catch(e){}}},te=E.union([E.literal("warn"),E.literal("info"),E.literal("debug")]),re=E.partial(E.object({logLevel:E.optional(te),override:E.optional(Q)}));function ne(e){ee.set(Object.assign(Object.assign({},ee.get()),{logLevel:e}))}const ie=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logLevel=e.logLevel||function(){const e=new URL(window.location.href).searchParams.get("sophi_log_level");return e&&(E.safeParse(te,e).success?ne(e):ae.warn(`Unknown log level found in URL: ${e}`)),e}()||function(){const e=ee.get();if(e)return E.safeParse(te,e.logLevel).success?e.logLevel:null}()||"warn",this.config=this.config.bind(this)}config(e){E.parse(re,e),e.logLevel&&(this.logLevel=e.logLevel,ne(e.logLevel)),e.override&&(this.override=e.override),ae.info("âï¸ Runtime config",JSON.stringify(e,null,2))}},oe={error:0,warn:1,info:2,debug:3},ae=new class{constructor(){this.prefix="QuickStart:"}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(this.prefix,"ð´",...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(this.prefix,"ð ",...t)}info(){if(oe[ie.logLevel]>=oe.info){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(this.prefix,...t)}}debug(){if(oe[ie.logLevel]>=oe.debug){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(this.prefix,"ð§",...t)}}},se=document.currentScript;function le(e){const t=function(){const e=se||document.querySelector("script#sophi-loader");if(!e)return ae.debug("Loader script element not found"),null;const t=e.getAttribute("src");if(!t)return ae.debug("Loader script has no src attribute"),null;try{return new URL(t,document.baseURI).searchParams}catch(e){return ae.debug("Unable to parse loader script src URL",e),null}}();return t?t.get(e):null}var ce=Symbol.for("immer-nothing"),ue=Symbol.for("immer-draftable"),pe=Symbol.for("immer-state");function de(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ye=Object.getPrototypeOf;function fe(e){return!!e&&!!e[pe]}function he(e){return!!e&&(ve(e)||Array.isArray(e)||!!e[ue]||!!e.constructor?.[ue]||xe(e)||Pe(e))}var we=Object.prototype.constructor.toString();function ve(e){if(!e||"object"!=typeof e)return!1;const t=ye(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===we}function ge(e,t){0===me(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function me(e){const t=e[pe];return t?t.type_:Array.isArray(e)?1:xe(e)?2:Pe(e)?3:0}function be(e,t){return 2===me(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Se(e,t,r){const n=me(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function xe(e){return e instanceof Map}function Pe(e){return e instanceof Set}function Ae(e){return e.copy_||e.base_}function ke(e,t){if(xe(e))return new Map(e);if(Pe(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=ve(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[pe];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const i=r[n],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(ye(e),t)}{const t=ye(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function De(e,t=!1){return Le(e)||fe(e)||!he(e)||(me(e)>1&&Object.defineProperties(e,{set:{value:Ve},add:{value:Ve},clear:{value:Ve},delete:{value:Ve}}),Object.freeze(e),t&&Object.values(e).forEach(e=>De(e,!0))),e}function Ve(){de(2)}function Le(e){return Object.isFrozen(e)}var Ee,Oe={};function je(e){const t=Oe[e];return t||de(0),t}function Te(){return Ee}function _e(e,t){t&&(je("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Be(e){Ce(e),e.drafts_.forEach(Ie),e.drafts_=null}function Ce(e){e===Ee&&(Ee=e.parent_)}function $e(e){return Ee={drafts_:[],parent_:Ee,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ie(e){const t=e[pe];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function We(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[pe].modified_&&(Be(t),de(4)),he(e)&&(e=Re(t,e),t.parent_||Me(t,e)),t.patches_&&je("Patches").generateReplacementPatches_(r[pe].base_,e,t.patches_,t.inversePatches_)):e=Re(t,r,[]),Be(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ce?e:void 0}function Re(e,t,r){if(Le(t))return t;const n=t[pe];if(!n)return ge(t,(i,o)=>Ue(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Me(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let i=t,o=!1;3===n.type_&&(i=new Set(t),t.clear(),o=!0),ge(i,(i,a)=>Ue(e,n,t,i,a,r,o)),Me(e,t,!1),r&&e.patches_&&je("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Ue(e,t,r,n,i,o,a){if(fe(i)){const a=Re(e,i,o&&t&&3!==t.type_&&!be(t.assigned_,n)?o.concat(n):void 0);if(Se(r,n,a),!fe(a))return;e.canAutoFreeze_=!1}else a&&r.add(i);if(he(i)&&!Le(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Re(e,i),t&&t.scope_.parent_||"symbol"==typeof n||!(xe(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||Me(e,i)}}function Me(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&De(t,r)}var Ne={get(e,t){if(t===pe)return e;const r=Ae(e);if(!be(r,t))return function(e,t,r){const n=ze(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!he(n)?n:n===Fe(e.base_,t)?(He(e),e.copy_[t]=Je(n,e)):n},has:(e,t)=>t in Ae(e),ownKeys:e=>Reflect.ownKeys(Ae(e)),set(e,t,r){const n=ze(Ae(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Fe(Ae(e),t),a=n?.[pe];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((i=r)===(o=n)?0!==i||1/i==1/o:i!=i&&o!=o)&&(void 0!==r||be(e.base_,t)))return!0;He(e),qe(e)}var i,o;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Fe(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,He(e),qe(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Ae(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){de(11)},getPrototypeOf:e=>ye(e.base_),setPrototypeOf(){de(12)}},Ge={};function Fe(e,t){const r=e[pe];return(r?Ae(r):e)[t]}function ze(e,t){if(!(t in e))return;let r=ye(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=ye(r)}}function qe(e){e.modified_||(e.modified_=!0,e.parent_&&qe(e.parent_))}function He(e){e.copy_||(e.copy_=ke(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Je(e,t){const r=xe(e)?je("MapSet").proxyMap_(e,t):Pe(e)?je("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Te(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=Ne;r&&(i=[n],o=Ge);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return n.draft_=s,n.revoke_=a,s}(e,t);return(t?t.scope_:Te()).drafts_.push(r),r}function Ye(e){if(!he(e)||Le(e))return e;const t=e[pe];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ke(e,t.scope_.immer_.useStrictShallowCopy_)}else r=ke(e,!0);return ge(r,(e,t)=>{Se(r,e,Ye(t))}),t&&(t.finalized_=!1),r}ge(Ne,(e,t)=>{Ge[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ge.deleteProperty=function(e,t){return Ge.set.call(this,e,t,void 0)},Ge.set=function(e,t,r){return Ne.set.call(this,e[0],t,r,e[0])};var Ze=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...i){return n.produce(e,e=>t.call(this,e,...i))}}let n;if("function"!=typeof t&&de(6),void 0!==r&&"function"!=typeof r&&de(7),he(e)){const i=$e(this),o=Je(e,void 0);let a=!0;try{n=t(o),a=!1}finally{a?Be(i):Ce(i)}return _e(i,r),We(n,i)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===ce&&(n=void 0),this.autoFreeze_&&De(n,!0),r){const t=[],i=[];je("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}de(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;return[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;he(e)||de(8),fe(e)&&(fe(t=e)||de(10),e=Ye(t));const r=$e(this),n=Je(e,void 0);return n[pe].isManual_=!0,Ce(r),n}finishDraft(e,t){const r=e&&e[pe];r&&r.isManual_||de(9);const{scope_:n}=r;return _e(n,t),We(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=je("Patches").applyPatches_;return fe(e)?n(e,t):this.produce(e,e=>n(e,t))}},Ke=Ze.produce;const Xe="sophi_analytics",Qe=D([A(),g()]),et=b({campaignName:Qe,referrerDomain:Qe,referrerMedium:Qe,referrerSource:S(Qe,null),referrerChannel:S(Qe,null),queryParams:S(P(A(),A()),{}),timestamp:D([L(A(),p(e=>new Date(e)),h()),g()])}),tt=b({session:et}),rt=b({campaignName:Qe,referrerDomain:Qe,referrerMedium:Qe,referrerSource:S(Qe,null),referrerChannel:S(Qe,null),queryParams:P(A(),A()),timestamp:D([h(),g()])}),nt=b({session:rt});class it{constructor(){this.campaignName=null,this.referrerDomain=null,this.referrerMedium=null,this.referrerSource=null,this.referrerChannel=null,this.queryParams={},this.timestamp=null}}const ot=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],at=x([...ot,"countryCode"]),st=b({userProperties:P(at,D([A(),m(),f()])),visitor:tt}),lt={userProperties:{},visitor:{session:new it}},ct=function(){document.hidden||this.update(()=>ut(this.storage))},ut=function(e){const t=null==e?void 0:e.getItem(Xe);if(t)try{const e=JSON.parse(t);return V(st,e)}catch(e){return lt}return lt};class pt{constructor(e){this.update=e=>{this.state=Ke(this.state,e),this.storage&&this.storage.setItem(Xe,JSON.stringify(this.state))},this.storage=e,this.state=Ke(ut(this.storage),()=>{}),document.addEventListener("visibilitychange",ct.bind(this))}}const dt=[...ot,"content.id","content.age","content.section","content.accessCategory"],yt=E.picklist(dt),ft=E.union([E.string(),E.number(),E.boolean()]),ht=(E.record(yt,ft),{gtmDataLayer:{dataLayerName:"dataLayer",listenToPast:!0}}),wt=E.object({name:E.literal("userProperties"),key:at,path:E.pipe(E.string(),E.minLength(1))}),vt=E.object({name:E.pipe(E.string(),E.minLength(1)),actions:E.array(wt)}),gt=E.object({dataLayerName:E.optional(E.string(),ht.gtmDataLayer.dataLayerName),events:E.array(vt),listenToPast:E.optional(E.boolean(),ht.gtmDataLayer.listenToPast)}),mt=E.object({gtmDataLayer:E.optional(gt)});var bt={724(e,t,r){var n;!function(i,o){var a="function",s="undefined",l="object",c="string",u="model",p="name",d="type",y="vendor",f="version",h="architecture",w="console",v="mobile",g="tablet",m="smarttv",b="wearable",S="embedded",x="Amazon",P="Apple",A="ASUS",k="BlackBerry",D="Browser",V="Chrome",L="Firefox",E="Google",O="Huawei",j="LG",T="Microsoft",_="Motorola",B="Opera",C="Samsung",$="Sharp",I="Sony",W="Xiaomi",R="Zebra",U="Facebook",M=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},N=function(e,t){return typeof e===c&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},F=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,350)},z=function(e,t){for(var r,n,i,s,c,u,p=0;p<t.length&&!c;){var d=t[p],y=t[p+1];for(r=n=0;r<d.length&&!c;)if(c=d[r++].exec(e))for(i=0;i<y.length;i++)u=c[++n],typeof(s=y[i])===l&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):o:this[s[0]]=u?s[1].call(this,u,s[2]):o:4===s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o):this[s]=u||o;p+=2}},q=function(e,t){for(var r in t)if(typeof t[r]===l&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(N(t[r][n],e))return"?"===r?o:r}else if(N(t[r],e))return"?"===r?o:r;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,f],[/opios[\/ ]+([\w\.]+)/i],[f,[p,B+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[p,B]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[p,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+D],f],[/\bfocus\/([\w\.]+)/i],[f,[p,L+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[p,B+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[p,B+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[p,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[f,[p,L]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+D]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+D],f],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,U],f],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[p,V+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,V+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[p,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[f,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[p,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[p,L+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,f],[/(cobalt)\/([\w\.]+)/i],[p,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,G]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[y,C],[d,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[y,C],[d,v]],[/((ipod|iphone)\d+,\d+)/i],[u,[y,P],[d,v]],[/(ipad\d+,\d+)/i],[u,[y,P],[d,g]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[y,P],[d,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[y,P],[d,g]],[/(macintosh);/i],[u,[y,P]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[y,O],[d,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[y,O],[d,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[y,W],[d,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[y,W],[d,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[y,"OPPO"],[d,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[y,"Vivo"],[d,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[y,"Realme"],[d,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[y,_],[d,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[y,_],[d,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[y,j],[d,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[y,j],[d,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[y,"Lenovo"],[d,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[y,"Nokia"],[d,v]],[/(pixel c)\b/i],[u,[y,E],[d,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[y,E],[d,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[y,I],[d,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[y,I],[d,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[y,"OnePlus"],[d,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[y,x],[d,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[y,x],[d,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,y,[d,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[y,k],[d,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[y,A],[d,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[y,A],[d,v]],[/(nexus 9)/i],[u,[y,"HTC"],[d,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[u,/_/g," "],[d,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[y,"Acer"],[d,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[y,"Meizu"],[d,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[y,$],[d,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,u,[d,v]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,u,[d,g]],[/(surface duo)/i],[u,[y,T],[d,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[y,"Fairphone"],[d,v]],[/(u304aa)/i],[u,[y,"AT&T"],[d,v]],[/\bsie-(\w*)/i],[u,[y,"Siemens"],[d,v]],[/\b(rct\w+) b/i],[u,[y,"RCA"],[d,g]],[/\b(venue[\d ]{2,7}) b/i],[u,[y,"Dell"],[d,g]],[/\b(q(?:mv|ta)\w+) b/i],[u,[y,"Verizon"],[d,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[y,"Barnes & Noble"],[d,g]],[/\b(tm\d{3}\w+) b/i],[u,[y,"NuVision"],[d,g]],[/\b(k88) b/i],[u,[y,"ZTE"],[d,g]],[/\b(nx\d{3}j) b/i],[u,[y,"ZTE"],[d,v]],[/\b(gen\d{3}) b.+49h/i],[u,[y,"Swiss"],[d,v]],[/\b(zur\d{3}) b/i],[u,[y,"Swiss"],[d,g]],[/\b((zeki)?tb.*\b) b/i],[u,[y,"Zeki"],[d,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],u,[d,g]],[/\b(ns-?\w{0,9}) b/i],[u,[y,"Insignia"],[d,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[y,"NextBook"],[d,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],u,[d,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],u,[d,v]],[/\b(ph-1) /i],[u,[y,"Essential"],[d,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[y,"Envizen"],[d,g]],[/\b(trio[-\w\. ]+) b/i],[u,[y,"MachSpeed"],[d,g]],[/\btu_(1491) b/i],[u,[y,"Rotor"],[d,g]],[/(shield[\w ]+) b/i],[u,[y,"Nvidia"],[d,g]],[/(sprint) (\w+)/i],[y,u,[d,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[y,T],[d,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[y,R],[d,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[y,R],[d,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,u,[d,w]],[/droid.+; (shield) bui/i],[u,[y,"Nvidia"],[d,w]],[/(playstation [345portablevi]+)/i],[u,[y,I],[d,w]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[y,T],[d,w]],[/smart-tv.+(samsung)/i],[y,[d,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[y,C],[d,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,j],[d,m]],[/(apple) ?tv/i],[y,[u,P+" TV"],[d,m]],[/crkey/i],[[u,V+"cast"],[y,E],[d,m]],[/droid.+aft(\w)( bui|\))/i],[u,[y,x],[d,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[y,$],[d,m]],[/(bravia[\w ]+)( bui|\))/i],[u,[y,I],[d,m]],[/(mitv-\w{5}) bui/i],[u,[y,W],[d,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[y,F],[u,F],[d,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,m]],[/((pebble))app/i],[y,u,[d,b]],[/droid.+; (glass) \d/i],[u,[y,E],[d,b]],[/droid.+; (wt63?0{2,3})\)/i],[u,[y,R],[d,b]],[/(quest( 2)?)/i],[u,[y,U],[d,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[d,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[d,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[p,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[f,q,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[f,q,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,f],[/\(bb(10);/i],[f,[p,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[p,L+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[f,[p,V+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],f],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,f],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,f]]},Y=function(e,t){if(typeof e===l&&(t=e,e=o),!(this instanceof Y))return new Y(e,t).getResult();var r=e||(typeof i!==s&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(J,t):J;return this.getBrowser=function(){var e,t={};return t[p]=o,t[f]=o,z.call(t,r,n.browser),t.major=typeof(e=t.version)===c?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e[h]=o,z.call(e,r,n.cpu),e},this.getDevice=function(){var e={};return e[y]=o,e[u]=o,e[d]=o,z.call(e,r,n.device),e},this.getEngine=function(){var e={};return e[p]=o,e[f]=o,z.call(e,r,n.engine),e},this.getOS=function(){var e={};return e[p]=o,e[f]=o,z.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===c&&e.length>350?F(e,350):e,this},this.setUA(r),this};Y.VERSION="0.7.33",Y.BROWSER=M([p,f,"major"]),Y.CPU=M([h]),Y.DEVICE=M([u,y,d,w,v,m,g,b,S]),Y.ENGINE=Y.OS=M([p,f]),typeof t!==s?(e.exports&&(t=e.exports=Y),t.UAParser=Y):r.amdO?(n=function(){return Y}.call(t,r,t,e))===o||(e.exports=n):typeof i!==s&&(i.UAParser=Y);var Z=typeof i!==s&&(i.jQuery||i.Zepto);if(Z&&!Z.ua){var K=new Y;Z.ua=K.getResult(),Z.ua.get=function(){return K.getUA()},Z.ua.set=function(e){K.setUA(e);var t=K.getResult();for(var r in t)Z.ua[r]=t[r]}}}("object"==typeof window?window:this)}},St={};function xt(e){var t=St[e];if(void 0!==t)return t.exports;var r=St[e]={exports:{}};return bt[e].call(r.exports,r,r.exports,xt),r.exports}xt.amdO={},xt.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return xt.d(t,{a:t}),t},xt.d=(e,t)=>{for(var r in t)xt.o(t,r)&&!xt.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},xt.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Pt={};xt.d(Pt,{Ay:()=>Et,Hi:()=>Vt,Tc:()=>Dt,vV:()=>Lt});var At=xt(724),kt=xt.n(At);const Dt={console:0,mobile:1,tablet:2,smarttv:3,wearable:4,other:5},Vt=["type","os","viewer"],Lt=function(e){try{const t=kt()(e);return{viewer:void 0===t?.browser?.name?"":t.browser.name,type:void 0===t?.device?.type?"":t.device.type,os:void 0===t?.os?.name?"":t.os.name}}catch(e){return{viewer:"",type:"",os:""}}},Et=Lt,Ot=Pt.Tc,jt=Pt.Ay,Tt=Pt.Hi,_t={isEnabled:!0,name:"sophi_demeter",maxAge:31536e3,includeOutcome:!1},Bt={isEnabled:!1},Ct=2e3,$t="https://paywall.sophi.io",It={maxLength:12},Wt=!0,Rt={enabled:!1,key:"demeter_tracing"},Ut={visitorType:!1,contentPropensityLevel:!1},Mt=E.union([E.pipe(E.string(),E.check(e=>{try{return new URL("http://"+e).hostname===e}catch(e){return!1}}))]),Nt=E.pipe(E.string(),E.check(e=>{try{return new RegExp(e),!0}catch(e){return!1}},"Invalid regex pattern")),Gt=E.object({isEnabled:E.literal(!0),name:E.optional(E.string(),_t.name),maxAge:E.optional(E.number(),_t.maxAge),includeOutcome:E.optional(E.boolean(),_t.includeOutcome)}),Ft=E.object({isEnabled:E.literal(!1)}),zt=E.optional(E.union([Gt,Ft]),Bt),qt=E.object({type:E.union([E.literal("client"),E.literal("server")])}),Ht=E.object({isDeviceAndLocationDataAllowed:E.literal(!0),isUserBehaviorDataAllowed:E.literal(!0)}),Jt=E.object({isDeviceAndLocationDataAllowed:E.literal(!1),isUserBehaviorDataAllowed:E.literal(!1)}),Yt=E.optional(E.object({off:E.union([Jt,Ht]),on:Ht}),{off:{isDeviceAndLocationDataAllowed:!1,isUserBehaviorDataAllowed:!1},on:{isDeviceAndLocationDataAllowed:!0,isUserBehaviorDataAllowed:!0}}),Zt=E.object({name:E.union([E.literal("contains"),E.literal("regex"),E.literal("toBoolean"),E.literal("toNumber")]),args:E.optional(E.record(E.string(),E.any()))}),Kt=E.union([E.array(Zt)]),Xt=E.object({source:E.pipe(E.string(),E.toLowerCase(),E.literal("url")),expression:Nt}),Qt=E.object({source:E.pipe(E.string(),E.toLowerCase(),E.literal("dom")),selector:E.string(),attribute:E.string(),expression:E.optional(Nt)}),er=E.object({source:E.pipe(E.string(),E.toLowerCase(),E.literal("window")),path:E.pipe(E.string(),E.minLength(1)),expression:E.optional(Nt)}),tr=E.union([Xt,Qt,er]),rr=E.object({name:E.union([E.literal("daysSince"),E.literal("toBoolean"),E.literal("map")]),args:E.optional(E.record(E.string(),E.any()))}),nr=E.object({name:E.pipe(E.string(),E.trim(),E.minLength(1)),handler:E.optional(rr),type:E.union([E.literal("string"),E.literal("number"),E.literal("boolean"),E.literal("list")]),tracked:E.optional(E.boolean())}),ir=E.intersect([tr,nr,E.object({key:yt})]),or=E.array(ir),ar=E.picklist(Tt),sr=E.picklist(["timeZone","referrer"]),lr=E.object({source:E.literal("device"),key:ar}),cr=E.object({source:E.literal("contentProperties"),key:yt}),ur=E.object({source:E.literal("userProperties"),key:at}),pr=E.object({source:E.literal("visit"),key:sr}),dr=E.union([lr,cr,ur,pr]),yr=E.object({host:E.pipe(E.string(),E.minLength(1)),url:E.optional(E.string(),$t),timeout:E.optional(E.pipe(E.number(),E.check(e=>e>0)),Ct),dataMap:E.pipe(E.record(E.string(),dr),E.check(e=>{const t=e["content.id"];return!!t&&"contentProperties"===t.source&&"content.id"===t.key},'dataMap must include "content.id" with source "contentProperties" and key "content.id"'))}),fr=E.object({selector:E.string()}),hr=E.object({event:E.string()}),wr=E.union([fr,hr]),vr=E.object({key:at,name:E.string(),type:E.literal("number"),tracked:E.optional(E.boolean(),Wt),handlers:E.optional(Kt)}),gr=E.object({key:at,name:E.string(),type:E.literal("string"),minLength:E.optional(E.number()),maxLength:E.optional(E.number(),It.maxLength),tracked:E.optional(E.boolean(),Wt),handlers:E.optional(Kt)}),mr=E.object({key:at,name:E.string(),type:E.literal("boolean"),tracked:E.optional(E.boolean(),Wt),handlers:E.optional(Kt)}),br=E.union([E.literal("string"),E.literal("number"),E.literal("boolean")]),Sr=E.union([E.literal("visitorType"),at]),xr=E.object({key:Sr,name:E.string(),type:br,minLength:E.optional(E.number()),maxLength:E.optional(E.number(),It.maxLength),tracked:E.optional(E.boolean(),Wt),handlers:E.optional(Kt)}),Pr=E.intersect([xr,E.object({source:E.pipe(E.string(),E.toLowerCase(),E.literal("window")),path:E.pipe(E.string(),E.minLength(1)),expression:E.optional(Nt)})]),Ar=E.intersect([xr,E.object({source:E.pipe(E.string(),E.toLowerCase(),E.literal("dom")),selector:E.string(),attribute:E.string(),expression:E.optional(Nt)})]),kr=E.intersect([xr,E.object({source:E.pipe(E.string(),E.toLowerCase(),E.literal("url")),expression:Nt})]),Dr=E.union([Pr,Ar,kr,vr,gr,mr]),Vr=E.array(Dr),Lr=E.optional(E.boolean(),!0),Er=E.optional(E.object({enabled:E.optional(E.boolean(),Rt.enabled),key:E.optional(E.string(),Rt.key)}),Rt),Or=E.optional(E.object({contentPropensityLevel:E.optional(E.union([E.literal(!1),Qt]),Ut.contentPropensityLevel),visitorType:E.optional(E.union([E.literal(!1),Qt]),Ut.visitorType)}),Ut),jr=E.pipe(E.string(),E.trim(),E.minLength(1)),Tr=E.object({hostname:Mt,subMarket:E.optional(E.string()),enableExperiment:E.optional(E.boolean()),cookie:zt,subdomains:E.optional(E.array(E.string()),[]),mode:Yt,paywallApi:E.optional(yr),spa:E.optional(wr),userProperties:E.optional(Vr),contentProperties:E.optional(or),generatePageviewOnWallHit:Lr,wallGeneration:E.optional(qt,{type:"client"}),addTracingToLocalStorage:Er,enableWallIndicators:E.optional(E.boolean(),!1),newsletterCampaigns:E.optional(E.array(E.string()),[]),metaValues:Or,showPaywallScore:E.optional(E.boolean(),!1),policy:E.optional(E.object({evaluator:jr,thresholds:jr})),extensions:E.optional(mt),tenant:E.string()}),_r=E.pipe(E.custom(e=>!e||"object"!=typeof e||!("analytics"in e)||"custom"===e.analytics,"Unsupported analytics module"),E.custom(e=>{if(e&&"object"==typeof e&&"contentProperties"in e){if("enableWallIndicators"in e&&e.enableWallIndicators)return!1;if("wallGeneration"in e&&"object"==typeof e.wallGeneration&&null!==e.wallGeneration&&"type"in e.wallGeneration&&"server"===e.wallGeneration.type)return!1}return!0},"Content properties cannot be used with server-side wall generation or wall indicators")),Br=E.pipe(Tr,_r),Cr=JSON.parse('{"hostname":"reuters.com","subdomains":[],"model":"web-reuters","analytics":"custom","enableExperiment":true,"mode":{"off":{"isDeviceAndLocationDataAllowed":false,"isUserBehaviorDataAllowed":false},"on":{"isDeviceAndLocationDataAllowed":true,"isUserBehaviorDataAllowed":true}},"generatePageviewOnWallHit":false,"paywallApi":{"url":"https://paywall.sophi.io","host":"www.reuters.com","timeout":2500,"dataMap":{"content.id":{"source":"contentProperties","key":"content.id"},"visitor.device.type":{"source":"device","key":"type"},"userProperties.countryCode":{"source":"userProperties","key":"countryCode"}}},"tenant":"reuters","userProperties":[{"key":"countryCode","name":"countryCode","type":"string"},{"key":"1","name":"countryCode","type":"string"}],"contentProperties":[{"key":"content.id","source":"dom","selector":"meta[name=\'sophi-content-id\']","attribute":"content","name":"Content ID","type":"string","tracked":false}]}');var $r,Ir,Wr,Rr,Ur,Mr,Nr=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Gr=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Fr{constructor(e){Ir.add(this),Wr.set(this,void 0),Rr.set(this,void 0),Ur.set(this,"isConsented"),this.consentParameterValue=null,Nr(this,Wr,e.off,"f"),Nr(this,Rr,e.on,"f"),this.isDeviceAndLocationDataAllowed=Gr(this,Wr,"f").isDeviceAndLocationDataAllowed,this.isUserBehaviorDataAllowed=Gr(this,Wr,"f").isUserBehaviorDataAllowed,Gr(this,Ir,"m",Mr).call(this)}getDefaultConsentValue(){return!0===Gr(this,Wr,"f").isDeviceAndLocationDataAllowed&&!0===Gr(this,Wr,"f").isUserBehaviorDataAllowed?"on":"off"}on(){this.isDeviceAndLocationDataAllowed=Gr(this,Rr,"f").isDeviceAndLocationDataAllowed,this.isUserBehaviorDataAllowed=Gr(this,Rr,"f").isUserBehaviorDataAllowed}off(){this.isDeviceAndLocationDataAllowed=!1,this.isUserBehaviorDataAllowed=!1}}function zr(e){return e?"selector"in e?`yes\n      Â· observed DOM element: ${e.selector}`:`yes\n      Â· listening for event: ${e.event}`:"no"}function qr(e){return!1===e?"disabled":Hr(e)}function Hr(e){return`enabled\n      Â· selector: ${e.selector}\n      Â· attribute: ${e.attribute}`}function Jr(e){return e&&0!==e.length?e.map(e=>`${e.key} - ${e.name}`).join(", "):"none"}Wr=new WeakMap,Rr=new WeakMap,Ur=new WeakMap,Ir=new WeakSet,Mr=function(){const e=le(Gr(this,Ur,"f"));"true"===e?(this.on(),this.consentParameterValue=!0):"false"===e&&(this.off(),this.consentParameterValue=!1)};const Yr=(an=null!==($r=(()=>{const e=sessionStorage.getItem("sophi_demeter_config");if(null!==e)try{return JSON.parse(e)}catch(e){return null}})())&&void 0!==$r?$r:Cr,E.parse(Br,an)),Zr=new class{constructor(e){this.hostname=e.hostname,this.subMarket=e.subMarket,this.enableExperiment=e.enableExperiment,this.cookie=e.cookie,this.subdomains=e.subdomains,this.mode=new Fr(e.mode),this.paywallApi=e.paywallApi,this.spa=e.spa,this.userProperties=e.userProperties,this.contentProperties=e.contentProperties,this.generatePageviewOnWallHit=e.generatePageviewOnWallHit,this.wallGeneration=e.wallGeneration,this.addTracingToLocalStorage=e.addTracingToLocalStorage,this.enableWallIndicators=e.enableWallIndicators,this.newsletterCampaigns=e.newsletterCampaigns,this.metaValues=e.metaValues,this.showPaywallScore=e.showPaywallScore,ae.info(function(e){var t,r,n;let i=`âï¸ Bundle settings\n    Â· Host: ${e.hostname}\n    Â· Subdomains: ${(null===(t=e.subdomains)||void 0===t?void 0:t.join(", "))||"none"}\n    Â· Wall type: ${e.wallGeneration.type} side`;var o;return i="debug"===ie.logLevel?`${i}\n    Â· Experiments: ${e.enableExperiment?"enabled":"disabled"}\n    Â· Cookie: ${(null===(r=e.cookie)||void 0===r?void 0:r.isEnabled)?"enabled":"disabled"}\n    Â· Paywall API: ${e.paywallApi?"enabled":"disabled"}\n    Â· Default consent: ${e.mode.getDefaultConsentValue()}\n    Â· Single Page Application: ${zr(e.spa)}\n    Â· Wallhits generate pageviews: ${e.generatePageviewOnWallHit?"yes":"no"}\n    Â· Wall indicators: ${e.enableWallIndicators?"enabled":"disabled"}\n    Â· Visitor type detection: ${qr(e.metaValues.visitorType)}\n    Â· Content propensity level detection: ${qr(e.metaValues.contentPropensityLevel)}\n    Â· User properties: ${Jr(e.userProperties)}\n    Â· Content properties: ${Jr(e.contentProperties)}`:`${i}\n    ${o=[e.enableExperiment&&{label:"Experiments",value:"enabled"},(null===(n=e.cookie)||void 0===n?void 0:n.isEnabled)&&{label:"Cookie",value:"enabled"},e.paywallApi&&{label:"Paywall API",value:"enabled"},e.mode.getDefaultConsentValue()&&{label:"Default consent",value:e.mode.getDefaultConsentValue()},{label:"Single Page Application",value:zr(e.spa)},e.generatePageviewOnWallHit&&{label:"Wallhits generate pageviews",value:"yes"},e.enableWallIndicators&&{label:"Wall indicators",value:"enabled"},e.metaValues.visitorType&&{label:"Visitor type detection",value:Hr(e.metaValues.visitorType)},e.metaValues.contentPropensityLevel&&{label:"Content propensity level detection",value:qr(e.metaValues.contentPropensityLevel)}],o.filter(e=>Boolean(e)).map(e=>`Â· ${e.label}: ${e.value}\n    `).join("")}`,i}(this))}}(Yr),Kr=Zr,Xr=function(e){var t,r;let n=null;if(Kr.enableExperiment&&(null===(t=window.sophi)||void 0===t?void 0:t.abTests)&&!0===Kr.mode.isDeviceAndLocationDataAllowed&&!0===Kr.mode.isUserBehaviorDataAllowed){const t=null===(r=window.sophi)||void 0===r?void 0:r.abTests.getAllExperimentsSync(e);t.length>0&&(n=t[0])}return n},Qr=()=>Xr("external"),en=()=>Xr("internal"),tn=(Qr(),en(),"sophiDataLayerReady"),rn={trace:"",context:"",inputs:"",decisionSource:"",experimentsCode:null,assignedGroup:null,userProperties:"",contentProperties:""},nn=()=>{window.sophi.dataLayer=Object.assign({},rn)},on=()=>window.sophi.dataLayer;var an;function sn(e){window.sophi.dataLayer=Object.assign(Object.assign({},window.sophi.dataLayer),function(e){const t={};var r;return"context"in e&&(t.context=e.context),"inputs"in e&&(t.inputs=e.inputs),"trace"in e&&(t.trace=e.trace),"userProperties"in e&&(t.userProperties=e.userProperties),"contentProperties"in e&&(t.contentProperties=e.contentProperties),"experiment"in e&&e.experiment&&(t.experimentsCode=null===(r=e.experiment)?null:`${r.experimentId}=${r.assignedGroup}`,t.assignedGroup=e.experiment.assignedGroup),t}(e))}const ln=function(){window.dispatchEvent(new Event(tn))};var cn;!function(e){e.GetDecision="GetDecision",e.GetDecisionForArticleWallIndicators="GetDecisionForArticleWallIndicators",e.Init="Init",e.Pageview="pageview",e.Wall="wall",e.EnableAllFeatures="EnableAllFeatures",e.UserProperties="UserProperties",e.ContentProperties="ContentProperties"}(cn||(cn={}));const un=E.union([E.null_(),E.pipe(E.string(),E.trim(),E.toLowerCase())]),pn=E.object({article:E.boolean(),section:E.optional(un)}),dn=E.union([E.union([E.pipe(E.string(),E.trim(),E.literal("paywall")),E.pipe(E.string(),E.trim(),E.literal("regwall"))]),E.object({wallType:E.union([E.pipe(E.string(),E.trim(),E.literal("paywall")),E.pipe(E.string(),E.trim(),E.literal("regwall"))]),section:E.optional(un)})]),yn=E.union([E.object({type:E.literal(cn.Pageview),payload:pn}),E.object({type:E.literal(cn.Wall),payload:dn}),E.object({type:E.literal(cn.UserProperties),payload:E.any()})]);E.union([yn,E.object({type:E.literal(cn.GetDecision)}),E.object({type:E.literal(cn.Init)}),E.object({type:E.literal(cn.EnableAllFeatures)})]),r(6211);const fn=(e,t,r)=>{const n=document.querySelector(e);if(null===n)return null;const i=n.getAttribute(t);return null===i?null:r?gn(i,r):i},hn=e=>"__proto__"!==e&&"constructor"!==e&&"prototype"!==e,wn=e=>{try{const t=e.split(".");if(t.length>10)return ae.warn(`Window path exceeds maximum depth of 10: "${e}" (depth: ${t.length})`),null;let r=window;for(const n of t){if(null==r)return null;if(!hn(n))return ae.warn(`Unsafe path segment detected: "${n}" in path "${e}"`),null;r=r[n]}return void 0===r?null:r}catch(t){return ae.warn(`Error extracting window path "${e}":`,t),null}},vn=(e,t,r,n)=>{const i=null==r?void 0:r.minLength,o=null==r?void 0:r.maxLength;return"number"==typeof i&&t.length<i?(ae.warn(`${n} ${e} expected to have a minimum length of ${i} but got '${t}' with length ${t.length}, omitting.`),{isValid:!1,processedValue:t}):"number"==typeof o&&t.length>o?(ae.warn(`${n} ${e} expected to have maximum length of ${o} but got '${t}' with length ${t.length}, truncating.`),{isValid:!0,processedValue:t.slice(0,o)}):{isValid:!0,processedValue:t}},gn=(e,t)=>{var r;try{const n=new RegExp(t),i=e.match(n);if(null===i)return null;const o=null!==(r=i[1])&&void 0!==r?r:i[0];return void 0===i[1]&&i[0]&&ae.debug(`No capture group value, using full match: "${o}".`),o}catch(e){return ae.warn(`Regex error "${t}":`,e),null}},mn=e=>null==e?null:String(e).toLowerCase();function bn(e){const t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r=new Date,n=Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate())-t,i=Math.floor(n/864e5);return i<0?0:i}const Sn={xhigh:5,high:4,medium:3,low:2,xlow:1,null:null},xn=(Array.from(Object.keys(Sn)),Array.from(Object.values(Sn))),Pn=(E.union([...xn.filter(e=>null!==e).map(e=>E.literal(e)),E.null_()]),xn.filter(e=>null!==e).reverse()),An=`Unknown content propensity level. Expected one of: ${Pn.join(", ")}.`,kn=E.pipe(E.union([E.string(),E.number()]),E.transform(Number),E.number(),E.picklist(Pn));function Dn(e){const t=e.find(e=>e.wallType===j.PAYWALL),r={[j.PAYWALL]:null==t?void 0:t.score},n=e.find(e=>e.wallType===j.REGWALL);return void 0!==n&&(r[j.REGWALL]=n.score),r}r(9655);const Vn={0:"free access",1:"subscribers only",2:"metered views",3:"special package"},Ln=e=>{try{if("dom"===e.source)return fn(e.selector,e.attribute,e.expression);if("url"===e.source){const t=new URL(location.href);return gn(t.pathname,e.expression)}return null}catch(e){return null}};r(5568);const En=(e,t)=>Boolean(e),On=(e,t)=>{const r=t.args;return"contains"===t.name&&r?((e,t)=>{if(!t||!Array.isArray(e))return null;const{value:r,caseSensitive:n=!0}=t;return(Array.isArray(r)?r:[r]).some(t=>n?e.includes(String(t)):e.some(e=>e.toLowerCase()===String(t).toLowerCase()))})(e,r):"regex"===t.name&&r?((e,t)=>{let{patterns:r}=t;if(!r||!Array.isArray(r))return null;const n="string"==typeof e?e:String(null!=e?e:""),i=r;for(const e of i){const t=gn(n,e);if(t)return t}return null})(e,r):"toBoolean"===t.name?En(e):"toNumber"===t.name?(e=>{if(null==e)return null;const t=Number(e);return Number.isNaN(t)?null:t})(e):null},jn=(e,t)=>{var r;let n=e;if(null==n||!t)return null;for(const e of t)n=On(n,e);return null!==(r=n)&&void 0!==r?r:null},Tn={values:null,analyticsString:null};function _n(e){return null===Tn.values&&Bn(e),Tn.values}function Bn(e){let t={values:{},analyticsString:""};try{t=Nn(e)}catch(e){ae.error("Error computing content properties:",e)}Tn.values=t.values,Tn.analyticsString=t.analyticsString}function Cn(e,t){if(null==e)return null;if(!t)return e;switch(t.name){case"daysSince":{const r=function(e,t){try{const r=((null==t?void 0:t.dateFormat)||"iso").toLowerCase();let n=null;return n="iso"===r||"iso8601"===r?new Date(e):"unixSeconds"===r?new Date(1e3*parseInt(e,10)):"unixMillis"===r?new Date(parseInt(e,10)):new Date(e),!n||isNaN(n.getTime())?null:bn(n)}catch(e){return null}}(e,t.args);return null===r?null:r}case"toBoolean":return En(e);case"lowercase":return mn(e);case"map":return function(e,t){return t&&"object"==typeof t&&e in t?t[e]:e}(e,t.args);default:return e}}function $n(e,t,r){let n=r;if("boolean"===t.type&&"dom"===t.source)n=null!==document.querySelector(t.selector);else if("number"===t.type&&"string"==typeof r&&"content.ages"!==e){const e=Number(r.trim());n=isNaN(e)?null:e}else"list"===t.type&&null!==r&&(n=(i=r,i.split(",").map(e=>{var t;return null===(t=mn(e))||void 0===t?void 0:t.replace(/,/g,"").trim()}).filter(Boolean)).join(" ")),t.handler&&(n=Cn("string"==typeof n?n:String(n),t.handler));var i;return n}function In(e,t,r){var n;if("content.accessCategory"===e){const e=Cn(t,{name:"map",args:null===(n=r.handler)||void 0===n?void 0:n.args});return Number(e)in Vn?Vn[e]:null}return"content.age"===e&&"string"==typeof t?Cn(t,{name:"daysSince"}):t}function Wn(e,t,r){return"string"===r.type&&"string"==typeof t?vn(e,t,r,"Content property"):{isValid:!0,processedValue:t}}function Rn(e){return null==e||""===e}const Un={"content.age":"A","content.section":"B","content.accessCategory":"C"},Mn=e=>Un[e]||e,Nn=e=>{const t=e.contentProperties||[],r={},n=[],i=[],o=[];for(const e of t){const t=e.key,a=Ln(e);let s=null;if(s=t in Un?In(t,a,e):$n(t,e,a),Rn(s)){i.push(e.name);continue}const{isValid:l,processedValue:c}=Wn(t,s,e);l&&(s=c,r[t]=s,o.push({label:e.name||t,value:s}),e.tracked&&n.push(`${Mn(t)}:${s}`))}return t.length>0&&function(e,t){e.length>0&&ae.warn(`Some configured content properties were not found on this page: ${e.join(", ")}. Note: This is expected on homepages or section pages without article content.`);const r=t.map(e=>"Content Age"===e.label&&"number"==typeof e.value?`    Â· ${e.label}: ${e.value} days`:"string"==typeof e.value?`    Â· ${e.label}: "${e.value}"`:`    Â· ${e.label}: ${JSON.stringify(e.value)}`);ae.info("Content Properties Found\n\n"+r.join("\n"))}(i,o),{values:r,analyticsString:n.join(",")}};function Gn(e){return Object.entries(e)}const Fn=new class{constructor(){this.key="demeter"}get(){try{const e=localStorage.getItem(this.key);return null===e?e:JSON.parse(atob(e))}catch(e){return null}}set(e){try{return localStorage.setItem(this.key,btoa(JSON.stringify(e)))}catch(e){}}clear(){try{return localStorage.removeItem(this.key)}catch(e){}}};var zn,qn,Hn,Jn,Yn=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},Zn=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};const Kn=E.array(E.string()),Xn=E.object({pageViews:E.number(),pageViewsByArticle:E.number(),pageViewsByArticleWithPaywall:E.number(),pageViewsByArticleWithRegwall:E.number(),topLevelSections:Kn,topLevelSectionsByArticle:Kn}),Qn=E.object({granted:E.boolean(),timestamp:E.string()});function ei(){return(new Date).toISOString()}class ti{constructor(){this.pageViews=0,this.pageViewsByArticle=0,this.pageViewsByArticleWithPaywall=0,this.pageViewsByArticleWithRegwall=0,this.topLevelSections=[],this.topLevelSectionsByArticle=[]}}const ri=E.optional(E.array(yn),[]),ni=E.object({previous:E.partial(X),events:ri}),ii=E.object({previous:E.optional(X),events:ri,outcomes:E.optional(E.array(G),[])}),oi=E.pipe(E.any(),E.transform(e=>{const t=E.safeParse(ii,e);if(t.success)return t.output;const r=E.safeParse(ni,e);return r.success?{events:r.output.events,previous:r.output.previous,outcomes:[]}:{events:[],previous:void 0,outcomes:[]}})),ai=E.object({today:Xn,history:E.array(Xn),lastSeen:E.string(),visitor:$,coldDataLayer:oi,consent:E.optional(Qn)}),si=E.tuple([E.number(),E.number(),E.number(),E.number(),Kn,Kn]),li=E.object({lS:E.string(),v:$,t:si,h:E.array(si),cDL:oi,c:E.optional(E.tuple([E.boolean(),E.string()]))}),ci=e=>[e.pageViews,e.pageViewsByArticle,e.pageViewsByArticleWithPaywall,e.pageViewsByArticleWithRegwall,e.topLevelSections,e.topLevelSectionsByArticle],ui=e=>({pageViews:e[0],pageViewsByArticle:e[1],pageViewsByArticleWithPaywall:e[2],pageViewsByArticleWithRegwall:e[3],topLevelSections:e[4],topLevelSectionsByArticle:e[5]});class pi{constructor(){this.today={pageViews:0,pageViewsByArticle:0,pageViewsByArticleWithPaywall:0,pageViewsByArticleWithRegwall:0,topLevelSections:[],topLevelSectionsByArticle:[]},this.history=Array(28).fill(void 0).map(()=>new ti),this.lastSeen="",this.visitor="anonymous",this.coldDataLayer={previous:void 0,events:[],outcomes:[]},this.consent=void 0}}qn=new WeakMap,zn=new WeakSet,Hn=function(e){try{const t=E.safeParse(li,e);return t.success?(e=>{const{lS:t,v:r,t:n,h:i,cDL:o,c:a}=e,s=i.map(ui);return{lastSeen:t,visitor:r,today:ui(n),history:s,coldDataLayer:o,consent:a?{granted:a[0],timestamp:a[1]}:void 0}})(t.output):E.parse(ai,e)}catch(e){return new pi}},Jn=function(e){if(!1===Kr.mode.isUserBehaviorDataAllowed)return e;const t=new Date(e.lastSeen),r=Math.max(0,bn(t));if(r>0){e.history.unshift(e.today);for(let t=0;t<r-1;t++)e.history.unshift((new pi).today);e.history=e.history.slice(0,28),e.today=(new pi).today}return e.lastSeen=ei(),e};const di=new class{constructor(){zn.add(this),qn.set(this,void 0);const e=Fn.get();Zn(this,qn,Yn(this,zn,"m",Jn).call(this,Yn(this,zn,"m",Hn).call(this,e)),"f")}getFromStored(){this.updateState(Yn(this,zn,"m",Hn).call(this,Fn.get()))}updateState(e){Zn(this,qn,Yn(this,zn,"m",Jn).call(this,e),"f"),Fn.set((e=>{const{today:t,history:r,lastSeen:n,visitor:i,coldDataLayer:o,consent:a}=e,s=r.map(ci);return{lS:n,v:i,t:ci(t),h:s,cDL:o,c:a?[a.granted,a.timestamp]:void 0}})(e))}getState(){return JSON.parse(JSON.stringify(Yn(this,qn,"f")))}clear(){Fn.clear(),Zn(this,qn,Yn(this,zn,"m",Jn).call(this,Yn(this,zn,"m",Hn).call(this,null)),"f")}getConsent(){return Yn(this,qn,"f").consent}setConsent(e){const t=this.getState();t.consent={granted:e,timestamp:ei()},this.updateState(t)}},yi=(e,t)=>{if(null==e)return null;try{switch(t){case"string":{const t=String(e);return""===t.trim()?null:t}case"number":{const t=Number(e);return isNaN(t)?null:t}case"boolean":if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1}return Boolean(e);default:return null}}catch(e){return null}},fi=e=>{const t=E.safeParse($,e);return t.success?{isValid:!0,value:t.output}:(ae.warn(`visitorType should be '${B}' or '${C}', got '${e}'.`),{isValid:!1,value:null})},hi={countryCode:"A"},wi=[{key:"visitorType",name:"Visitor type",type:"string"}],vi=(e,t,r)=>"minLength"in r&&void 0!==r.minLength&&t.length<r.minLength?(ae.warn(`User property ${e} expected to have a minimum length of ${r.minLength} but got '${t}' with length ${t.length}, omitting.`),{isValid:!1,processedValue:t}):"maxLength"in r&&void 0!==r.maxLength&&t.length>r.maxLength?(ae.warn(`User property ${e} expected to have maximum length of ${r.maxLength} but got '${t}' with length ${t.length}, truncating.`),{isValid:!0,processedValue:t.slice(0,r.maxLength)}):{isValid:!0,processedValue:t},gi=(e,t)=>{if(!0!==e.mode.isDeviceAndLocationDataAllowed||!0!==e.mode.isUserBehaviorDataAllowed)return void ae.debug("Discarding userProperties event");const{custom:r,reserved:n}=((e,t)=>{const r={},n={};if("object"!=typeof t||null===t)return ae.warn("User properties must be in an 'args' object. Received:",t),{custom:r,reserved:n};const i=(e=>{const t=new Map;for(const e of wi)t.set(e.key,e);for(const r of e)t.set(r.key,r);return t})(e.userProperties||[]);for(const e of Gn(t)){let[t,o]=e;const a=i.get(t);if(a){if("handlers"in a&&a.handlers){const e=jn(o,a.handlers);if(void 0===e){ae.debug(`User property ${t} handler returned undefined, omitting.`);continue}o=e}if(typeof o===a.type){if("string"==typeof o){const{isValid:e,processedValue:r}=vi(t,o,a);if(!e)continue;o=r}if("visitorType"===a.key){const{isValid:e,value:t}=fi(o);if(!e)continue;n[a.key]=t;continue}r[a.key]=o}else ae.warn(`User property ${t} expected to be a ${a.type} but got ${typeof o}, omitting.`)}else ae.warn(`User property ${t} is not configured, omitting.`)}return{custom:r,reserved:n}})(e,t);if(Object.keys(r).length>0&&ae.debug("Setting user properties",r),Object.keys(n).length>0&&ae.debug("Setting reserved properties",n),Object.keys(r).length>0&&xa.update(e=>{Object.assign(e.userProperties,r)}),n.visitorType){const e=di.getState(),t=n.visitorType;di.updateState(Object.assign(Object.assign({},e),{visitor:t}))}},mi=e=>{if(!e.userProperties||0===e.userProperties.length)return;(e=>{var t;const r=le("userProperties.countryCode");r&&(null!==(t=e.userProperties)&&void 0!==t?t:[]).some(e=>"countryCode"===e.key)&&gi(e,{countryCode:r})})(e);const t=e.userProperties.filter(e=>"source"in e&&"window"===e.source);if(0===t.length)return;const r=(e=>{const t={},r=[];for(const n of e){const{key:e,path:i,name:o,type:a,handlers:s}=n,l=wn(i);if(null===l){r.push(o);continue}if("visitorType"===e){const{isValid:n,value:i}=fi(l);if(!n||!i){r.push(o);continue}t[e]=i;continue}const c=s?l:yi(l,a);if(null!==c)if("string"==typeof c){const{isValid:i,processedValue:a}=vn(e,c,n,"User property");if(!i){r.push(o);continue}t[e]=a}else t[e]=c;else ae.warn(`User property "${o}" could not be converted to type "${a}". Value: "${l}"`),r.push(o)}return r.length>0&&ae.warn(`Some configured user properties were not found in window variables: ${r.join(", ")}`),t})(t);Object.keys(r).length>0&&(ae.debug("Initializing user properties from window",r),gi(e,r))},bi=gi,Si=["utm_campaign","utm_medium","utm_source"],xi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;try{const t=new URL(e),r={};return Si.forEach(e=>{const n=t.searchParams.get(e);null!==n&&(r[e]=n.toLowerCase())}),r}catch(e){return ae.error("Unable to extract query parameters.",e),{}}};var Pi={d:(e,t)=>{for(var r in t)Pi.o(t,r)&&!Pi.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},Ai={};Pi.d(Ai,{Ay:()=>Oi,Fo:()=>Vi,LU:()=>Ei,Tk:()=>Di,VS:()=>ki,cr:()=>Li});const ki={campaign:0,direct:1,internal:2,search:3,social:4,other:5},Di={google:0,yahoo:1,duckduckgo:2,bing:3,facebook:4,instagram:5,x:6,linkedin:7,reddit:8,newsletter:9},Vi={search:0,news:1,discover:2},Li=function(e,t,r,n){return Ei(e,t,r,n)?.medium},Ei=function(e,t,r,n,i){if("string"!=typeof e)throw new Error("locationHref should be a string");if("string"!=typeof t)throw new Error("documentReferrer should be a string");if("string"!=typeof r)throw new Error("locationHost should be a string");const o=t.toLowerCase().trim(),a=e.toLowerCase().trim(),s=r.toLowerCase().trim();let l;try{l=new URLSearchParams(new URL(a).search).get("utm_campaign")}catch{l=null}if(l){const e=i?.newsletterCampaigns;return{medium:"campaign",source:e?.includes(l)?"newsletter":void 0}}if(!o)return{medium:"direct"};const c=o.match(/^(?:.+:\/\/)?([^/]+)/i),u=c?c[1].replace(/^www\./i,""):"",p=s.replace(/^www\./i,"");if(u===p||u.endsWith(`.${p}`)&&u.length>p.length+1)return{medium:"internal"};if(/^[^\s.][^\s]*\.google\.android\.googlequicksearchbox\b/i.test(u))return{medium:"search",source:"google",channel:"discover"};if("string"==typeof n&&t.includes("google.com")&&n.includes("Safari")&&(n.includes("GSA")||n.includes("GNews"))&&(n.includes("604.1")||n.includes("605.1.15")))return{medium:"search",source:"google",channel:"discover"};if("news.google.com"===u)return{medium:"search",source:"google",channel:"news"};const d=[{source:"google",channel:"search"},{source:"yahoo"},{source:"duckduckgo"},{source:"bing"}],y=e=>{if(e.domains){const t=e.domains.map(e=>`(^|\\.)${e.replace(".","\\.")}$`).join("|");return new RegExp(t,"i")}return new RegExp(String.raw`(^|.*\.)${e.source}\.(?:[a-z]{2,63}|[a-z]{2,63}\.[a-z]{2})$`,"i")};for(const e of d)if(y(e).test(u))return"google"===e.source?{medium:"search",source:e.source,channel:e.channel}:{medium:"search",source:e.source};const f=[{source:"facebook"},{source:"instagram"},{source:"x",domains:["x.com","t.co"]},{source:"linkedin"},{source:"reddit"}];for(const e of f)if(y(e).test(u))return{medium:"social",source:e.source};return{medium:"other",source:u||void 0}},Oi=Li,ji=Ai.Fo,Ti=Ai.VS,_i=Ai.Tk,Bi=Ai.LU,Ci=function(){try{return Bi(window.location.href,document.referrer,window.location.host,navigator.userAgent,Kr)}catch(e){return ae.error("Unable to determine referrer.",e),{medium:"",source:"",channel:""}}},$i=()=>{xa.update(e=>{e.visitor.session.timestamp=new Date})},Ii=()=>{null===(null===xa.state.visitor.session.timestamp?null:(e=>new Date(e.getTime()+18e5))(xa.state.visitor.session.timestamp).toISOString()<(new Date).toISOString()?(xa.update(e=>{e.visitor.session=new it}),null):xa.state.visitor.session)?((()=>{const e=/^(?:https?:\/\/)?([^/]+)/i;if("string"==typeof document.referrer){const t=document.referrer.match(e);null!==t&&xa.update(e=>{e.visitor.session.referrerDomain=t[1]})}})(),(()=>{try{const e=new URLSearchParams(window.location.search).get("utm_campaign");null!==e&&xa.update(t=>{t.visitor.session.campaignName=e.toLowerCase()})}catch(e){}})(),(()=>{const{medium:e,source:t,channel:r}=Ci();xa.update(n=>{n.visitor.session.referrerMedium=e,n.visitor.session.referrerSource=null!=t?t:null,n.visitor.session.referrerChannel=null!=r?r:null})})(),(()=>{const e=xi();xa.update(t=>{t.visitor.session.queryParams=e})})(),$i()):$i()},Wi="sophiEventQueue",Ri=e=>atob(e),Ui=()=>{const e=Wi+"=",t=decodeURIComponent(document.cookie).split(";");for(let r=0;r<t.length;r++){let n=t[r].trimStart();if(n.startsWith(e)){const e=n.substring(16,n.length);try{return JSON.parse(Ri(e))}catch(e){return[]}}}return[]},Mi=new class{constructor(){this.isSubdomain=e=>{if(!e.subdomains)return ae.debug("No subdomains specified in config"),!1;const t=e.subdomains,r=window.location.hostname;for(let e=0;e<t.length;e++)if(r.includes(t[e]))return!0;return!1},this.store=di}dispatch(e){switch(e.type){case cn.Init:this.handleInit();break;case cn.EnableAllFeatures:this.handleEnableAllFeatures();break;case cn.GetDecision:this.handleGetDecision();break;case cn.GetDecisionForArticleWallIndicators:this.handleGetDecisionForArticleWallIndicators();break;case cn.Pageview:e.payload=E.parse(pn,e.payload);try{this.handleSubdomainAwareEvent(e,this.handlePageview)}catch(e){ae.debug("Error in pageview event handler",e)}break;case cn.Wall:E.parse(dn,e.payload);try{this.handleSubdomainAwareEvent(e,this.handleWallHit)}catch(e){ae.debug("Error in wall event handler",e)}break;case cn.UserProperties:try{this.handleSubdomainAwareEvent(e,this.handleUserProperties)}catch(e){ae.debug("Error in userProperties event handler",e)}break;case cn.ContentProperties:try{this.handleContentProperties()}catch(e){ae.debug("Error in contentProperties event handler",e)}break;default:throw new Error("Invalid event type")}}getDispatch(){return this.dispatch.bind(this)}handleInit(){ae.debug("init handler"),this.dispatch({type:cn.ContentProperties})}handleEnableAllFeatures(){var e,t;ae.info("âï¸ Received enableAllFeatures event"),Kr.mode.on(),this.store.setConsent(!0),null===(t=null===(e=window.sophi)||void 0===e?void 0:e.abTests)||void 0===t||t.enableConsent(),this.isSubdomain(Kr)||(this.store.getFromStored(),this.processStoredEvents(),Ii())}handleGetDecision(){ae.debug("getDecision event handler"),!0!==Kr.mode.isUserBehaviorDataAllowed||Ii()}handleGetDecisionForArticleWallIndicators(){ae.debug("getDecisionForArticleWallIndicators event handler"),!0!==Kr.mode.isUserBehaviorDataAllowed||Ii()}handlePageview(e){ae.info("ð§® Received pageview event",JSON.stringify(e,null,2));const{article:t,section:r}=e,n=this.store.getState();n.today.pageViews++,!0===t&&n.today.pageViewsByArticle++,"string"==typeof r&&r.length>0&&(!1===n.today.topLevelSections.includes(r)&&n.today.topLevelSections.push(r),!0===t&&!1===n.today.topLevelSectionsByArticle.includes(r)&&n.today.topLevelSectionsByArticle.push(r)),this.store.updateState(n)}handleWallHit(e){ae.info("ð§® Received wall event",JSON.stringify(e,null,2));const t=this.store.getState(),r="string"==typeof e?e:e.wallType;"paywall"===r?t.today.pageViewsByArticleWithPaywall++:"regwall"===r&&t.today.pageViewsByArticleWithRegwall++,this.store.updateState(t),"object"==typeof e&&!0===Kr.generatePageviewOnWallHit&&(ae.debug("Generating pageview from wall event"),this.handlePageview({article:!0,section:e.section}))}handleUserProperties(e){return bi(Kr,e)}handleContentProperties(){Bn(Kr),mi(Kr),ae.debug("handleContentProperties handler",_n(Kr))}processSubdomainEvents(){this.isSubdomain(Kr)||(Ui().forEach(e=>{ae.debug("Event Processed from cookie",e),e.type===cn.Pageview?this.handlePageview(e.payload):e.type===cn.Wall&&this.handleWallHit(e.payload)}),document.cookie=`${Wi}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain=.${Kr.hostname}; path=/`)}processPreviousPageEvents(){let e=this.store.getState();e.coldDataLayer.events.forEach(e=>{ae.debug("Event processed from storage",e),e.type===cn.Pageview&&this.handlePageview(e.payload),e.type===cn.Wall&&this.handleWallHit(e.payload),e.type===cn.UserProperties&&this.handleUserProperties(e.payload)}),e=this.store.getState(),this.store.updateState(Object.assign(Object.assign({},e),{coldDataLayer:Object.assign(Object.assign({},e.coldDataLayer),{events:[]})}))}processStoredEvents(){if(!1!==Kr.mode.isUserBehaviorDataAllowed&&!1!==Kr.mode.isDeviceAndLocationDataAllowed){this.processPreviousPageEvents();try{this.processSubdomainEvents()}catch(e){ae.debug("Error processing subdomain events",e)}}}handleSubdomainAwareEvent(e,t){if(this.isSubdomain(Kr))try{return((e,t)=>{if(!1===Kr.cookie.isEnabled)return;const r=Ui();var n;r.push({type:e,payload:t}),document.cookie=`${Wi}=${n=JSON.stringify(r),btoa(n)}; domain=.${Kr.hostname}; path=/; max-age=${Kr.cookie.maxAge};`})("pageview",e),void ae.debug(`Pushed ${e.type} event to cookie:`,e.payload)}catch(t){ae.debug(`Error pushing ${e.type} event to cookie`,t)}else this.processOrStoreInputEvent(e,t)}storeInputEvent(e){const t=this.store.getState();this.store.updateState(Object.assign(Object.assign({},t),{coldDataLayer:Object.assign(Object.assign({},t.coldDataLayer),{events:[...t.coldDataLayer.events,e]})})),ae.debug("Stored event",e)}processOrStoreInputEvent(e,t){!0===Kr.mode.isUserBehaviorDataAllowed?(Ii(),"server"===Kr.wallGeneration.type?this.storeInputEvent(e):t.call(this,e.payload)):ae.debug(`Discarding ${e.type} event`)}},Ni=Mi,Gi=E.object({[j.PAYWALL]:E.number(),[j.REGWALL]:E.optional(E.number())});const Fi=function(e){return"todayPageViews"in e?function(e){return"variant"===e.assignedGroup?function(e){var t;let r=0;r=Math.random();let n=e.referrer.toLowerCase(),i=null===(t=e.visitor.session.timestamp)||void 0===t?void 0:t.getDay(),o="undefined";"number"==typeof i&&(o=["weekends","weekdays","weekdays","weekdays","weekdays","weekdays","weekends"][i]);let a=e.type;""!==a&&null!==a||(a="other");let s=a+e.os;"string"==typeof s&&(s=s.toLowerCase());let l="";"string"==typeof e.viewer&&(l=e.viewer.toLowerCase());let c=e.todayPageViewsByArticle,u=0;"mobileandroid"===s&&(u=1);let p=0;"internal"===n&&(p=1);let d=0;"chrome"===l&&(d=1);let y=0;"facebook"===l&&(y=1);let f=e.hourOfDay,h=e.twentyEightDayTopLevelSections,w=e.todayPageViews,v=e.sevenDayPageViewsByArticle,g=e.sevenDayTopLevelSections,m=e.twentyEightDayVisitCount,b=e.sevenDayPageViews,S=e.sevenDayTopLevelSectionsByArticle,x=e.todayPageViewsByArticleWithPaywall,P=e.twentyEightDayTopLevelSectionsByArticle,A=Math.round(10*e.twentyEightDayPageViewsByArticleWithPaywall/e.twentyEightDayPageViewsByArticle)/10,k=0,D=e.visitor.session.referrerMedium;"string"==typeof D&&(D=D.toLowerCase()),"direct"===D&&(k=1);let V=0;"weekdays"===o&&(V=1);let L=0;L="anonymous"===e.visitorType?b<=3.5?y<=.5?p<=.5?h<=4.5?c<=1.5?.025:.038:c<=6.5?.011:.026:x<=9.5?f<=19?.02:.012:A<=.35?.008:0:w<=.5?f<=13?.018:.033:f<=17?w<=3.5?.016:.006:S<=2.5?.001:.007:b<=7.5?m<=9.5?V<=.5?d<=.5?0:.01:c<=4.5?.007:.017:h<=9.5?.056:.01:x<=7.5?f<=7?.001:v<=3.5?.007:.016:h<=17.5?P<=8.5?0:.01:0:g<=.5?c<=5.5?.043:.01:u<=.5?c<=7.5?x<=2.5?g<=4.5?.016:.007:.023:p<=.5?b<=12.5?.015:0:f<=21?.003:.015:k<=.5?b<=6.5?h<=9.5?0:.01:0:P<=8.5?.018:h<=27.5?0:.007;let E=.5+10*L;E+=.01*(r-.5);let O=.72;return E<=.1?E=.1:E>1&&(E=1),"anonymous"===e.visitorType?E>O?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:E,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:E,threshold:O,wallVisibility:"always",wallType:"paywall"}]}:E>1?{wallType:"regwall",wallVisibility:"always",outcomes:[{score:E,threshold:1,wallVisibility:"always",wallType:"regwall"},{score:E,threshold:O,wallVisibility:"never",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:E,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:E,threshold:O,wallVisibility:"never",wallType:"paywall"}]}:E>.6?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:E,threshold:.6,wallVisibility:"always",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:E,threshold:.6,wallVisibility:"never",wallType:"paywall"}]}}(e):function(e){let t=0,r=.18,n=0;n=Math.random();let i=Math.round(10*e.todayPageViewsByArticleWithPaywall/e.todayPageViewsByArticle)/10,o=Math.round(10*e.sevenDayPageViewsByArticleWithPaywall/e.sevenDayPageViewsByArticle)/10,a=e.type+e.os;"string"==typeof a&&(a=a.toLowerCase());let s=e.viewer;"string"==typeof s&&(s=s.toLowerCase());let l=e.timeZone;"string"==typeof l&&(l=l.toLowerCase());let c=e.type;""!==c&&null!==c||(c=""),""!==c&&"other"!==c&&"console"!==c&&"mobile"!==c&&"tablet"!==c&&"smarttv"!==c&&"wearable"!==c&&(c="");let u=e.os;"string"==typeof u&&(u=u.toLowerCase()),"anonymous"===e.visitorType?(0===e.daysSinceLastVisit&&(t+=.0576),1===e.daysSinceLastVisit&&(t+=-.0144),2===e.daysSinceLastVisit&&(t+=-.018),3===e.daysSinceLastVisit&&(t+=-.0252),4===e.daysSinceLastVisit&&(t+=-.009),5===e.daysSinceLastVisit&&(t+=-.0252),0===e.hourOfDay&&(t+=-.027),2===e.hourOfDay&&(t+=-.009),4===e.hourOfDay&&(t+=-.29*r),6===e.hourOfDay&&(t+=-.0288),8===e.hourOfDay&&(t+=-.0072),10===e.hourOfDay&&(t+=.0414),12===e.hourOfDay&&(t+=.036),14===e.hourOfDay&&(t+=-.0018),16===e.hourOfDay&&(t+=.027),18===e.hourOfDay&&(t+=-.0018),20===e.hourOfDay&&(t+=-.03*r),22===e.hourOfDay&&(t+=-.11*r),"campaign"===e.referrer&&(t+=.216),"direct"===e.referrer&&(t+=.0828),"internal"===e.referrer&&(t+=0),"other"===e.referrer&&(t+=-.144),"search"===e.referrer&&(t+=.198),"social"===e.referrer&&(t+=-.41*r),0===e.sevenDayPageViewsByArticle&&(t+=.036),1===e.sevenDayPageViewsByArticle&&(t+=-.0378),2===e.sevenDayPageViewsByArticle&&(t+=-.03*r),3===e.sevenDayPageViewsByArticle&&(t+=-.0162),4===e.sevenDayPageViewsByArticle&&(t+=.0018),5===e.sevenDayPageViewsByArticle&&(t+=.018),6===e.sevenDayPageViewsByArticle&&(t+=-.03*r),7===e.sevenDayPageViewsByArticle&&(t+=-.12*r),8===e.sevenDayPageViewsByArticle&&(t+=.0342),9===e.sevenDayPageViewsByArticle&&(t+=.0378),e.sevenDayPageViewsByArticle>=10&&e.sevenDayPageViewsByArticle<=14&&(t+=.12*r),e.sevenDayPageViewsByArticle>=15&&e.sevenDayPageViewsByArticle<=19&&(t+=-.0288),"africa/johannesburg"===l&&(t+=.82*r),"america/los_angeles"===l&&(t+=-.54*r),"america/new_york"===l&&(t+=.0126),"asia/bangkok"===l&&(t+=.97*r),"asia/dubai"===l&&(t+=.243),"asia/riyadh"===l&&(t+=.2358),"asia/shanghai"===l&&(t+=.189),"atlantic/canary"===l&&(t+=-.57*r),"europe/amsterdam"===l&&(t+=.1386),"europe/berlin"===l&&(t+=-.0468),"europe/brussels"===l&&(t+=.7524),"europe/dublin"===l&&(t+=-.0846),"europe/isle_of_man"===l&&(t+=3.84*r),"europe/istanbul"===l&&(t+=.31*r),"europe/lisbon"===l&&(t+=-.34*r),"europe/london"===l&&(t+=.0018),"europe/madrid"===l&&(t+=.37*r),"europe/paris"===l&&(t+=.37*r),"europe/warsaw"===l&&(t+=.3708),"europe/zurich"===l&&(t+=.1188),0===e.todayPageViewsByArticle&&(t+=-.0036),1===e.todayPageViewsByArticle&&(t+=.018),2===e.todayPageViewsByArticle&&(t+=.0378),3===e.todayPageViewsByArticle&&(t+=.0036),4===e.todayPageViewsByArticle&&(t+=.17*r),5===e.todayPageViewsByArticle&&(t+=.0072),6===e.todayPageViewsByArticle&&(t+=-.0018),7===e.todayPageViewsByArticle&&(t+=.0018),8===e.todayPageViewsByArticle&&(t+=-.17*r),9===e.todayPageViewsByArticle&&(t+=-.24*r),e.todayPageViewsByArticle>=10&&e.todayPageViewsByArticle<=14&&(t+=-.081),0===e.todayTopLevelSections&&(t+=-.0414),1===e.todayTopLevelSections&&(t+=.0378),2===e.todayTopLevelSections&&(t+=.0162),3===e.todayTopLevelSections&&(t+=.0126),4===e.todayTopLevelSections&&(t+=.0018),5===e.todayTopLevelSections&&(t+=-.0342),6===e.todayTopLevelSections&&(t+=-.063),7===e.todayTopLevelSections&&(t+=-.0828),8===e.todayTopLevelSections&&(t+=-.0936),9===e.todayTopLevelSections&&(t+=-.1008),e.todayTopLevelSections>=10&&e.todayTopLevelSections<=14&&(t+=-.82*r),0===e.todayTopLevelSectionsByArticle&&(t+=-.0036),1===e.todayTopLevelSectionsByArticle&&(t+=.027),2===e.todayTopLevelSectionsByArticle&&(t+=-.0018),3===e.todayTopLevelSectionsByArticle&&(t+=-.0162),4===e.todayTopLevelSectionsByArticle&&(t+=-.27*r),5===e.todayTopLevelSectionsByArticle&&(t+=-.41*r),6===e.todayTopLevelSectionsByArticle&&(t+=-.48*r),7===e.todayTopLevelSectionsByArticle&&(t+=-.57*r),8===e.todayTopLevelSectionsByArticle&&(t+=-.1206),9===e.todayTopLevelSectionsByArticle&&(t+=-.144),e.todayTopLevelSectionsByArticle>=10&&e.todayTopLevelSectionsByArticle<=14&&(t+=-.162),"android browser"===s&&(t+=-.135),"avast secure browser"===s&&(t+=.44*r),"chrome"===s&&(t+=.0126),"chrome webview"===s&&(t+=-.1602),"edge"===s&&(t+=.09),"facebook"===s&&(t+=-.144),"firefox"===s&&(t+=-.0072),"gsa"===s&&(t+=-.0126),"instagram"===s&&(t+=.54),"mobile safari"===s&&(t+=.063),"opera"===s&&(t+=-.0594),"opera touch"===s&&(t+=.51*r),"safari"===s&&(t+=.0882),"samsung browser"===s&&(t+=-.0828),"silk"===s&&(t+=-.0648),"webkit"===s&&(t+=1.3*r),""===c&&(t+=.054),"linux"===u&&(t+=.072),"mac os"===u&&(t+=.045),"windows"===u&&(t+=.054),0===o&&(t+=.027),.1===o&&(t+=.0252),.2===o&&(t+=-.0288),.3===o&&(t+=-.054),.4===o&&(t+=-.0756),.5===o&&(t+=-.0576),.6===o&&(t+=-.0468),.7===o&&(t+=-.09),.8===o&&(t+=.1656),.9===o&&(t+=.3132),1===o&&(t+=-.063),0===i&&(t+=-.009),.1===i&&(t+=-.0504),.2===i&&(t+=-.0576),.3===i&&(t+=-.29*r),.4===i&&(t+=-.0684),.5===i&&(t+=.009),.6===i&&(t+=-.0288),.7===i&&(t+=.0684),.8===i&&(t+=.0846),.9===i&&(t+=.0378),1===i&&(t+=.96*r),1.5===i&&(t+=.2646),2===i&&(t+=.2412),"mobileandroid"===a&&(t+=-.0828),"mobileios"===a&&(t+=.0126),"tabletandroid"===a&&(t+=-.0774),"tabletios"===a&&(t+=-.41*r)):(t+=.54,1===e.daysSinceLastVisit&&(t+=-.11*r),""===c&&(t+=.054),"internal"===e.referrer&&(t+=-.0126),e.sevenDayPageViewsByArticle>=15&&e.sevenDayPageViewsByArticle<=19&&(t+=-.0342),"europe/london"===l&&(t+=-.0144),e.todayPageViewsByArticle>=10&&e.todayPageViewsByArticle<=14&&(t+=-.0882),2===e.todayTopLevelSectionsByArticle&&(t+=-.0828),"chrome"===s&&(t+=.48*r),"mobile safari"===s&&(t+=-.063),0===i&&(t+=.0414),"mobileandroid"===a&&(t+=.0504),"mobileios"===a&&(t+=-.09));let p=.7+t;p+=.03*(n-.5),"subscribed"===e.visitorType&&(p=1);let d=.65,y=.28;return p<=.1?p=.1:p<=.2?p=.2:p<=.3?p=.3:p>1&&(p=1),"anonymous"===e.visitorType?p>d?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:p,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:p,threshold:d,wallVisibility:"always",wallType:"paywall"}]}:p>1?{wallType:"regwall",wallVisibility:"always",outcomes:[{score:p,threshold:1,wallVisibility:"always",wallType:"regwall"},{score:p,threshold:d,wallVisibility:"never",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:p,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:p,threshold:d,wallVisibility:"never",wallType:"paywall"}]}:p>y?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:p,threshold:y,wallVisibility:"always",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:p,threshold:y,wallVisibility:"never",wallType:"paywall"}]}}(e)}(e):function(e){let t=Math.random();return"subscribed"===e.visitorType&&(t=1),t<=.1?t=.1:t<=.2?t=.2:t<=.3?t=.3:t>1&&(t=1),"anonymous"===e.visitorType?t>1?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:t,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:t,threshold:1,wallVisibility:"always",wallType:"paywall"}]}:t>1?{wallType:"regwall",wallVisibility:"always",outcomes:[{score:t,threshold:1,wallVisibility:"always",wallType:"regwall"},{score:t,threshold:1,wallVisibility:"never",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:t,threshold:1,wallVisibility:"never",wallType:"regwall"},{score:t,threshold:1,wallVisibility:"never",wallType:"paywall"}]}:t>1?{wallType:"paywall",wallVisibility:"always",outcomes:[{score:t,threshold:1,wallVisibility:"always",wallType:"paywall"}]}:{wallVisibility:"never",outcomes:[{score:t,threshold:1,wallVisibility:"never",wallType:"paywall"}]}}(e)},zi=E.object({todayPageViews:E.number(),todayPageViewsByArticle:E.number(),todayPageViewsByArticleWithPaywall:E.number(),todayPageViewsByArticleWithRegwall:E.number(),todayTopLevelSections:E.number(),todayTopLevelSectionsByArticle:E.number(),sevenDayPageViews:E.number(),sevenDayPageViewsByArticle:E.number(),sevenDayPageViewsByArticleWithPaywall:E.number(),sevenDayPageViewsByArticleWithRegwall:E.number(),sevenDayTopLevelSections:E.number(),sevenDayTopLevelSectionsByArticle:E.number(),sevenDayVisitCount:E.number(),twentyEightDayPageViews:E.number(),twentyEightDayPageViewsByArticle:E.number(),twentyEightDayPageViewsByArticleWithPaywall:E.number(),twentyEightDayPageViewsByArticleWithRegwall:E.number(),twentyEightDayTopLevelSections:E.number(),twentyEightDayTopLevelSectionsByArticle:E.number(),twentyEightDayVisitCount:E.number(),daysSinceLastVisit:E.number(),timeZone:E.string(),referrer:E.string(),referrerData:E.object({medium:E.union([E.string(),E.null_()]),source:E.optional(E.union([E.string(),E.null_()])),channel:E.optional(E.union([E.string(),E.null_()])),queryParams:E.record(E.string(),E.string())}),hourOfDay:E.number(),os:E.string(),type:E.string(),viewer:E.string(),visitorType:E.string(),visitor:nt,userProperties:E.any(),contentProperties:E.any()});function qi(e){return E.safeParse(zi,e).success}const Hi=new class{constructor(){this.fallback={wallVisibility:"never",outcomes:[{wallVisibility:"never",score:0,threshold:0,wallType:"paywall"}]}}evaluate(e){try{const t=Fi(e);return E.parse(E.union([H,Gi]),t)}catch(t){return ae.debug("Unknown ModelOutput returned by `Model.infer`, using fallback.",e,t),this.fallback}}},Ji=Hi;const Yi=E.object({id:E.string(),outcome:K,createdAt:E.string(),trace:E.string()}),Zi=function(e){return t=this,r=void 0,i=function*(){!function(e){if(!e.ok)throw ae.debug(`Response: ok: ${e.ok}, status: ${e.status}, status text: ${e.statusText}`),e}(e);const t=yield e.json(),r=E.parse(Yi,t);return{id:r.id,createdAt:r.createdAt,trace:r.trace,outcome:r.outcome}},new((n=void 0)||(n=Promise))(function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(a,s)}l((i=i.apply(t,r||[])).next())});var t,r,n,i};function Ki(e){return null!=e&&("string"!=typeof e||""!==e)}function Xi(e,t,r){switch(e.source){case"device":case"visit":return r[e.key];case"contentProperties":return _n(t)[e.key];case"userProperties":return xa.state.userProperties[e.key];default:return void ae.warn(`Unknown dataMap source: ${e.source}`)}}const Qi=e=>Math.min(Math.max(.01,e),1),eo=e=>Math.round(100*e);function to(e){const t="wallType"in e?e.wallType:"paywall",r=M[t],n=U[e.wallVisibility];let i=0===n?R.nowall:R[t];const o=Qi(e.score),a=eo(o);let s=100===a?"xx":a.toString().padStart(2,"0");const l=eo(e.threshold);return`${r}${n}${i}${s}${100===l?"xx":l.toString().padStart(2,"0")}`}function ro(e){let t="";for(const r of e)t+=to(r);return t}function no(e){if(void 0===e)return"--";const t=Math.round(100*e);return 100===t?"xx":t.toString().padStart(2,"0")}let io;function oo(e){e&&(io=e)}function ao(e){const t=e.replace(/\/([\w.]+=[^/&]+)/,"?$1");return t.startsWith("http")?t:`https://${t}`}function so(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"control";if(!(null==io?void 0:io.experiences))return null;const t=e=>e.replace(/^www\./,""),r=Kr.subMarket?`${Kr.subMarket}-${t(Kr.hostname)}`:t(Kr.hostname),n=new Map;let i=null;for(const e of io.experiences){const o=ao(e.definition),a=new URL(o);if(t(a.hostname)!==r)continue;const s=a.searchParams.get("experiment.assignedGroup");s?n.set(s,e.policy.thresholds):""===a.search&&(i=e.policy.thresholds)}return e&&n.has(e)?n.get(e)||null:i}(new Date).toISOString();class lo extends Error{constructor(e){super(e),this.name="AbortError"}}var co=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};function uo(e,t){return co(this,void 0,void 0,function*(){const r=function(e){const t=new AbortController,r=t.signal;return setTimeout(()=>{t.abort(new lo(`Request exceeded ${e.toLocaleString()}ms`))},e),r}(e.timeout),n=function(e,t,r){const n=`/hosts/${e.host}/decisions/me`,i=new URL(e.url+n);return i.search=t.toString(),new Request(i,{signal:r})}(e,t,r);try{const e=yield fetch(n);return Zi(e)}catch(e){return function(e){throw e instanceof Error&&ae.debug("Decision request error",e.name,e.message),ae.debug({err:e}),e}(e)}})}function po(e,t,r,n){return co(this,void 0,void 0,function*(){try{const n=yield function(e,t,r){return co(this,void 0,void 0,function*(){if(!e.paywallApi)throw new Error("Paywall API configuration is missing");const n=_n(e)["content.id"];if(!n){const e=new Error("No value for 'content.id', aborting decision call");throw e.name="ContentIdError",e}const i=new URLSearchParams(r);if(i.append("content.id",String(n)),i.append("visitor.type",t.modelInputs.visitorType),qi(t.modelInputs)){const r=function(e,t,r){const n=new URLSearchParams;for(const[i,o]of Object.entries(e)){const e=Xi(o,t,r);Ki(e)?n.append(i,String(e)):ae.debug(`Skipping dataMap parameter "${i}", value is: ${e}`)}return n}(e.paywallApi.dataMap,e,t.modelInputs);for(const[e,t]of r.entries())"content.id"!==e&&i.append(e,t)}return yield uo(e.paywallApi,i)})}(e,t,r.searchParams),i={id:n.id,createdAt:n.createdAt,trace:n.trace,outcome:n.outcome};return ae.debug("Enhanced with server decision",i),i}catch(i){return function(e,t,r,n,i){var o;let a="No server decision";if(e instanceof Error&&(a+=`: ${e.message}`),ae.warn(a),ae.debug({err:e}),!t.paywallApi)throw new Error("Paywall API configuration is missing");const s=function(e,t,r,n,i,o){let a,s=so(t.assignedGroup);if(s&&"userFallback"in s)a=s.userFallback;else{const e=so();e&&"userFallback"in e&&(a=e.userFallback)}let l="";if(o&&void 0!==i&&(l=((e,t)=>{let r="t";return e instanceof Error&&"AbortError"===e.name?(r+="002",r+=Math.round(t/10)):e instanceof Error&&"TypeError"===e.name?r+="003001":e instanceof Error&&"ContentIdError"===e.name?r+="00401":e&&e instanceof Response?r+="003"+e.status:r+="009000",r=r.substring(0,7).padEnd(7,"0"),r})(o,i)),!a)return ae.warn("No userFallback thresholds found, returning original decision with error trace"),Object.assign(Object.assign({},e),{trace:l+e.trace});const c=Dn(r),u="subscribed"===(p=t.visitorType)?"registered":p;var p;const d=function(e,t,r){const n=e[j.PAYWALL],i=e[j.REGWALL],o=t.paywall[r],a=t.regwall;return n>=o?{wallType:j.PAYWALL,wallVisibility:T,wallVisibilityCode:U.always,wallTypeCode:R.paywall}:void 0!==i&&void 0!==a&&i>=a?{wallType:j.REGWALL,wallVisibility:T,wallVisibilityCode:U.always,wallTypeCode:R.regwall}:{wallVisibility:_,wallVisibilityCode:U.never}}(c,a,u),y=[];for(const e of Object.values(j)){const t=c[e];if(void 0!==t){const r=e===j.PAYWALL?a.paywall[u]:a.regwall;if(void 0===r)continue;const n={score:t,threshold:r,wallVisibility:d.wallVisibility===T&&d.wallType===e?T:_,wallType:e};y.push(n)}}const f=ro(y),h=d.wallVisibilityCode,w="wallTypeCode"in d?d.wallTypeCode:R.nowall;let v,g;if("wallType"in d){const e=d.wallType;v=c[e],g=e===j.PAYWALL?a.paywall[u]:a.regwall}const m=function(e,t,r,n){return`v${e}${t}${no(r)}${no(n)}`}(h,w,v,g),b=Object.assign(Object.assign({},e),{trace:l+m+f,outcome:d});return ae.debug("API fallback decision:",b),b}(r,{visitorType:n.modelInputs.visitorType,assignedGroup:null===(o=r.experiment)||void 0===o?void 0:o.assignedGroup},i,0,t.paywallApi.timeout,e);return{id:r.id,createdAt:r.createdAt,trace:s.trace,outcome:s.outcome}}(i,e,r,t,n.outcomes)}})}r(458),r(1591),r(6237),r(507),r(6993),r(7918),r(2455),r(5281),r(194),r(6913),r(8608),r(1e3),r(7368),r(2822),r(9828),r(5473),r(2477);class yo{constructor(){this.pageViews=0,this.pageViewsByArticle=0,this.pageViewsByArticleWithPaywall=0,this.pageViewsByArticleWithRegwall=0,this.topLevelSections=0,this.topLevelSectionsByArticle=0,this.visitCount=0}}function fo(){const e=new Date;return 2*Math.floor(e.getUTCHours()/2)}function ho(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return""}}const wo={todayPageViews:10,todayPageViewsByArticle:10,todayPageViewsByArticleWithPaywall:10,todayPageViewsByArticleWithRegwall:10,todayTopLevelSections:10,todayTopLevelSectionsByArticle:10,sevenDayPageViews:15,sevenDayPageViewsByArticle:15,sevenDayPageViewsByArticleWithPaywall:15,sevenDayPageViewsByArticleWithRegwall:15,sevenDayTopLevelSections:15,sevenDayTopLevelSectionsByArticle:15,sevenDayVisitCount:10,twentyEightDayPageViews:99,twentyEightDayPageViewsByArticle:60,twentyEightDayPageViewsByArticleWithPaywall:60,twentyEightDayPageViewsByArticleWithRegwall:60,twentyEightDayTopLevelSections:20,twentyEightDayTopLevelSectionsByArticle:20,twentyEightDayVisitCount:30,daysSinceLastVisit:5};function vo(e,t){return Object.entries(e).reduce((e,r)=>{let[n,i]=r;return Object.assign(Object.assign({},e),{[`${t}${n[0].toUpperCase()}${n.slice(1)}`]:i})},{})}const go=function(e,t,r){if(!1===Kr.mode.isDeviceAndLocationDataAllowed&&!1===Kr.mode.isDeviceAndLocationDataAllowed)return{visitorType:t.visitor};const{durations:[n,i,o],daysSinceLastVisit:a}=function(e,t){const r=[e.today,...e.history],n=r.length,i=Math.min(n,Math.max(...t));let o=[],a=new yo,s=0,l=new Set,c=new Set;for(let e=0;e<i;e++){const n=r[e];a.pageViews=a.pageViews+n.pageViews,a.pageViewsByArticle=a.pageViewsByArticle+n.pageViewsByArticle,a.pageViewsByArticleWithPaywall=a.pageViewsByArticleWithPaywall+n.pageViewsByArticleWithPaywall,a.pageViewsByArticleWithRegwall=a.pageViewsByArticleWithRegwall+n.pageViewsByArticleWithRegwall;for(const e of n.topLevelSections)l.has(e)||l.add(e);a.topLevelSections=l.size;for(const e of n.topLevelSectionsByArticle)c.has(e)||c.add(e);a.topLevelSectionsByArticle=c.size,n.pageViews>0&&(a.visitCount++,e>0&&0===s&&(s=e)),t.includes(e+1)&&(o.push(Object.assign({},a)),a=new yo,l=new Set,c=new Set)}if(o.length<t.length)for(let e=o.length;e<t.length;e++)o.push(Object.assign({},a));return{durations:o,daysSinceLastVisit:s}}(t,[1,8,29]),{visitCount:s}=n,l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(n,["visitCount"]),c=(null==r?void 0:r.assignedGroup)||null,u=Ci(),p=xi(),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Gn(e).reduce((e,r)=>{let[n,i]=r;if("number"==typeof i){const r=n in t?t[n]:null;e[n]="number"==typeof r?Math.min(i,r):i}else e[n]=i;return e},{})}(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},vo(l,"today")),vo(i,"sevenDay")),vo(o,"twentyEightDay")),jt(navigator.userAgent)),{timeZone:ho(),referrer:u.medium,referrerData:Object.assign(Object.assign({},u),{queryParams:p}),daysSinceLastVisit:a,visitorType:t.visitor,hourOfDay:fo(),assignedGroup:c,userProperties:e.userProperties,contentProperties:_n(Kr)}),wo);return d.visitor=e.visitor,d},mo={daysSinceLastVisit:"DA",todayPageViews:"AA",todayPageViewsByArticle:"AB",todayPageViewsByArticleWithPaywall:"AC",sevenDayPageViews:"BA",sevenDayPageViewsByArticle:"BB",sevenDayPageViewsByArticleWithPaywall:"BC",todayTopLevelSections:"AD",todayTopLevelSectionsByArticle:"AE",sevenDayTopLevelSections:"BD",sevenDayTopLevelSectionsByArticle:"BE",sevenDayVisitCount:"BF",todayPageViewsByArticleWithRegwall:"AF",sevenDayPageViewsByArticleWithRegwall:"BG",twentyEightDayPageViews:"CA",twentyEightDayPageViewsByArticle:"CB",twentyEightDayPageViewsByArticleWithPaywall:"CC",twentyEightDayTopLevelSections:"CD",twentyEightDayTopLevelSectionsByArticle:"CE",twentyEightDayVisitCount:"CF",twentyEightDayPageViewsByArticleWithRegwall:"CG"},bo={experimentId:"HA",assignedGroup:"HB",visitorType:"FA",referrer:"DC",pageReferrerMedium:"DE",pageReferrerSource:"DF",pageReferrerChannel:"DG",os:"EA",type:"EB",viewer:"EC",hourOfDay:"DD",timeZone:"DB",campaignName:"GA",referrerDomain:"GB",referrerMedium:"GC",referrerSource:"GD",referrerChannel:"GE"},So={medium:{alias:bo.pageReferrerMedium,codes:Ti},source:{alias:bo.pageReferrerSource,codes:_i},channel:{alias:bo.pageReferrerChannel,codes:ji}};function xo(e){if("timeZone"in e){const t=e.timeZone;if(t)return[bo.timeZone+":"+t]}return[]}function Po(e){if("referrer"in e){const t=e.referrer;if(t){const e=Ti[t].toString().padStart(2,"0");return[bo.referrer+":"+e]}}return[]}function Ao(e,t){return function(e,t,r,n){if("referrerData"in e&&e.referrerData&&t in e.referrerData){const i=e.referrerData[t];if(i&&i in n)return[r+":"+n[i].toString().padStart(2,"0")]}return[]}(e,t,So[t].alias,So[t].codes)}function ko(e){if("os"in e){const t=e.os;if(t)return[bo.os+":"+t]}return[]}function Do(e){if("type"in e){const t=e.type;if(t&&t in Ot){const e=Ot[t].toString().padStart(2,"0");return[bo.type+":"+e]}}return[]}function Vo(e){if("viewer"in e){const t=e.viewer;if(t)return[bo.viewer+":"+t]}return[]}const Lo={anonymous:0,registered:1,subscribed:2};function Eo(e){const t=e.visitorType;if(t&&t in Lo){const e=Lo[t].toString().padStart(2,"0");return[bo.visitorType+":"+e]}return[]}function Oo(e){if("hourOfDay"in e){const t=e.hourOfDay;if(void 0!==t)return[bo.hourOfDay+":"+t]}return[]}function jo(e){if("visitor"in e){const t=e.visitor.session,r=["campaignName","referrerDomain","referrerMedium","referrerSource","referrerChannel"],n={referrerSource:_i,referrerChannel:ji};return Gn(t).reduce((e,t)=>{let i,[o,a]=t;return i=o in n?function(e,t){return e in t?t[e].toString().padStart(2,"0"):null}(a,n[o]):a,i&&r.includes(o)&&e.push(bo[o]+":"+i),e},[])}return[]}const To={aa:"0",ab:"1"},_o={control:"1",variant:"2",holdout:"3"};function Bo(e){if(e){const t=/[a-z:_-\d]*test(\d)_(a(?:a|b))$/,r=e.experimentId.match(t);let n="9",i="9",o=function(e){return _o[e.assignedGroup]||"9"}(e);if(r){i=r[1];const e=r[2];n=To[e]}return[bo.experimentId+":"+n+i,bo.assignedGroup+":"+o]}return[]}const Co=(e,t,r,n,i)=>{if(e.trace&&!/t\d{6}/.test(e.trace))return e;if(!r||!Array.isArray(r)||0===r.length||"object"!=typeof r[0])return e;let o=e.trace;return o+=ro(r),o?Object.assign(Object.assign({},e),{trace:o}):e},$o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Io;const Wo=new Uint8Array(16),Ro=[];for(let e=0;e<256;++e)Ro.push((e+256).toString(16).slice(1));const Uo=function(e,t,r){if($o.randomUUID&&!t&&!e)return $o.randomUUID();const n=(e=e||{}).random??e.rng?.()??function(){if(!Io){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Io=crypto.getRandomValues.bind(crypto)}return Io(Wo)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(Ro[e[t+0]]+Ro[e[t+1]]+Ro[e[t+2]]+Ro[e[t+3]]+"-"+Ro[e[t+4]]+Ro[e[t+5]]+"-"+Ro[e[t+6]]+Ro[e[t+7]]+"-"+Ro[e[t+8]]+Ro[e[t+9]]+"-"+Ro[e[t+10]]+Ro[e[t+11]]+Ro[e[t+12]]+Ro[e[t+13]]+Ro[e[t+14]]+Ro[e[t+15]]).toLowerCase()}(n)};var Mo=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};const No=E.optional(E.object({visitor:E.optional($)}));function Go(e){if(!Kr.showPaywallScore)return;const t=e.outcomes[0];return t?eo(Qi(t.score)):void 0}function Fo(e){if(ae.debug("Decision override:",ie.override),ie.override){ae.debug("âï¸ Decision override",ie.override);let t=e.outcome;return ie.override.outcome&&(t=Object.assign(Object.assign({},t),ie.override.outcome)),Object.assign(Object.assign(Object.assign({},e),ie.override),{outcome:t})}return e}function zo(e){window.sophi=null===e?Object.assign(Object.assign({},window.sophi),{quickStart:{}}):Object.assign(Object.assign({},window.sophi),{quickStart:{decision:e}})}function qo(e,t){if(t.addTracingToLocalStorage.enabled&&e){const{inputs:r,context:n,trace:i}=e;localStorage.setItem(t.addTracingToLocalStorage.key,JSON.stringify({inputs:r,context:n,trace:i}))}}function Ho(e){return"always"===e.outcome.wallVisibility?"paywall"===e.outcome.wallType?"paywall":"regwall":"no-wall"}const Jo=e=>{E.parse(No,e);const t=(e=>{var t;try{if(!1===e.metaValues.visitorType)return null;const{selector:r,attribute:n,expression:i}=e.metaValues.visitorType,o=document.querySelector(r);if(!(null===(t=null==o?void 0:o.getAttribute(n))||void 0===t?void 0:t.trim()))return null;const a=fn(r,n,i),s=E.safeParse($,a);return s.success?s.output:null}catch(e){return null}})(Kr),r=di.getState().visitor,n=(e=>{let{argsVisitor:t,metaVisitor:r,storedVisitor:n}=e;return t||r||n||"anonymous"})({argsVisitor:null==e?void 0:e.visitor,metaVisitor:t,storedVisitor:r});return di.updateState(Object.assign(Object.assign({},di.getState()),{visitor:n})),{visitor:n}};function Yo(e,t){return"registered"===e&&"always"===t.outcome.wallVisibility&&"regwall"===t.outcome.wallType&&(t.outcome={wallVisibility:"never",wallVisibilityCode:0}),t}function Zo(e,t,r){return Mo(this,void 0,void 0,function*(){const{experiment:n,modelInputs:i,internalExperiment:o}=e;n&&ae.info("ð§ª Experiment",JSON.stringify(n,null,2)),ae.debug("Model inputs",i);const a=function(e){let t="";if(qi(e)){const r={daysSinceLastVisit:e.daysSinceLastVisit,todayPageViews:e.todayPageViews,todayPageViewsByArticle:e.todayPageViewsByArticle,todayPageViewsByArticleWithPaywall:e.todayPageViewsByArticleWithPaywall,sevenDayPageViews:e.sevenDayPageViews,sevenDayPageViewsByArticle:e.sevenDayPageViewsByArticle,sevenDayPageViewsByArticleWithPaywall:e.sevenDayPageViewsByArticleWithPaywall,todayTopLevelSections:e.todayTopLevelSections,todayTopLevelSectionsByArticle:e.todayTopLevelSectionsByArticle,sevenDayTopLevelSections:e.sevenDayTopLevelSections,sevenDayTopLevelSectionsByArticle:e.sevenDayTopLevelSectionsByArticle,sevenDayVisitCount:e.sevenDayVisitCount,todayPageViewsByArticleWithRegwall:e.todayPageViewsByArticleWithRegwall,sevenDayPageViewsByArticleWithRegwall:e.sevenDayPageViewsByArticleWithRegwall,twentyEightDayPageViews:e.twentyEightDayPageViews,twentyEightDayPageViewsByArticle:e.twentyEightDayPageViewsByArticle,twentyEightDayPageViewsByArticleWithPaywall:e.twentyEightDayPageViewsByArticleWithPaywall,twentyEightDayTopLevelSections:e.twentyEightDayTopLevelSections,twentyEightDayTopLevelSectionsByArticle:e.twentyEightDayTopLevelSectionsByArticle,twentyEightDayVisitCount:e.twentyEightDayVisitCount,twentyEightDayPageViewsByArticleWithRegwall:e.twentyEightDayPageViewsByArticleWithRegwall};t=Object.keys(r).reduce((e,t)=>`${e}${mo[t]+r[t].toString().padStart(2,"0")}`,"")}return t}(i),s=function(e,t){return[...Bo(t),...Eo(e),...Po(e),...Ao(e,"medium"),...Ao(e,"source"),...Ao(e,"channel"),...ko(e),...Do(e),...Vo(e),...Oo(e),...xo(e),...jo(e)].join("|")}(i,o),l=(e=>{if(!e||0===Object.keys(e).length)return"";const t=(Kr.userProperties||[]).filter(e=>!1!==e.tracked).map(e=>e.key);return 0===t.length?"":Gn(e).filter(e=>{let[r]=e;return t.includes(r)}).map(e=>{let[t,r]=e;return`${(e=>hi[e]||e)(t)}:${r}`}).join(",")})(xa.state.userProperties),c=function(e){return e.contentProperties&&e.contentProperties.length>0?function(e){return null===Tn.analyticsString&&Bn(e),Tn.analyticsString}(e):""}(t);r&&r({context:a,inputs:s,userProperties:l,contentProperties:c,experiment:n});const u=Ji.evaluate(i);ae.debug("Model output",u);const p=function(e,t){const r=new URLSearchParams;return e&&r.append("modelTrace",e),t&&(r.append("experiment.id",t.experimentId),r.append("experiment.assignedGroup",t.assignedGroup)),r.toString()}(function(e){const t="outcomes"in e?Dn(e.outcomes):e,r="-";let n="";for(const e in t){const i=t[e],o=M[e],a=r,s=r;if(void 0===i)continue;const l=Math.round(100*i);n+=`${o}${a}${s}${100===l?"xx":l.toString().padStart(2,"0")}${r+r}`}return n}(u),o);let d=Uo(),y=(new Date).toISOString();const f=(w=h=u,E.safeParse(H,w).success?h:{wallVisibility:"never",outcomes:Object.values(j).filter(e=>e in h&&"number"==typeof h[e]).map(e=>({wallType:e,score:h[e],threshold:0,wallVisibility:"never"}))});var h,w;let v=function(e){return"always"===e.wallVisibility?{wallType:e.wallType,wallTypeCode:R[e.wallType],wallVisibility:e.wallVisibility,wallVisibilityCode:U[e.wallVisibility]}:{wallVisibility:e.wallVisibility,wallVisibilityCode:U[e.wallVisibility]}}(f),g="";if(t.paywallApi){const r=yield po(t,e,Object.assign(Object.assign({id:d,createdAt:y,trace:g,context:a,inputs:s,outcome:v,searchParams:p,userProperties:l,contentProperties:c},void 0!==Go(f)?{paywallScore:Go(f)}:{}),{experiment:n}),f);({id:d,createdAt:y,trace:g,outcome:v}=r)}const m=Go(f),b=Object.assign(Object.assign({id:d,createdAt:y,trace:g,context:a,inputs:s,outcome:v,searchParams:p,userProperties:l,contentProperties:c},void 0!==m?{paywallScore:m}:{}),{experiment:n});return ae.debug("Decision made:",b),{decision:b,outcomes:f.outcomes}})}const Ko=new class{constructor(e){let{config:t}=e;this.config=t,this.onDevice=null,this.server=null,this.cold=null}makeParams(){return Mo(this,void 0,void 0,function*(){const e=yield Qr(),t=yield en();return{modelInputs:go(xa.state,di.getState(),t),experiment:e,internalExperiment:t}})}getCached(){return Mo(this,void 0,void 0,function*(){const e=yield this.makeParams();return null===this.onDevice&&(this.onDevice=Zo(e,this.config)),null===this.server&&(this.server=this.onDevice),(yield this.server).decision})}updateCache(e){return Mo(this,void 0,void 0,function*(){const t=yield this.makeParams();return this.onDevice=Zo(t,this.config,e),this.server=this.onDevice,yield this.server})}}({config:Kr});function Xo(){window.sophi.quickStart.decision=void 0,nn(),Tn.values=null,Tn.analyticsString=null}function Qo(e){var t;if(!Ni.isSubdomain(Kr)){const r=e.getState(),n=r.coldDataLayer,{previous:i,outcomes:o}=n;if(i&&Object.keys(i).length>1){const a=Co(i,(r.visitor,null===(t=i.experiment)||void 0===t||t.assignedGroup),o);return zo(a),qo(a,Kr),sn(a),e.updateState(Object.assign(Object.assign({},r),{coldDataLayer:Object.assign(Object.assign({},r.coldDataLayer),{previous:void 0,outcomes:[]})})),n}}return null}function ea(e){return e&&(Ko.cold=(()=>Mo(this,void 0,void 0,function*(){return{decision:e.previous,outcomes:e.outcomes||[]}}))()),Jo(),Ko.updateCache(ta).then(ia)}function ta(e){if("client"===Kr.wallGeneration.type&&!Kr.enableWallIndicators){const{trace:t}=e;sn(function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["trace"]))}return e}function ra(e,t,r){const n=e.getState();e.updateState(Object.assign(Object.assign({},n),{coldDataLayer:Object.assign(Object.assign({},n.coldDataLayer),{previous:t,outcomes:r})})),function(e){if(!0===Kr.cookie.isEnabled&&!0===Kr.mode.isDeviceAndLocationDataAllowed&&!0===Kr.mode.isUserBehaviorDataAllowed&&!Ni.isSubdomain(Kr)){const t=Kr.cookie.name,r=Kr.hostname,n=Kr.cookie.maxAge,i="/";let o=e.searchParams;Kr.cookie.includeOutcome&&(o.length&&(o+="&"),o+="outcome.wallVisibility="+e.outcome.wallVisibility,"always"===e.outcome.wallVisibility&&(o+="&outcome.wallType="+e.outcome.wallType));const a=`${t}=${o}; domain=${r}; path=${i}; max-age=${n};`;document.cookie=a}}(t)}function na(e){return Mo(this,void 0,void 0,function*(){Xo(),e.dispatch({type:cn.ContentProperties});const t=Qo(di);t&&ln(),e.processStoredEvents(),yield ea(t)})}const ia=e=>{var t;const r=e.decision,{visitor:n}=Jo(),i=Co(r,null===(t=r.experiment)||void 0===t||t.assignedGroup,e.outcomes);ae.debug("Policy outcome",i.outcome),Yo(n,i);const o=Fo(i);return"client"===Kr.wallGeneration.type&&!1===Kr.enableWallIndicators?(zo(o),qo(o,Kr),sn(o),ln()):"client"===Kr.wallGeneration.type&&!0===Kr.enableWallIndicators?(null===Ko.cold&&(zo(o),qo(o,Kr),sn(o),ln()),ra(di,o,e.outcomes)):"server"===Kr.wallGeneration.type&&(null===Ko.cold&&(Ko.cold=Mo(void 0,void 0,void 0,function*(){return{decision:yield Ko.getCached(),outcomes:e.outcomes}}),ln()),ra(di,o,e.outcomes)),o},oa=e=>Mo(void 0,void 0,void 0,function*(){var t,r,n,i,o;{ae.info("ð§® Received getDecision event",e);const{visitor:a}=Jo(e);Ni.dispatch({type:cn.GetDecision});const s=(yield null===(t=Ko.cold)||void 0===t?void 0:t.then(e=>e.decision))||(yield Ko.getCached()),l=null!==(n=null===(r=yield Ko.cold)||void 0===r?void 0:r.outcomes)&&void 0!==n?n:null===(i=yield Ko.server)||void 0===i?void 0:i.outcomes,c=Co(s,null===(o=s.experiment)||void 0===o||o.assignedGroup,l);ae.debug("Policy decision",c),Yo(a,c);const u=Fo(c);return ae.info("ðª§ Decision:",Ho(u)),u}});function aa(e){return t=this,r=void 0,i=function*(){var t;!1===Kr.enableWallIndicators&&ae.warn("getDecisionForArticleWallIndicators was called but wall indicators are not enabled. Using current decision."),ae.info("ð§® Received getDecisionForArticleWallIndicators event",e),Ni.dispatch({type:cn.GetDecisionForArticleWallIndicators});const{visitor:r}=Jo(),n=yield Ko.getCached();Yo(r,n),(e=>{if(void 0===e)return null;const t=E.safeParse(kn,e);t.success?t.output:ae.warn(An,"Received:",e)})(null==e?void 0:e.contentPropensityLevel);const i=Fo(Co(n,null===(t=n.experiment)||void 0===t||t.assignedGroup,(yield Ko.server).outcomes));return ae.info("ðª§ Decision for next page:",Ho(i)),i},new((n=void 0)||(n=Promise))(function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(a,s)}l((i=i.apply(t,r||[])).next())});var t,r,n,i}const sa=function(){const{context:e,inputs:t,trace:r,experimentsCode:n,assignedGroup:i}=on(),o={context:e,inputs:t,trace:r,decisionSource:"",experimentsCode:n,assignedGroup:i};return ae.debug("Sophi context",o),o},la=function(){const{context:e,inputs:t,trace:r,userProperties:n}=on(),i={context:e,inputs:t,trace:r,userProperties:n};return ae.info("ðª§ Received getWallContext event",JSON.stringify(i,null,2)),i};var ca=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};const ua=E.pipe(E.string(),E.trim(),E.string(),E.trim(),E.picklist(["pageview","wall","config","getDecision","getWallContext","getSophiContext","enableAllFeatures","userProperties","getDecisionForArticleWallIndicators"])),pa=["pageview","wall","userProperties"],da=["getDecision","getDecisionForArticleWallIndicators","getWallContext","getSophiContext"],ya=["config"],fa=["enableAllFeatures"];function ha(e){let t,r,n;return"object"==typeof e&&null!==e&&("args"in e&&void 0!==e.args&&(t=e.args),"onSuccess"in e&&"function"==typeof e.onSuccess&&(r=e.onSuccess),"onError"in e&&"function"==typeof e.onError&&(n=e.onError)),{args:t,onSuccess:r,onError:n}}const wa=(e,t)=>{"function"==typeof e&&e(t)};function va(e,t){return ca(this,arguments,void 0,function(e,t){var r=this;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const{args:i,onSuccess:o,onError:a}=ha(t),{resolve:s,reject:l}=n;try{const t=function(e){return E.parse(ua,e)}(e),n=yield ga.call(r,t,i);return wa(o,n),wa(s,n),n}catch(e){const t=function(e){try{if(e instanceof E.ValiError){const{root:t,nested:r}=E.flatten(e.issues),n=t||r;return ae.error("InputError",JSON.stringify(n,null,2)),new Error("InputError",{cause:e})}throw e}catch(t){return ae.debug("Error while formatting error",e),new Error("DecisionError",{cause:t})}}(e);throw ae.debug("Error",t),wa(a,t),wa(l,t),t}}()})}function ga(e,t){return this[e](t)}function ma(e,t){const[[r,n]]=e[t],{resolve:i,reject:o}=function(e){let t,r;if(Array.isArray(e)){const[n,i,o]=e;"function"==typeof i&&(t=i),"function"==typeof o&&(r=o)}return{resolve:t,reject:r}}(e[t]);va.call(this,r,ha(n),{resolve:i,reject:o}),e.splice(t,1)}function ba(e,t){for(let r=0;r<e.length;r++){const[[n]]=e[r];t.includes(n)&&(ma.call(this,e,r),r--)}}const Sa=function(e){return ca(this,void 0,void 0,function*(){var t,r,n;(r=Kr.hostname)===(n=null===(t=window.location)||void 0===t?void 0:t.hostname)||new RegExp(`^(.*\\.)?${r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}$`).test(n)||ae.warn(`Bundle hostname mismatch: bundle is for "${Kr.hostname}", but loaded on "${window.location.hostname}"`),ae.debug("Initializing"),function(e,t){var r,n,i,o;if(null!==t.mode.consentParameterValue)!0===t.mode.consentParameterValue?(t.mode.on(),e.setConsent(!0),null===(n=null===(r=window.sophi)||void 0===r?void 0:r.abTests)||void 0===n||n.enableConsent()):!1===t.mode.consentParameterValue&&(t.mode.off(),e.setConsent(!1));else{const r=e.getConsent();void 0!==r&&(!0===r.granted&&(t.mode.on(),null===(o=null===(i=window.sophi)||void 0===i?void 0:i.abTests)||void 0===o||o.enableConsent()),!1===r.granted&&t.mode.off())}}(this.store,Kr),ba.call(this,e,ya),ba.call(this,e,fa);const i=Qo(this.store);i&&ln(),function(e){if(e&&("event"in e&&window.addEventListener(e.event,()=>{na(Ni)}),"selector"in e)){const t=function(e){let t=null;try{t=document.querySelector(e)}catch(t){ae.warn(`Invalid selector ${e}.`)}return null===t?(ae.warn(`No node found using selector ${e}. Using document.body instead.`),document.body):t}(e.selector);let r=location.href;const n={subtree:!0,childList:!0};new MutationObserver(function(){location.href!==r&&(r=location.href,na(Ni)),ae.debug("MutationObserver callback checked for page change")}).observe(t,n)}}(Kr.spa),Kr.mode.isUserBehaviorDataAllowed&&Ii(),Ni.processStoredEvents(),Ni.dispatch({type:cn.Init}),"server"===Kr.wallGeneration.type&&ba.call(this,e,pa),yield ea(i),ba.call(this,e,da),"client"===Kr.wallGeneration.type&&ba.call(this,e,pa),this.ready=!0,window.demeter=va.bind(this);for(let t=0;t<e.length;t++)ma.call(this,e,t),t--})};const xa=function(e){return new pt(e.storage)}({storage:localStorage}),Pa=class{constructor(){this.ready=!1,this.store=di;const e=Ni.getDispatch();return this.init=Sa.bind(this),this.pageview=t=>e({type:cn.Pageview,payload:t}),this.wall=t=>e({type:cn.Wall,payload:t}),this.enableAllFeatures=()=>e({type:cn.EnableAllFeatures}),this.userProperties=t=>{e({type:cn.UserProperties,payload:t})},this.config=ie.config.bind(ie),this.getDecision=oa,this.getWallContext=la,this.getDecisionForArticleWallIndicators=aa,this.getSophiContext=sa,new Proxy(this,{get:function(e,t){var r=this;return"function"==typeof e[t]&&"init"!==t?function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=r,s=void 0,c=function*(){if(!e.ready)throw new Error(`InitError: ${String(t)}() was called before init(). Please initialize before using this function.`);return e[t](...i)},new((l=void 0)||(l=Promise))(function(e,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function n(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof l?i:new l(function(e){e(i)})).then(r,n)}i((c=c.apply(a,s||[])).next())});var a,s,l,c}:e[t]}})}};let Aa=null,ka=!1;"undefined"!=typeof DEMETER_PREBUILD&&DEMETER_PREBUILD||function(e){return t=this,r=void 0,i=function*(){return Aa||(Aa=new Pa),ka||(e||ae.debug("Error loading 'thresholds' value."),oo(e),yield function(e){return t=this,r=void 0,i=function*(){window.sophi=window.sophi||{},window.sophi.demeter=window.sophi.demeter||{actions:[]},window.sophi.quickStart=window.sophi.quickStart||{},window.sophi.dataLayer||nn(),e.init(window.sophi.demeter.actions)},new((n=void 0)||(n=Promise))(function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(a,s)}l((i=i.apply(t,r||[])).next())});var t,r,n,i}(Aa),ka=!0),Aa},new((n=void 0)||(n=Promise))(function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(a,s)}l((i=i.apply(t,r||[])).next())});var t,r,n,i}().catch(e=>{console.error("Failed to initialize SDK:",e)})})();