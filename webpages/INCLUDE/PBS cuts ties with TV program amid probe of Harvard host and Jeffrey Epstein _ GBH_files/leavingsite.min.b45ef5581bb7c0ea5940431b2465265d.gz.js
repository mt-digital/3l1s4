!function(){"use strict";class e extends HTMLElement{connectedCallback(){this.init()}init(){this.goToExternalSite=this.goToExternalSite.bind(this),this.closeOverlay=this.closeOverlay.bind(this),this.toggleCookie=this.toggleCookie.bind(this),this.trapFocus=this.trapFocus.bind(this),this.handleModalOpen=this.handleModalOpen.bind(this),this.blockKeyboard=this.blockKeyboard.bind(this),this.lastFocusElement=null,this.modalOverlay=document.querySelector(".modal-overlay"),this.closeButton=this.querySelector(".close-button"),this.returnToSiteButton=this.querySelector("button.stay-on-site"),this.goToExternalButton=this.querySelector("button.go-external"),this.disableCheckBox=document.querySelector("gbh-checkbox label"),this.modalOverlay.addEventListener("modalOpened",this.handleModalOpen),this.modalOverlay.addEventListener("keydown",this.blockKeyboard),this.modalOverlay.addEventListener("keyup",this.blockKeyboard),this.setEventListeners()}blockKeyboard(e){"Escape"!==e.key&&"Tab"!==e.key&&e.stopPropagation()}handleModalOpen(){window.modalIsOpen=!0,null===this.lastFocusElement&&(this.lastFocusElement=document.activeElement),document.addEventListener("keydown",this.trapFocus),this.returnToSiteButton.focus()}setEventListeners(){this.goToExternalButton.addEventListener("click",this.goToExternalSite),[this.returnToSiteButton,this.closeButton].forEach(e=>{e.addEventListener("click",this.closeOverlay)}),["click","keydown"].forEach(e=>{this.disableCheckBox.addEventListener(e,this.toggleCookie)}),document.addEventListener("keydown",e=>{this.modalOverlay.getAttribute("hidden")||"Escape"!==e.key||this.closeOverlay(e)})}goToExternalSite(){window.location.href=this.goToExternalButton.getAttribute("href")}closeOverlay(e){"keydown"!==e.type||"Enter"===e.key||"Escape"===e.key?(document.removeEventListener("keydown",this.trapFocus),this.modalOverlay.setAttribute("hidden",""),this.lastFocusElement&&this.lastFocusElement.focus(),this.lastFocusElement=null,window.modalIsOpen=!1,document.querySelectorAll("ps-youtubeplayer").forEach(e=>{e.skipNextKeyUp=!0})):e.stopPropagation()}toggleCookie(e){const t=this.disableCheckBox.querySelector('input[type="checkbox"]');if("keydown"===e.type){if("Enter"!==e.key)return;t.checked?t.checked=!1:t.checked=!0}var o;t.checked?((e,t,o)=>{let n="";if(o){const e=new Date;e.setTime(e.getTime()+24*o*60*60*1e3),n="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"})("disableInterstitial","true"):(o="disableInterstitial",document.cookie=o+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;")}trapFocus(e){if("Tab"!==e.key)return;const t=this.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!t.length)return;const o=t[0],n=t[t.length-1];e.shiftKey&&document.activeElement===o?(e.preventDefault(),n.focus()):e.shiftKey||document.activeElement!==n||(e.preventDefault(),o.focus())}}!function(e){function t(e){e.forEach(e=>{e.object&&(void 0!==e.button&&void 0===window.customElements.get(e.button)?(console.log("Registering",e.button,e.object),window.customElements.define(e.button,e.object,{extends:"button"})):void 0!==e.tag&&void 0===window.customElements.get(e.tag)&&window.customElements.define(e.tag,e.object))})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t(e)):t(e)}([{object:e,tag:"gbh-interstitial"}])}();