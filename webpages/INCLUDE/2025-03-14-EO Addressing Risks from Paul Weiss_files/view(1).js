import*as e from"@wordpress/interactivity";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(o={getConfig:()=>e.getConfig,getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},a={},t.d(a,o),a),i=['input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","[contenteditable]",'[tabindex]:not([tabindex^="-"])',"a[href]"],s=()=>window.matchMedia("(max-width: 781px)").matches;var o,a;let r=null;const l=new Map,c=new Set;let u=null;const{state:d,actions:m,functions:h}=(0,n.store)("whitehouse-header",{state:{scrollY:0,lastScrollY:0,scrollDirection:"up",isReady:!1,isSticky:!1,isCondensed:!1,supportsPrimary:!1,primaryNavigationLeft:!1,primaryNavigationRight:!1,supportsImmersive:!1,immersiveThreshold:0,activeOverlay:null,activeMenuItem:null,get activeMenuItemElement(){return document.getElementById(d.activeMenuItem)},openMenuItems:{},get activeMenuFeatureMenuId(){return d.activeMenuItemElement?.closest(".menu > .menu-item")?.id??"default"},activeMenuFeatures:{},get isOverlayActive(){return null!==d.activeOverlay},get isMenuActive(){return"menu"===d.activeOverlay},get isSearchActive(){return"search"===d.activeOverlay},get isPrimaryActive(){return!(!d.supportsPrimary||d.isCondensed&&!d.isOverlayActive&&"up"!==d.scrollDirection)},get isImmersiveActive(){return!!d.supportsImmersive&&!d.isOverlayActive&&d.scrollY<=d.immersiveThreshold}},functions:{updateImmersiveThreshold:e=>{d.supportsImmersive&&window.requestAnimationFrame((()=>{d.immersiveThreshold=u?u.offsetHeight-e.offsetHeight:0}))},updatePrimaryNavigationScroll:e=>{const t=e.scrollWidth,n=e.offsetWidth,i=e.scrollLeft;t>n?(d.primaryNavigationLeft=i>0,d.primaryNavigationRight=n+i<t):(d.primaryNavigationLeft=!1,d.primaryNavigationRight=!1)},updateMenuNavigationHeight:e=>{window.requestAnimationFrame((()=>{const t=d.activeMenuItemElement?.querySelector(".sub-menu")??e.querySelector(".menu");if(t){const n=Math.ceil(t.scrollHeight);e.style.setProperty("--wh-header--menu--height",`${n}px`)}else e.style.removeProperty("--wh-header--menu--height")}))},toggleOpenMenuItem:e=>{const t=d.openMenuItems[e.id];if(!t){const t=Object.keys(d.openMenuItems||{});for(const n of t){const t=document.getElementById(n);t&&!t.contains(e)&&h.toggleOpenMenuItem(t)}}const n=e.querySelector(".sub-menu");if(n)if(n.style.height=n.scrollHeight+"px",t)n.offsetHeight,n.style.removeProperty("height");else{const e=t=>{"height"===t.propertyName&&(n.style.height="auto",n.removeEventListener("transitionend",e))};n.addEventListener("transitionend",e)}if(t){const{[e.id]:t,...n}=d.openMenuItems;d.openMenuItems=n}else d.openMenuItems={...d.openMenuItems,[e.id]:!0}},closeOpenMenuItems:()=>{const e=Object.keys(d.openMenuItems||{});if(e.length)for(const t of e){const e=document.getElementById(t);e&&h.toggleOpenMenuItem(e)}}},actions:{closeOverlay:()=>{d.activeOverlay=null},openMenu:()=>{d.activeOverlay="menu"},openSearch:()=>{d.activeOverlay="search"},toggleMenu:()=>{d.isMenuActive?d.activeOverlay=null:d.activeOverlay="menu"},toggleSearch:()=>{d.isSearchActive?d.activeOverlay=null:d.activeOverlay="search"}},callbacks:{initHeader:()=>{const{ref:e}=(0,n.getElement)();document.body.classList.contains("has-immersive-header")||document.querySelector(":is(main.site-content, .entry-content) > .wp-block-whitehouse-topper.is-style-full-media:first-child, :is(main.site-content, .entry-content) > .wp-block-cover.alignfull:first-child, main.site-content .wp-block-whitehouse-carousel.alignfull.is-variation-front-carousel:first-child")?d.supportsImmersive=!0:document.body.classList.contains("has-topper")?d.supportsImmersive=!1:d.supportsImmersive=!0,u=document.querySelector(":is(main.site-content, .entry-content) > .is-immersive-header-element:first-child"),h.updateImmersiveThreshold(e),d.lastScrollY=window.scrollY,d.scrollY=window.scrollY,d.scrollDirection="up",d.isReady=!0},initPrimary:()=>{d.supportsPrimary=!0},initPrimaryNavigation:()=>{const{ref:e}=(0,n.getElement)();h.updatePrimaryNavigationScroll(e)},initMenu:()=>{const{ref:e}=(0,n.getElement)()},initSearch:()=>{const{ref:e}=(0,n.getElement)(),t=e.querySelector("form"),i=t?.querySelector('input[type="search"]');t&&t.addEventListener("submit",(e=>{i&&!i.value.trim()&&(e.preventDefault(),i.focus())}))},initMenuClose:()=>{const{ref:e}=(0,n.getElement)();e.disabled=!s()},initMenuNavigation:()=>{const{ref:e}=(0,n.getElement)(),t=document.querySelector(".wp-block-whitehouse-header__menu-social"),i=[...e.querySelectorAll(".menu-item > a")].find((e=>"follow on social media"===e.textContent.toLowerCase()));t&&i&&(i.after(t),t.classList.add("is-active")),h.updateMenuNavigationHeight(e)},initMenuFeatures:()=>{const{ref:e}=(0,n.getElement)();e.querySelectorAll(".wp-block-whitehouse-header__menu-feature").forEach((e=>{const t=e.dataset.menuId,n=e.dataset.index;l.has(t)||l.set(t,new Map),l.get(t).set(n,e),c.add(n)}))},watchHeader:()=>{d.isOverlayActive?document.body.classList.add("has-overlay-open"):document.body.classList.remove("has-overlay-open")},watchMenu:()=>{const{ref:e}=(0,n.getElement)();if(d.isMenuActive){const t=e.querySelectorAll(i),n=t?.[0];setTimeout((()=>n?.focus()),250)}},watchSearch:()=>{const{ref:e}=(0,n.getElement)();if(d.isSearchActive){const t=e.querySelector('input[type="search"]');setTimeout((()=>t?.focus()),250)}},watchMenuNavigation:()=>{if(!d.isMenuActive)return d.activeMenuItem=null,void h.closeOpenMenuItems();const{ref:e}=(0,n.getElement)();h.updateMenuNavigationHeight(e),e.classList.add("has-active-delay"),setTimeout((()=>e.classList.remove("has-active-delay")),300)},watchMenuFeatures:()=>{const e=d.activeMenuFeatureMenuId;if(!e)return;const t={};for(const n of c)l.get(e)?.has(n)?t[`${e}-${n}`]=!0:l.get("default")?.has(n)&&(t[`default-${n}`]=!0);d.activeMenuFeatures=t},watchMenuFeature:()=>{const{ref:e}=(0,n.getElement)(),t=e?.querySelector("video"),i=e?.querySelector("video source");if(!t||!i)return;const s=e.dataset.menuId,o=e.dataset.index;d.activeMenuFeatures[`${s}-${o}`]?t.paused&&(i.src=i.dataset.src,t.load(),t.play()):(t.pause(),i.removeAttribute("src"),t.load())},handleWindowScroll:()=>{const e=(0,n.getContext)(),t=parseInt(e.scrollDirectionThreshold),i=parseInt(e.condenseThreshold),s=parseInt(e.condenseBufferThreshold);d.lastScrollY=d.scrollY,d.scrollY=window.scrollY,Math.abs(d.scrollY-d.lastScrollY)>t&&(d.scrollDirection=d.scrollY>d.lastScrollY?"down":"up"),window.scrollY>0?(d.isSticky=!0,document.body.classList.add("has-sticky-header")):(d.isSticky=!1,document.body.classList.remove("has-sticky-header")),!d.isCondensed&&window.scrollY>=i?(d.isCondensed=!0,document.body.classList.add("has-condensed-header")):d.isCondensed&&window.scrollY<i-s&&(d.isCondensed=!1,document.body.classList.remove("has-condensed-header"))},handleWindowResize:()=>{const{ref:e}=(0,n.getElement)();h.updateImmersiveThreshold(e)},handleHeaderFocusout:()=>{const{ref:e}=(0,n.getElement)();setTimeout((()=>{e.contains(document.activeElement)}),0)},handlePrimaryNavigationResize:()=>{const{ref:e}=(0,n.getElement)();h.updatePrimaryNavigationScroll(e)},handlePrimaryNavigationScroll:()=>{const{ref:e}=(0,n.getElement)();h.updatePrimaryNavigationScroll(e)},handlePrimaryNavigationLeft:()=>{const{ref:e}=(0,n.getElement)(),t=e.parentElement;t.scrollBy({left:t.offsetWidth/-2,behavior:"smooth"})},handlePrimaryNavigationRight:()=>{const{ref:e}=(0,n.getElement)(),t=e.parentElement;t.scrollBy({left:t.offsetWidth/2,behavior:"smooth"})},handleOverlayClick:()=>{m.closeOverlay()},handleOverlayKeydown:e=>{d.isOverlayActive&&27===e.keyCode&&m.closeOverlay()},handleMenuCloseResize:()=>{const{ref:e}=(0,n.getElement)();e.disabled=!s()},handleMenuItemLinkMouseover:()=>{if(s())return;const{ref:e}=(0,n.getElement)(),t=e.parentElement;t.classList.contains("menu-item")&&(r&&window.clearTimeout(r),r=window.setTimeout((()=>{d.activeMenuItem=t.id}),50))},handleMenuItemLinkMouseout:()=>{s()||r&&window.clearTimeout(r)},handleMenuNavigationClick:e=>{const t=e?.target&&e.target.matches("a")?e.target:null;if(t){const n=t.parentElement;d.activeMenuItem=n.id,n.classList.contains("menu-item-has-children")&&(!window.matchMedia("(hover: hover)").matches&&!window.matchMedia("(pointer: fine)").matches||s())&&(e.preventDefault(),e.stopPropagation(),h.toggleOpenMenuItem(n))}},handleMenuNavigationResize:()=>{d.activeMenuItem=null,h.closeOpenMenuItems();const{ref:e}=(0,n.getElement)();h.updateMenuNavigationHeight(e)},isActiveMenuItem:()=>{const{ref:e}=(0,n.getElement)();return d.activeMenuItemElement&&(d.activeMenuItemElement===e||e?.contains(d.activeMenuItemElement))},isOpenMenuItem:()=>{const{ref:e}=(0,n.getElement)();return d.openMenuItems[e?.id]},isActiveMenuFeature:()=>{const{ref:e}=(0,n.getElement)(),t=e?.dataset?.menuId,i=e?.dataset?.index;return d.activeMenuFeatures[`${t}-${i}`]},getMenuButtonLabel:()=>{const{ref:e}=(0,n.getElement)();if(!e)return;const{menuOpenLabel:t,menuCloseLabel:i}=(0,n.getConfig)();e.innerHTML=d.isMenuActive?i:t},getMenuButtonTitle:()=>{const{menuOpenTitle:e,menuCloseTitle:t}=(0,n.getConfig)();return d.isMenuActive?t:e},getSearchButtonLabel:()=>{const{ref:e}=(0,n.getElement)();if(!e)return;const{searchOpenLabel:t,searchCloseLabel:i}=(0,n.getConfig)();e.innerHTML=d.isSearchActive?i:t},getSearchButtonTitle:()=>{const{searchOpenTitle:e,searchCloseTitle:t}=(0,n.getConfig)();return d.isSearchActive?t:e}}},{lock:!0});