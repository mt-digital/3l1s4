import*as e from"@wordpress/interactivity";var t={d:(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const s=(n={getConfig:()=>e.getConfig,getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},c={},t.d(c,n),c),{state:r,actions:o}=(0,s.store)("whitehouse-newsletter",{state:{get successes(){const{responses:e}=(0,s.getContext)();return e.filter((e=>"success"===e.result))},get errors(){const{responses:e}=(0,s.getContext)();return e.filter((e=>"error"===e.result))},get message(){const{item:e}=(0,s.getContext)();return e?.msg||""},get hasSuccess(){return r.successes.length>0}},actions:{submit:e=>{e.preventDefault();const t=(0,s.getContext)();t.responses=[],t.submitting=!0;const{ref:r}=(0,s.getElement)(),{spamMessage:n}=(0,s.getConfig)(),c=new FormData(r);if(Object.fromEntries(c.entries()).b_255057cc391ca0facb169b81c_004f59aa22)return t.responses.push({result:"error",msg:n}),void(t.submitting=!1);let a=t.formAction;a=a.replace("/post?u=","/post-json?u="),a+="&c=whNewsletterHandleScriptResponse",a=`${a}&${new URLSearchParams(c).toString()}`,o.transport(a)},transport:e=>{const{errorMessage:t}=(0,s.getConfig)(),r=(0,s.getContext)(),o=document.createElement("script");o.async=!0,o.src=e,window.whNewsletterHandleScriptResponse=e=>{const t=new CustomEvent("whmccallback",{detail:e});window.dispatchEvent(t)},o.onerror=()=>{r.responses.push({result:"error",msg:t}),r.submitting=!1,document.head.removeChild(o),window.whNewsletterHandleScriptResponse=void 0},o.onload=()=>{r.submitting=!1,document.head.removeChild(o),window.whNewsletterHandleScriptResponse=void 0},document.head.appendChild(o)}},callbacks:{complete:()=>{const{ref:e}=(0,s.getElement)();r.hasSuccess&&e.remove()},transportComplete:e=>{const t=(0,s.getContext)(),{communityEmbedId:r}=(0,s.getConfig)(),o=e.detail;if("success"!==o?.result&&"captcha"===o?.msg);else if("success"!==o?.result)try{const e=o.msg.split(" - ",2);void 0!==e[1]&&parseInt(e[0]).toString()===e[0]&&(o.msg=e[1])}catch(e){}if("success"===o?.result&&r){const e=document.createElement("script");e.async=!0,e.src="https://mgu-embed.community.com/embed.js",e.dataset.communityEmbedId=r,document.head.appendChild(e)}const n=t.responses.some((e=>e?.result===o?.result&&e?.msg===o?.msg)),c="validation_error"===o?.type,a=t.responses.some((e=>"error"===e?.result));n||c&&a||t.responses.push(o)}}},{lock:!0});var n,c;