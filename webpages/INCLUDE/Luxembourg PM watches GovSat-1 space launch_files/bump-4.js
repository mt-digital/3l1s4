!function(){var e={en:{pgHeader:"Parental Guidance Lock",pgAgeConfirmation:"I am aged 16 or over",pgClose:"Close pop up",pgContinue:"Continue",pgPasswordValidationError:"Please confirm your age before continuing",pgAriaAgeConfirmCheckBox:"Age confirmation check box. Checked.",pgAriaAgeConfirmCheckBoxUnchecked:"Age confirmation check box. Check to confirm you are sixteen or over.",pgTurnOnParentalGuidance:"Turn on the Parental Guidance Lock?",pgInfoPlusDownload:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose ‘Turn On’. To continue without Parental Guidance choose ‘Download’.</p>",pgInfoPlusPlay:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose ‘Turn On’. To continue without Parental Guidance choose ‘Play’.</p>",pgInfo:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.",pgTurnOn:"Turn On",toolTipPlay:"Play",pgEnterPIN:"Please enter a four-digit PIN",pgActivateInfo:"You will need your PIN to play Guidance-labelled content",pgPINValidationError:"Your PIN must be four digits",pgAriaPINEntryDescription:"PIN entry text field",pgAriaPINPrompt:"Please enter a valid four-digit PIN",pgEnterPINPrompt:"Please enter your four-digit PIN to continue",pgManageYourPIN:"Manage your PIN",pgUnlock:"Unlock",pgIncorrectPIN:"Incorrect PIN. Please try again",newPgTurnOnParentalGuidance:"Turn on Parental Guidance Lock?",newPgTurnOnParentalGuidancePINsection:"Turn on Parental Guidance Lock",newPgTurnOnParentalGuidanceInsertPIN:"Parental Guidance Lock",newPgTurnOn:"Turn on PG Lock",newToolTipPlay:"Play without PG Lock",findOutMore:"Find out more",notSuitableForChildMessage:"This programme may not be suitable for children. Turn on PG Lock and we'll ask you to set up a PIN to control who can watch BBC content with a Guidance label on this browser.",newPgAgeConfirmationUnder16:"I've got permission.",newUnder16WithPermission:"You're signed in as someone who’s under 16. So you need permission from a parent or guardian to play this.",newPgPlay:"Play",newPgEnterPIN:"Please choose a four-digit PIN.",newPgPINvalidationError:"Your PIN must be four digits long.",newPgIncorrectPIN:"Wrong PIN. Please try again.",newPgManageYourPIN:"Manage your lock",newPgEnterPINprompt:"Please enter your four-digit PIN.",newPgActivateInfo:"You'll need this to play any content with a Guidance label.",newPgEnterPINinfo:"This programme has a Guidance label.",newAgeConfirmationTitle:"Guidance",pgUnder16PermissionValidationError:"Please confirm you have permission before continuing",playbackSettingsHeading:"Playback settings",autoplaySettingHeading:"Autoplay",autoplaySettingSubheading:"Play next item automatically",off:"OFF",on:"ON",pgDownload:"Download",pgActivate:"Activate",unableToEmbed:"Unable to embed player",errorUnsupported:"Your device is not currently supported",initialiseFailed:"Player failed to initialise",contentNotAvailableOnDevice:"This content is not currently available on this device.",defaultErrorMessage:"This content doesn't seem to be working.",flashNotAvailable:"This player no longer works properly on your device. You'll need to update your browser or device to continue.",deprecationMessageLongLink:"Find out how to keep watching and listening",embedTitle:"Embed This Media",embedDescription:"Copy the code below to share this content on your own site. Press escape to close",embedTerms:"Terms and conditions",embedClose:"Close",aaampPlay:"click to play",screenreaderDefaultIframeTitle:"Media Player"}},t={},n={},i={};function a(e){if(t[e])for(;t[e].length>0;)t[e].pop()()}var o=5e3,r="cy,gd,ga,fr,ar,az,ha,hi,id,ky,es,so,sw,tr,ur,fa,ru,uk,vi,si,rw,ps,ne,my,zh-hans,zh-hant,uz,tg,pt,ta,bn,ja,pi,am,gu,ko,mr,om,pa,pcm,te,th,ti,yo,ig,sr-cyrl,sr-latn,pl,ro,hu".split(",");function s(e){if(!e||!/^[\-a-zA-Z]{1,20}$/.test(e))return"en";return{"en-gb":"en","cy-gb":"cy","gd-gb":"gd","ga-gb":"ga","ru-uk":"ru","uz-latn":"uz","uz-cyrl":"uz",zh:"zh-hans",sr:"sr-latn","pt-br":"pt"}[e=e.toLowerCase()]||e}var l={getCode:s,add:function(t,n){clearTimeout(i[t]),e[t]=n,a(t)},load:function(l,d){if(l=s(l),!e[l]&&function(e){if(r.length<2)return!0;for(var t=0;t<r.length;t++)if(r[t]==e)return!0;return!1}(l)){if(d&&(t[l]||(t[l]=[]),t[l].push(d)),!n[l]){n[l]=!0;var c=document.createElement("script");c.type="text/javascript",c.charset="utf-8",c.async=!0,c.src="https://emp.bbci.co.uk/emp/translations/1.2.1/language."+l+".js",document.getElementsByTagName("head")[0].appendChild(c),clearTimeout(i[l]),i[l]=setTimeout(function(){a(l)},o)}}else d&&d()},t:function(t,n){return n=s(n),e[n]&&e[n][t]?e[n][t]:e.en[t]||t},getList:function(t){return e[t]},screenreaderAlert:function(e){var t=document.createElement("div"),n=document.createElement("p");n.textContent=n.innerText=e,t.setAttribute("role","alert"),t.setAttribute("style","width: 1px; position: absolute; left: -2500px; overflow: hidden;"),document.body.appendChild(t),t.style.display="none",t.style.display="block",setTimeout(function(){document.body.removeChild(t)},2500)}};function d(e,t,n,i){n||(n=c);var a,o,r={};if(e)for(a in t)!t.hasOwnProperty(a)||i&&i[a]||(o=t[a],a in e&&(e[a]===o||a in r&&r[a]===o)||("object"==typeof e[a]&&null!==e[a]?e[a]=d(e[a],o,n):e[a]=n(o)));return e}function c(e,t){if(!e||"object"!=typeof e||e instanceof Date||e.nodeType||e.window==e)return e;var n,i,a;if(e instanceof Array||Array.isArray&&Array.isArray(e))for(n=[],i=0,a=e.length;i<a;++i)i in e&&n.push(c(e[i]));else n={};return d(n,e,c,t)}var u,p={nonPointerFocusListeners:function(){var e,t,n=!1,i=!1,a=!1,o=!1,r=!1;function s(){clearTimeout(e),n=!0;for(var t=document.querySelectorAll(".p_bumpUI"),i=0;i<t.length;i++)p.className(t[i],"","nonPointerFocus");o=!1,e=setTimeout(l,250)}function l(){n=!1}function d(){if(!a&&!n&&!i&!o){for(var e=document.querySelectorAll(".p_bumpUI"),t=0;t<e.length;t++)p.className(e[t],"nonPointerFocus");o=!0}}function c(){clearTimeout(t),i=!0,t=setTimeout(function(){i=!1},250)}return{addNonPointerFocusListeners:function(){r||(window.PointerEvent?document.addEventListener("pointerdown",s,!0):(document.addEventListener("touchstart",s,!0),document.addEventListener("mousedown",s,!0)),window.addEventListener("focus",c),document.addEventListener("focus",d,!0),r=!0)},removeNonPointerFocusListeners:function(){window.PointerEvent?document.removeEventListener("pointerdown",s,!0):(document.removeEventListener("touchstart",s,!0),document.removeEventListener("mousedown",s,!0)),window.removeEventListener("focus",c),document.removeEventListener("focus",d,!0),r=!1},setMovingFocus:function(){a=!0,setTimeout(function(){a=!1},100)},hasNonPointerFocus:function(){return o}}}(),hasClass:function(e,t){return e&&(e.className+"").indexOf(t)>-1},throttleFn:function(e){var t=!1,n=function(){t=!1};return function(i){t||(e(i),t=!0,setTimeout(n,500))}},multiAddEventListener:function(e,t,n,i){for(var a="object"==typeof t?t:t.split(/\s+/g),o=0;o<a.length;o++)e.addEventListener(a[o],n,i)},className:function(e,t,n){if(e){var i,a,o,r=e.className;if(""!==r)r=r.replace((i=n||"",a=t,o=i+" "+a,o=o.trim().replace(/\s+/g,"\\b|\\b"),new RegExp("\\b"+o+"\\b","g")),"").trim()+" "+t,e.className=r.trim().replace(/\s+/g," ");else e.className=t}},hoverMoveAction:function(e,t,n){n=!!n,window.PointerEvent?e.addEventListener("pointermove",function(e){"mouse"==e.pointerType&&t(e)},n):e.addEventListener("mousemove",t,n)},hoverLeaveAction:function(e,t,n){n=!!n,window.PointerEvent?e.addEventListener("pointerleave",function(e){"mouse"==e.pointerType&&t(e)},n):e.addEventListener("mouseleave",t,n)},downAction:function(e,t,n){var i;return n=!!n,window.PointerEvent?e.addEventListener("pointerdown",t,n):(i=function(n){t(n),e.focus(),n.preventDefault()},e.addEventListener("touchstart",i,n),e.addEventListener("mousedown",t,n)),i},removeDownAction:function(e,t,n,i){i=!!i,window.PointerEvent?e.removeEventListener("pointerdown",t,i):(e.removeEventListener("touchstart",n,i),e.removeEventListener("mousedown",t,i))},upAction:function(e,t,n){n=!!n,window.PointerEvent?e.addEventListener("pointerup",t,n):(e.addEventListener("touchend",t,n),e.addEventListener("mouseup",t,n))},removeUpAction:function(e,t,n){n=!!n,window.PointerEvent?e.removeEventListener("pointerup",t,n):(e.removeEventListener("touchend",t,n),e.removeEventListener("mouseup",t,n))},createSVGElement:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var i in t)t.hasOwnProperty(i)&&n.setAttributeNS(null,i,t[i]);return n},isObjectEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},mixin:d,clone:c,hasVideo:(u=document.createElement("video"),!(!u||!u.canPlayType)),getWrapper:function(e,t){t||(t=1);var n="position:relative;z-index:"+t+";height:100%;width:100%;";n+="padding-bottom:"+(e.superResponsive?"56.25%":"0");var i=document.createElement("div");return i.setAttribute("style",n),i},merge:function(){var e=c(arguments[0]);if(e)for(var t=1;t<arguments.length;t++)arguments[t]&&(e=d(e,arguments[t],c));return e},each:function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},pageOffset:function(e){var t=e.getBoundingClientRect(),n=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset;return{top:t.top+i,left:t.left+n}},getBumpStylesheet:function(){var e=document.getElementById("bump_stylesheet");if(!e){var t=document.getElementsByTagName("head")[0];(e=document.createElement("link")).id="bump_stylesheet",e.rel="stylesheet",e.href="https://emp.bbci.co.uk/emp/assets/2.2.6/bump-4.css",t.appendChild(e)}return e.sheet},getDynamicStylesheet:function(){var e=document.getElementById("bump_dynamic_stylesheet");if(!e){var t=document.getElementsByTagName("head")[0];(e=document.createElement("style")).id="bump_dynamic_stylesheet",t.appendChild(e)}return e.sheet},deleteCssRulesContaining:function(e,t){for(var n=e.cssRules.length-1;n>=0;n--)for(var i=e.cssRules[n].cssText,a=0;a<t.length;a++)if(-1!=i.indexOf(t[a])){e.deleteRule(n);break}},addEmbeddedMedia:function(){window.embeddedMedia?(window.embeddedMedia.playerInstances||(window.embeddedMedia.playerInstances={}),window.embeddedMedia.players||(window.embeddedMedia.players=[]),isNaN(window.embeddedMedia.playerInits)&&(window.embeddedMedia.playerInits=0)):window.embeddedMedia={players:[],playerInstances:{},playerInits:0};var e=window.embeddedMedia;if(e.openCallbacks||(e.openCallbacks=[],e.closedCallbacks=[],e.opened=function(t){for(var n=0;n<e.openCallbacks.length;n++)e.openCallbacks[n](t)},e.closed=function(t){for(var n=0;n<e.closedCallbacks.length;n++)e.closedCallbacks[n](t)}),e.addPlayer||(e.addPlayer=function(t,n){e.playerInstances[t]=n,e.players.push(n)}),e.distributeConfigToPlayers||(e.distributeConfigToPlayers=function(t,n,i){var a=e.api.players();for(var o in a)o!=i&&a.hasOwnProperty(o)&&a[o].distributedConfig(t,n)}),e.processConfigFromPlayer||(e.processConfigFromPlayer=function(t,n,i){e.api.players()[i]._settings.set("ui"==n?{ui:t}:t),e.distributeConfigToPlayers(t,n,i)}),e.language||(e.language=l),!e.demi){if(e.demi={callbacks:[],ua:window.navigator.userAgent.toLowerCase()},window.orb&&window.orb.fig){var t=window.orb.fig.geo;t&&t.isUK&&(e.demi.isUK=1===t.isUK())}if(window.bbcuser&&window.bbcuser.isUKCombined){var n=window.bbcuser.isUKCombined();n.then&&n.then(function(t){e.demi.isUK=t})}var i="unknown",a=window.navigator.connection;if(a){var o=a.effectiveType;i=o?"4g"!=o?"cellular":"":a.type,e.demi.isMobileNetwork="cellular"===i}e.demiHelper={determineConnectionType:function(){}}}return e.chromeCast||(e.chromeCast={castInterface:!1}),e.sendEventToPlayers||(e.sendEventToPlayers=function(t,n,i){e.players.forEach(function(e){e!==i&&e.call(t,n)})}),e}},m=[],g=!1,h=0;function f(e,t){var n=e.exec(t);if(n)return n.shift(),+n[0]}var y={get:function(){var e=window.embeddedMedia.demi,t=e.ua,n=/ edge\//.test(t),i=/chrome/.test(t)&&!n,a=/trident/.test(t),o=/firefox/.test(t),r=/windows phone/.test(t),s="PlayStation 4"==navigator.platform;i&&f(/chrome\/(\d+)(?:\.(\d*))?(?:\.(\d*))?(?:\.(\d*))?/,t),o&&f(/firefox\/(\d+)(?:\.(\d*))?/,t),n&&f(/edge\/(\d+)(?:\.(\d*))?/,t);var l=function(){var e=/mac/.test(t)&&!/like mac os x/.test(t),a={win:/windows/.test(t)&&!r,mac:e,macsafari:/safari/.test(t)&&e&&!i&&!n&&!r,ios:/like mac os x/.test(t),android:/android/.test(t)&&!n,playbook:/playbook/.test(t),opera:/opera/.test(t),blackberry:/blackberry/.test(t)||/bb10/.test(t),winphone:r,kindleSilk:/silk/.test(t),winwebview:/windows nt 10/.test(t)&&/webview/.test(t),win10arm:/windows nt 10\.[0-9]; arm/.test(t),kaios:/kaios/.test(t),phantomjs:/phantomjs/.test(t)};for(var o in a)a[o]&&(a.name=o);if(t.match(/webkit\/(\d*)/)&&(a.webkitVersion=parseFloat(RegExp.$1)),a.macsafari&&(t.match(/version\/[^\d]*([\d|\.]+\d)/),a.safariVersion=parseFloat(RegExp.$1),t.match(/mac os x 10_([\[0-9)][\[0-9)])/),a.macosVersion=parseInt(RegExp.$1,10)),a.ios&&t.match(/os (\d+)/g)&&(a.ios=parseInt(RegExp.$1,10)||a.ios,t.match(/version\/[^\d]*([\d|\.]+\d)/),a.iosSafariVersion=parseFloat(RegExp.$1)),a.android){var s=t.match(/android (\d+(?:[\.\d]*)+)/i);a.androidVersion=s?parseFloat(s[1]):99}return a}(),d={connection:{mobile:e.isMobileNetwork},os:l,hasHlsVodSupport:l.ios||l.macsafari||l.winwebview||l.win10arm||s,hasMseSupport:!!window.MediaSource};d.isMobileDevice=l.ios||l.android||l.blackberry||l.playbook||l.winphone||l.kaios||l.opera,d.isTabletDevice=l.kindleSilk||l.winwebview||l.win10arm||t.match(/ipad/)||t.match(/sm-t/)||t.match(/tablet/),d.os.webkitVersion>600&&navigator.maxTouchPoints>0&&(d.isTabletDevice=!0,d.hasHlsVodSupport=!0),!d.hasMseSupport&&(d.os.macsafari&&d.os.safariVersion>=1||d.os.webkitVersion>600)&&(d.isMobileDevice=!0),a&&!l.winphone&&(d.isMobileDevice=!1,d.isTabletDevice=!1),d.isMobileOrTablet=d.isMobileDevice||d.isTabletDevice,d.os.blackberry&&!g&&(g=!0,t.match(/version\/\d+.(\d+.\d+)/),parseFloat(RegExp.$1)>3&&m.push("blackberry")),d.os.winphone&&0===h&&(t.match(/windows phone (\d+.\d+)/),(h=parseFloat(RegExp.$1))>=10&&m.push("winphone"));for(var c=0;c<m.length;c++)d.os[m[c]]&&(d.hasHlsVodSupport=!0);d.htmlAudio=d.os.androidVersion>=4.1||d.os.kindleSilk,d.preferHtmlAudio=!1===e.isUK&&d.os.androidVersion>=5;var u=/smart.+tv/.test(t)||/linux; netcast/.test(t);return d.supportedFlash=!d.isMobileOrTablet&&!s&&!u,d.IE11=t.indexOf("trident/7.0")>0,d.supportsSvg=d.hasMseSupport&&!d.os.playbook||d.os.ios>=8||d.os.androidVersion>=4.4&&i||d.IE11,d.supportChromecast=i&&window.chrome,d.hybrid=d.hasMseSupport||!document.documentMode||document.documentMode>=11,d.winXP=t.indexOf("nt 5")>0,d.webgl=function(){try{var e=document.createElement("canvas"),t="probablySupportsContext"in e?"probablySupportsContext":"supportsContext";return t in e?e[t]("webgl")||e[t]("experimental-webgl"):"WebGLRenderingContext"in window}catch(n){return!1}}(),d.support360=d.webgl&&!(l.ios&&l.ios<11)&&!(/(trident\/)|(MSIE\s)/i.test(t)&&!n)&&!(l.macsafari&&l.macosVersion<12),d.mediasetDesktop=!d.isMobileOrTablet&&(a||/windows nt/.test(t)||/x11/.test(t)||d.os.mac),d}};function v(e,t,n){for(var i=0;i<e.changeListeners.length;i++)e.changeListeners[i](t,n)}function b(e){var t=e.settings.ui.colour;p.deleteCssRulesContaining(e.stylesheet,["#"+e.id]),e.stylesheet.insertRule("#"+e.id+".p_toggleOn .p_toggleSlot { background-color: "+t+"; border-color: "+t+"; }",e.stylesheet.cssRules.length),e.stylesheet.insertRule("#"+e.id+" .p_toggleSlider .p_toggleTick { border-color: "+t+"; }",e.stylesheet.cssRules.length),e.stylesheet.insertRule(".nonPointerFocus #"+e.id+":focus { box-shadow: "+t+" 0px 0px 0px 3px inset; }",e.stylesheet.cssRules.length),"#FFFFFF"!=t&&"#ffffff"!=t||e.stylesheet.insertRule(".p_toggleOn .p_toggleSlider { background-color: #000000; }",e.stylesheet.cssRules.length)}var w=function(e,t,n,i,a,o,r){var s=this;this.id=t,this.settings=e,this.locale=r,this.changeListeners=[],this.disabled=!1,this._on=!1,function(e,t,n,i,a,o){var r=e._toggleSetting=document.createElement("div");t&&(r.id=t),r.className=n?"p_toggle_setting "+n:"p_toggle_setting",r.setAttribute("role","checkbox"),r.setAttribute("aria-checked","false"),i&&r.setAttribute("aria-label",i),r.tabIndex=0;var s=document.createElement("div");s.className="p_toggleText";var l=document.createElement("div");l.className="p_toggleHeading",l.textContent=a;var d=document.createElement("div");d.className="p_toggleSubheading",d.textContent=o;var c=document.createElement("div");c.className="p_toggleSlot";var u=document.createElement("div");u.className="p_toggleSlider";var p=document.createElement("div");p.className="p_toggleTick",s.appendChild(l),s.appendChild(d),r.appendChild(s),u.appendChild(p),c.appendChild(u),r.appendChild(c),function(e,t){t.addEventListener("click",function(){e.disabled||e.flip("click")}),t.addEventListener("keydown",function(t){if(!e.disabled){var n=t.keyCode;32!=n&&13!=n||e.flip("keydown")}})}(e,r)}(this,t,n,i,a,o),this.stylesheet=p.getDynamicStylesheet(),this.settings.addSettingsChangedListener(function(){b(s)}),b(s)};w.prototype={getDomNodes:function(){return[this._toggleSetting]},flip:function(e){"true"==this._toggleSetting.getAttribute("aria-checked")?v(this,"turningOff",e):v(this,"turningOn",e)},setOn:function(){this._toggleSetting.setAttribute("aria-checked","true"),p.className(this._toggleSetting,"p_toggleOn"),this._on=!0},setOff:function(){this._toggleSetting.setAttribute("aria-checked","false"),p.className(this._toggleSetting,"","p_toggleOn"),this._on=!1},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},attachChangeListener:function(e){this.changeListeners.push(e)},updateLanguage:function(){}};var P,_=!1,C={addCloseSettingsPanelsListener:function(){if(!_){var e=this;P=function(t){for(var n=document.querySelectorAll(".p_dontCloseSettingsPanel"),i=0;i<n.length;i++)if(n[i]==t.target||n[i].contains(t.target))return;e.closeSettingsPanels()},p.upAction(document,P,!0),_=!0}},removeCloseSettingsPanelsListener:function(){p.removeUpAction(document,P,!0),_=!1},closeSettingsPanels:function(){for(var e=0;e<window.embeddedMedia.players.length;e++)window.embeddedMedia.players[e].playbackSettingsPanel&&window.embeddedMedia.players[e].playbackSettingsPanel.close(),window.embeddedMedia.players[e].call("closedSettingsPanels");this.removeCloseSettingsPanelsListener()},insertSettingsOverlay:function(){var e=document.getElementById("p_settingsOverlay");e||((e=document.createElement("div")).id="p_settingsOverlay",p.upAction(e,function(e){e.preventDefault()}),document.body.appendChild(e),this.settingsOverlay=e)},showOverlay:function(e){this.settingsOverlay.style.backgroundColor=e,p.className(this.settingsOverlay,"p_showing")},hideOverlay:function(){p.className(this.settingsOverlay,"","p_showing")}};function k(e){e.settings.continuousPlay?e.toggleSetting.setOn():e.toggleSetting.setOff(),e.settings.ui.playbackSettingsPanel&&e.settings.ui.playbackSettingsPanel.continuousPlaySetting?e.toggleSettingElement.style.display="block":e.toggleSettingElement.style.display="none"}function E(e){var t=this;p.getBumpStylesheet(),this.id=e._settings.domid,this.player=e,this.settings=this.player._settings,function(e){var t=e.playbackSettingsContainer=document.createElement("div");t.id="p_playbackSettingsContainer_"+e.id,t.className="p_playbackSettingsContainer p_dontCloseSettingsPanel p_bumpUI",t.style.display="none";var n=document.createElement("div");n.className="p_playbackSettingsContainerInner";var i=document.createElement("div");i.className="p_playbackSettingsHeading",i.textContent=window.embeddedMedia.language.t("playbackSettingsHeading",e.settings.locale());var a=document.createElement("div");a.className="p_playbackSettingsColumn";var o=e.toggleSetting=new w(e.settings,"p_autoplayToggle",null,"",window.embeddedMedia.language.t("autoplaySettingHeading",e.settings.locale()),window.embeddedMedia.language.t("autoplaySettingSubheading",e.settings.locale()));o.attachChangeListener(function(t,n){"turningOn"==t?(e.player.settings({continuousPlay:!0}),e.player.sonar.action("playback_settings_continuous_play_toggle_on",n)):(e.player.settings({continuousPlay:!1}),e.player.sonar.action("playback_settings_continuous_play_toggle_off",n))});var r=e.toggleSettingElement=o.getDomNodes()[0],s=document.createElement("div");s.className="p_playbackSettingsContainer_downArrow";var l=document.createElement("button");l.textContent="Close playback settings panel",l.id="p_playbackSettingsContainer_startFocusPusher",p.multiAddEventListener(l,"focus click",function(){e.bottomPanelMode?(e.close(),e.player.trigger({type:"focusPlaybackSettingsButton"})):e.close(!0)});var d=document.createElement("button");d.textContent="Close playback settings panel",d.id="p_playbackSettingsContainer_endFocusPusher",p.multiAddEventListener(d,"focus click",function(){e.bottomPanelMode?(e.close(),e.player.trigger({type:"focusPlaybackSettingsButton"})):e.close(!0)}),n.appendChild(l),n.appendChild(i),n.appendChild(a),a.appendChild(r),n.appendChild(d),t.appendChild(n),t.appendChild(s),document.body.appendChild(t),C.insertSettingsOverlay()}(this),p.nonPointerFocusListeners.addNonPointerFocusListeners(),this.player._settings.addSettingsChangedListener(function(){k(t)}),k(t),window.addEventListener("resize",function(){t.isShowing()&&t.player.call("repositionBumpPlaybackSettingsPanel")})}function x(e,t){if(e)for(var n=0;n<e.length;n++){var i=e[n];if(i){var a=i.kind;if("radioProgramme"==a||"audio"==a||!t&&("programme"==a||"video"==a||"trailer"==a||"360"==a||null==a||""===a))return i}}return null}E.prototype.showPanel=function(e,t){this.bottomPanelMode=!1,C.closeSettingsPanels(),C.addCloseSettingsPanelsListener(),this.playbackSettingsContainer.style.display="",p.className(this.playbackSettingsContainer,"p_panel p_showing","p_bottomPanel"),this.playbackSettingsContainer.style.top=this.player.getTop()+t-this.playbackSettingsContainer.offsetHeight+"px",this.playbackSettingsContainer.style.left=this.player.getLeft()+e-this.playbackSettingsContainer.offsetWidth+"px",this.player.call("bumpSettingsPanelOpen",{type:"playbackSettings"}),this.player.trigger({type:"playbackSettingsPanelOpen"})},E.prototype.repositionPanel=function(e,t){var n=this,i=n.player._container.clientWidth;n.bottomPanelMode?(i>599||n.settings.ui.threeRows&&i>150)&&e&&t&&n.showPanel(e,t):i<199?n.showBottomPanel():(n.playbackSettingsContainer.style.top=n.player.getTop()+t-n.playbackSettingsContainer.offsetHeight+"px",n.playbackSettingsContainer.style.left=n.player.getLeft()+e-n.playbackSettingsContainer.offsetWidth+"px")},E.prototype.showBottomPanel=function(){this.bottomPanelMode=!0,C.closeSettingsPanels(),C.showOverlay(this.settings.ui.playbackSettingsPanel.overlayColour),C.addCloseSettingsPanelsListener(),this.playbackSettingsContainer.style.display="",p.className(this.playbackSettingsContainer,"p_bottomPanel p_showing","p_panel"),this.playbackSettingsContainer.style.top="",this.playbackSettingsContainer.style.left="",this.focus(),this.player.call("bumpSettingsPanelOpen",{type:"playbackSettings"}),this.player.trigger({type:"playbackSettingsPanelOpen"})},E.prototype.close=function(e){p.hasClass(this.playbackSettingsContainer,"p_showing")&&(p.className(this.playbackSettingsContainer,"","p_showing"),C.hideOverlay(),this.player.trigger({type:"playbackSettingsPanelClosed"}),this.player.call("closedPlaybackSettingsPanel",{focusButton:!!e}))},E.prototype.focus=function(){this.toggleSettingElement.focus()},E.prototype.isShowing=function(){return p.hasClass(this.playbackSettingsContainer,"p_showing")},E.prototype.setNonPointerFocus=function(){p.className(this.playbackSettingsContainer,"nonPointerFocus")},E.prototype.removeNonPointerFocus=function(){p.className(this.playbackSettingsContainer,"","nonPointerFocus")};var S={mediasets:{desktop:"pc",cellular:"mobile-cellular-main",mobile:"mobile-phone-main",tablet:"mobile-tablet-main"},legacy_mediasets:{desktop:"legacy-pc",cellular:"legacy-mobile-phone-main",mobile:"legacy-mobile-phone-main",tablet:"legacy-mobile-tablet-main"},findProgramme:x,firstProgramme:function(e,t){return x(e&&e.items,t)},mediationUrls:function(e,t,n){var i="ediatorHref",a=S.mediaSet(t,n);return e["samlM"+i]=e["m"+i]=S.mediatorHref(t,a),t.mediator&&t.mediator.host&&(e.mediator=e.mediator||{},e.mediator.host=t.mediator.host),a},mediaSet:function(e,t){if(e.mediator&&e.mediator.overrideMediaSet)return e.mediator.overrideMediaSet;if("background"==e.product)return"mobile-tablet-main";var n=p.addEmbeddedMedia(),i=e.mediasets=this.mediasets;t&&(i=e.mediasets=this.legacy_mediasets);var a=y.get();return a.mediasetDesktop?i.desktop:n.demi.isMobileNetwork?i.cellular:a.isTabletDevice?i.tablet:i.mobile},mediatorHref:function(e,t){var n={href:"https://{host}/mediaselector/6/select/version/2.0/mediaset/{mediaset}/vpid/{id}/format/json/jsfunc/{callback}",host:"open.live.bbc.co.uk",mediaset:t},i=parseFloat("0.5");i>=0&&i<1&&(Math.random()<i&&(e._inExperiment=!0));p.mixin(n,e.mediator);var a=n.href;return p.each(n,function(e,t){a=a.replace("{"+e+"}",t)}),a}},I={show:function(e){I._embedBox&&I.close(!0);var t=e._settings,n=t.locale(),i=encodeURIComponent(t.product),a=encodeURIComponent(e.playlist.title),o=t.externalEmbedUrl||"";if(o){if(-1!=o.indexOf("{cpid}")&&e._statsObject.clipPID&&(o=o.replace("{cpid}",e._statsObject.clipPID)),-1!=o.indexOf("{vpid}")){var r=S.firstProgramme(e.playlist);r&&(o=o.replace("{vpid}",r.identifier))}o=o.replace("{lang}",n)}else{if(e.playlist.url)var s=e.playlist.url;else t.playlistObject&&(s=t.playlistObject.legacyPlaylist);s&&(o="https://emp.bbc.co.uk/emp/embed/smpEmbed.html?playlist="+encodeURIComponent(s)+"&title="+a+"&product="+i,"en"!=n&&(o+="&lang="+n))}if(o){var l=!t.ui.disableReithFonts;window.embeddedMedia.opened();I._background=document.createElement("div"),I._background.id="embedBackground",I._background.style.cssText="width: 100%;"+"height: 100%;"+"margin: 0;"+"position: fixed;"+"z-index: 10000;"+"top: 0;"+"left: 0;"+"background-color: #000;"+"opacity: 0.5;",I._embedBox=document.createElement("div"),I._embedBox.id="embedBox",I._embedBox.setAttribute("role","alertdialog"),I._embedBox.setAttribute("aria-labelledby","embedMediaTitle"),I._embedBox.setAttribute("aria-describedby","embedMediaDescription");var d="position: fixed;"+"width: 400px;"+"max-width: 90%;"+"height: 160px;"+"bottom: 0;"+"left: 0;"+"top: 0;"+"right: 0;"+"margin: auto;"+"color: white;"+"font-size: 22px;"+"z-index: 10001;"+"background-color: #262626;";document.documentElement.className.indexOf("b-reith-sans-font")>=0&&l?I._embedBox.className="font-family-sans":d+="font-family: helvetica, Arial, sans-serif;",I._embedBox.style.cssText=d;var c=window.embeddedMedia.language,u=c.t("embedTitle",n),p=c.t("embedDescription",n),m=c.t("embedTerms",n),g=c.t("embedClose",n),h=document.createElement("span");h.id="embedMediaTitle",h.style.cssText="position: absolute;"+"left: 0;"+"margin-left: 10%;"+"margin-top: 6%",h.textContent=u,I._embedBox.appendChild(h);var f=document.createElement("span");f.id="embedMediaDescription",f.style.cssText="display: none",f.setAttribute("aria-hidden","true"),f.textContent=p,I._embedBox.appendChild(f);var y='<iframe width="400" height="500" frameborder="0" src="'+o+'"></iframe>';t.externalEmbedCode&&(y=(t.externalEmbedCode+"").replace("{url}",o));var v=document.createElement("input");v.id="embedText",v.type="text",v.value=y,v.style.cssText="position: absolute;"+"width: 80%;"+"height: 30px;"+"top: 50%;"+"left: 0;"+"margin-top: -15px;"+"margin-left: 10%;"+"font-size: 14px;"+"color: #848484;",v.addEventListener("click",function(){v.select()}),setTimeout(function(){v.focus()},100),I._embedBox.appendChild(v);var b=document.createElement("a");b.target="_blank",b.href="https://www.bbc.co.uk/usingthebbc/terms-of-use/",b.textContent=m,b.style.cssText="position: absolute;"+"bottom: 0;"+"left: 0;"+"margin-bottom: 6%;"+"margin-left: 10%;"+"font-size: 0.6em;"+"color: #ffffff;"+"text-decoration: none;",I._embedBox.appendChild(b);var w=document.createElement("a");w.setAttribute("aria-label",g),w.href="#",w.textContent="x",w.style.cssText="position: absolute;"+"right: 0px;"+"font-size: 0.8em;"+"top: 0px;"+"margin-top: 10px;"+"margin-right: 10px;"+"color: #ffffff;"+"text-decoration: none;"+"cursor: pointer;",I._embedBox.appendChild(w),w.addEventListener("click",function(e){e.preventDefault(),I.close()}),I._tabList=[v,b,w],I._currentTab=0;for(var P=function(e){switch(e.keyCode||e.which){case 27:e.preventDefault(),I.close();break;case 9:e.preventDefault();var t=I._tabList.length-1;e.shiftKey?I._currentTab=0===I._currentTab?t:I._currentTab-1:I._currentTab=I._currentTab===t?0:I._currentTab+1,setTimeout(function(){I._tabList[I._currentTab].focus()},200)}},_=0;_<I._tabList.length;_++)I._tabList[_].addEventListener("keydown",P);document.body.appendChild(I._background),document.body.appendChild(I._embedBox)}},close:function(e){var t=this;e||window.embeddedMedia.closed(),t._background&&(t._background.parentNode.removeChild(t._background),t._background=void 0),t._embedBox&&(t._embedBox.parentNode.removeChild(t._embedBox),t._embedBox=void 0)}};function T(){return this.includePoster=!0,this._volume=1,this}T.prototype={name:function(){return this._name},uiDefaults:function(e){var t=this._settings,n=t.ui;n.guidance||(n.guidance={}),t.guidanceCleared||!1!==n.guidance.pinRequired&&(n.guidance.pinRequired=!0),e.isMobileOrTablet&&(n.controls||(n.controls={muteButtonOnly:!0}),n.controls.popout=!1,void 0===n.controls.muteButtonOnly&&(n.controls.muteButtonOnly=!0),t.volume=1),1==window.devicePixelRatio||e.connection.mobile||t.lowBandwidth||(n.poster||(n.poster={}),n.poster.densityMultiplier||(n.poster.densityMultiplier=t.saveData?.8:window.devicePixelRatio)),e.supportsSvg&&!1!==n.useHighResIcons&&(n.useHighResIcons=!0);var i="";i=window.getComputedStyle&&this._settings.container?window.getComputedStyle(this._settings.container).direction:this._settings.container.currentStyle.direction,n.cta&&null===n.cta.direction&&(n.cta.direction="rtl"==i?"rtl":"ltr");try{if(/[; ]ck[pn]s_smpSettings=([^\s;]*)/gim.test(" "+document.cookie),RegExp.$1){var a=JSON.parse(decodeURIComponent(RegExp.$1));n.allowAudioControlsToHide|=a.allowAudioControlsToHide,a.controls&&(n.controls||(n.controls={}),n.controls.timeout=a.controls.timeout,n.controls.sizeAdjust=a.controls.sizeAdjust,n.controls.spaceControlsPlayback|=a.controls.spaceControlsPlayback,n.controls.experimentalShortcuts|=a.controls.experimentalShortcuts,n.controls.activeStartsAt=a.controls.activeStartsAt,n.controls.chromecastMode=a.controls.chromecastMode,n.controls.speed|=a.controls.speed),a.subtitles&&(n.subtitles||(n.subtitles={}),n.subtitles.contrast=a.subtitles.contrast,n.subtitles.sizeAdjustment=a.subtitles.sizeAdjustment,n.subtitles.supportLiveSubtitles|=a.subtitles.supportLiveSubtitles),a.quality&&(t.quality=a.quality)}}catch(o){}},destroy:function(){this._container&&(this._container.innerHTML="")},call:function(){},play:function(e){this.call("play",e)},stop:function(){this.call("stop")},suspend:function(){this.call("suspend")},pause:function(){this.call("pause")},next:function(e){this.call("next",e)},previous:function(e){this.call("previous",e)},pauseAt:function(e){e&&(e=e instanceof Array?e:[e],this.call("pauseAt",e))},muted:function(e){return void 0!==e&&(this._muted=e,this.call("muted",e)),this._muted},volume:function(e){return"number"==typeof e&&(this._volume=e,this.call("volume",e)),this._volume},duration:function(){return this._duration},ended:function(){return this._ended},seeking:function(){return this._seeking},paused:function(){return this._paused},kind:function(){return this._kind},mediaItem:function(){return this._mediaItem},loadedPlaylist:function(){return this.playlist},currentTime:function(e){return"number"==typeof e&&this.call("currentTime",e),this._currentTime},showSubtitles:function(e){this.call("showSubtitles",e)},setData:function(e){if(e)if(e instanceof Array)for(var t=0;t<e.length;t++)this.call("setData",e[t]);else this.call("setData",e)},playbackRate:function(e){return"number"==typeof e&&e>0&&(this._playbackRate=e,this.call("playbackRate",e)),this._playbackRate},updateQuality:function(e){this.call("updateQuality",e)},onAdsProcessed:function(e){this.call("onAdsProcessed",e)},webcastData:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];"[object Date]"===Object.prototype.toString.call(n)&&(e[t]=n.getTime()/1e3)}},loadPluginWithCheck:function(e,t){for(var n=["eavis","endSlate"],i=e.url+"",a=0;a<n.length;a++)if(i.indexOf(n[a])>-1)return;if(0===i.indexOf("name:")){var o=this._settings.namedPlugins,r=!1,s=i.split("name:");if(2==s.length)for(var l in o)if(s[1]===l){e.url=o[l],r=!0;break}if(!r)return}var d=this._settings.pluginUpgrades&&this._settings.pluginUpgrades[this._name];if(d){var c=d[e.url];if(c){e.url=c.url;var u=c.module;!0!==u&&!1!==u||(e.module=u)}}this.call(t||"loadPlugin",e)},before:function(){var e=this,t=e._settings;e.ready=!0,e.volume(t.volume),e.muted(t.muted),e._lastSignificant=t.startTime},started:function(e){var t=this,n=t._settings;e.supportChromecast&&n.allowCasting&&window.embeddedMedia.chromeCast.castInterface&&window.embeddedMedia.chromeCast.castInterface.initialised&&window.embeddedMedia.chromeCast.castInterface.sendCastIconState(),window.addEventListener?window.addEventListener("beforeunload",function(){t.call("stop",{destroy:!0})}):window.attachEvent&&window.attachEvent("onbeforeunload",function(){t.call("stop",{destroy:!0})});var i=window.embeddedMedia.parentalGuidance;i.updateCallbacks.push(function(e){n.guidance=e,e.noPin=n.guidanceCleared,t.call("updateGuidance",e)}),i.closedCallbacks.push(function(e){t.call("guidanceClosed",[e]),t.resizePlayer&&(t.resizePlayer(),setTimeout(function(){t.resizePlayer&&t.resizePlayer()},500)),"html"==t.type&&t._gCalled&&e&&!t._lockClicked&&t.play(!0),t._gCalled=!1})},processEvent:function(e,t,n){var i=e.type;t=t||{};var a=this;for(var o in t)"type"!=o&&(e[o]=t[o],"currentDuration"==o&&(e.duration=t[o]));var r=window.embeddedMedia.chromeCast.castInterface;switch(i){case"ccRequestSession":r.requestSession();break;case"ccLoadMedia":r.loadMedia(this);break;case"ccPause":r.pause();break;case"ccPlay":r.play();break;case"ccSeek":r.seek(n.seekTime);break;case"ccSubsOn":r.subtitlesOn();break;case"ccSubsOff":r.subtitlesOff();break;case"ccVolume":r.setVolume(n.volume);break;case"ccMuted":r.setMuted(n.muted);break;case"timeupdate":if(a._currentTime=t.currentTime,a._duration=t.duration,Math.abs(a._currentTime-a._lastSignificant)>a._settings.significantTime){var s={type:"significanttimeupdate"};for(o in t)"type"!=o&&(s[o]=t[o]);a._lastSignificant=a._currentTime,a.trigger(s)}break;case"seeked":a._seeking=!1,"number"==typeof t.currentTime&&(a._currentTime=t.currentTime);break;case"seeking":a._seeking=!0,"number"==typeof t.currentTime&&(a._currentTime=t.currentTime);break;case"ratechange":a._playbackRate=t.playbackRate;break;case"playlistEnded":case"ended":a._playing=!1,a._ended=!0;break;case"tryingToPlay":a._paused=!1;break;case"pause":a._paused=!0;break;case"playing":a._playing=!0,a._paused=!1,a._ended=!1,a._kind=e.kind;break;case"playlistLoaded":a._playing=!1,a._seeking=!1,a._paused=!0,a._ended=!1,a.playlist=t.playlist;var l=a.reloadScope;l&&l.loadingData&&!l.loadingData.playlist&&(l.loadingData.playlist=l.loadingData.now());break;case"mediaItemChanged":a._currentTime=0,a._lastSignificant=0,a._mediaItem=e.mediaItem;break;case"linkRequest":"managePIN"!==t.type&&"PGinfo"!==t.type||window.open("//www.bbc.co.uk/iplayer/guidance","pg");break;case"embed":a.playlist&&(a._restoreFocus=!0,I.show(a));break;case"setPIN":window.embeddedMedia.parentalGuidance.setPIN(t.PIN);break;case"setGuidanceSkipped":window.embeddedMedia.parentalGuidance.setAgeConfirmation(t.skipped);break;case"guidanceLocked":window.embeddedMedia.parentalGuidance.setLocked(t.locked,!0);break;case"guidanceClosed":window.embeddedMedia.parentalGuidance.close(void 0,!0);break;case"setUnder16Permission":window.embeddedMedia.parentalGuidance.setUnder16Permission(t.hasPermission);break;case"configFromPlayer":window.embeddedMedia.processConfigFromPlayer(e.config,"",a._settings.domid);break;case"uiConfigFromPlayer":window.embeddedMedia.processConfigFromPlayer(e.config,"ui",a._settings.domid);break;case"addBumpPlaybackSettingsPanel":a.playbackSettingsPanel||(a.playbackSettingsPanel=new E(a));break;case"showBumpPlaybackSettingsPanel":a.playbackSettingsPanel&&(a.playbackSettingsPanel.showPanel(e.x,e.y),e.nonPointerFocus?a.playbackSettingsPanel.setNonPointerFocus():a.playbackSettingsPanel.removeNonPointerFocus(),p.nonPointerFocusListeners.setMovingFocus(),a.playbackSettingsPanel.focus());break;case"repositionBumpPlaybackSettingsPanel":a.playbackSettingsPanel&&a.playbackSettingsPanel.repositionPanel(e.x,e.y);break;case"closeSettingsPanels":C.closeSettingsPanels()}},setPoster:function(e,t){this.ready&&e&&this.call("setPoster",{url:e,effect:t})},getLeft:function(){return p.pageOffset(this._container).left},getTop:function(){return p.pageOffset(this._container).top},showBumpPlaybackSettings:function(){this.playbackSettingsPanel&&this.playbackSettingsPanel.showBottomPanel()},settings:function(e){return e&&(this._settings.set(e),this.updateConfig(e)),this._settings},persistSettings:function(){},queuePlaylist:function(){},setPreviousPlaylist:function(){},updateMediaset:function(){console.error("updateMediaset does nothing")},loadPlaylist:function(){},resetForPlaylist:function(){},captureIntent:function(){},updateUiConfig:function(){},updateConfig:function(){},distributeConfig:function(){},focusButton:function(){}};var L={iplayer:{guidanceCleared:!1,siteID:"iPlayer",defaultUiClass:"iplayer",ui:{guidance:{displayContinuousGuidanceInQueuePlaylist:!1}}},news:{ui:{colour:"#bb1919",alternateColour:"#bb1919",cta:{mode:"duration"}},preferPlainOverDash:!0,guidanceCleared:!0,siteID:"News",defaultUiClass:"news"},sport:{ui:{colour:"#eed71c",foreColour:"#000000",alternateColour:"#0087ff",alternateForeColour:"#ffffff",accessibility:{enhanceBrightColoursContrast:!0}},siteID:"Sport",defaultUiClass:"sport",guidanceCleared:!0},background:{muted:!0,autoplay:!0},generic:{ui:{colour:"#0071F1",foreColour:"#FFFFFF"},guidanceCleared:!0}};var A={locale:{lang:"en"},subtitles:{supportLiveSubtitles:!0},thumbnail:{enabled:!0},colour:"#ff4c98",foreColour:"#ffffff",alternateColour:"#f54997",alternateForeColour:"#ffffff",guidance:{pgColour:"#ff4c98",pgSeparatorColour:"#252833",pgBackgroundColour:"#0c101c"},cta:{direction:null},playbackSettingsPanel:{enabled:!1,continuousPlaySetting:!1,overlayColour:"rgba(48,48,48,0.6)"},poster:{availableWidths:""}},M={playlist:"",startTime:0,volume:.7,overrideHoldingImage:"",product:"iplayer",today:new Date,guidance:{},mediator:{},experimentalDashPercentage:parseFloat("0"),includeAppClickHandler:!0,plugins:{toLoad:[]},quality:"hd",uiClass:"",enableStatsReporting:!0,autoplay:!1,preload:"",enableRdotReporting:!0,enableSonarReporting:!0,enableAtiReporting:!0,statsObject:{},embedPageURL:location.href,forceGuidance:"",appName:"",appType:"",counterName:"smp.player.page",siteID:"",significantTime:10,playerType:"",namedPlugins:{"dfpAds.js":"//emp.bbci.co.uk/plugins/dfpAdsHTML/5.9.2/js/dfpAds.js","continuousPlay.js":"//emp.bbci.co.uk/plugins/onwardJourneyHTML/2.8.3/js/onwardJourney.js","preview.js":"//emp.bbci.co.uk/plugins/preview/1.1.0/js/preview.js","onwardJourney.js":"//emp.bbci.co.uk/plugins/onwardJourneyHTML/2.8.3/js/onwardJourney.js","smp-ads-plugin-toucan.js":"//emp.bbci.co.uk/plugins/toucanAds/1.9.4/smp-ads-plugin-toucan.js","OnwardJourneyToucan.js":"//emp.bbci.co.uk/plugins/toucanOj/1.6.0/live/OnwardJourneyToucan.js","audioSegments.js":"//emp.bbci.co.uk/plugins/adhoc/0.3/Segments.js","smp-subs-config-plugin.js":"//emp.bbci.co.uk/plugins/subsConfig/0.4.2/smp-subs-config-plugin.js"},pluginUpgrades:{toucan:{"//emp.bbci.co.uk/plugins/dfpAdsHTML/5.9.2/js/dfpAds.js":{url:"//emp.bbci.co.uk/plugins/toucanAds/1.9.4/smp-ads-plugin-toucan.js",module:!0},"//emp.bbci.co.uk/plugins/onwardJourneyHTML/2.8.3/js/onwardJourney.js":{url:"//emp.bbci.co.uk/plugins/toucanOj/1.6.0/live/OnwardJourneyToucan.js",module:!0}}},suppressType:[],suppressItemKind:[],responsive:!0,ui:{},webcastData:{},liveEnvironment:"true"=="true",over16:!1,under16:!1,backgroundSettings:{},threeSixty:!1,disablePreload:!1,embeddedOffsite:!1,androidReceiverCompatible:!1};function N(e,t,n){"set"!=t&&"locale"!=t&&"playingAudio"!=t&&"posterUrl"!=t&&("playlistObject"==t||"today"==t?e[t]=n:"object"==typeof n?e[t]="object"==typeof M[t]?p.merge(e[t],n):n:"object"!=typeof e[t]&&(e[t]=n))}var O=[320,384,432,480,512,608,640,688,720,768,800,832,976,1024,1376,1920],D=[180,216,243,270,288,342,360,387,405,432,450,468,549,576,774,1080],B=new RegExp("^//|^http[s]{0,1}://","i");var R={192:{l:"108",s:"192",p:"288"},224:{l:"126",s:"224",p:"336"},256:{l:"144",s:"256",p:"384"},320:{l:"180",s:"320",p:"480"},368:{l:"207",s:"368",p:"552"},416:{l:"234",s:"416",p:"624"},480:{l:"270",s:"480",p:"720"},512:{l:"288",s:"512",p:"768"},608:{l:"342",s:"608",p:"912"},640:{l:"360",s:"640",p:"960"},688:{l:"387",s:"688"},720:{l:"405",s:"720"},768:{l:"432",s:"768"},800:{l:"450",s:"800"},832:{l:"468",s:"832"},976:{l:"549",s:"976"},1376:{s:"1376",l:"774"},1920:{l:"1080",s:"1920"}};var U,F,j,H=function(e){return this.SettingsChangedListeners=[],this.init(e)};H.prototype={set:function(e,t){var n=this,i=n.locale();if("object"==typeof e)for(var a in e)e.hasOwnProperty(a)&&N(n,a,e[a]);for(a in i!=n.locale()&&window.embeddedMedia.language.load(n.locale()),n.webcastData)if(n.webcastData.hasOwnProperty(a)){var o=n.webcastData[a];"[object Date]"===Object.prototype.toString.call(o)&&(n.webcastData[a]=o.getTime()/1e3)}if(n.isBSTime=function(e){e&&e.getFullYear||(e=new Date);var t=Math.floor(1.25*e.getFullYear()),n=e.valueOf(),i=new Date(n);i.setMonth(2),i.setDate(31-(t+4)%7),i.setUTCHours(1),i.setUTCMinutes(0),i.setUTCSeconds(0);var a=new Date(n);return a.setMonth(9),a.setDate(31-(t+1)%7),a.setUTCHours(1),a.setUTCMinutes(0),a.setUTCSeconds(0),e>i&&e<a}(n.today),this.fireSettingsChangedListeners(),!t&&"continuousPlay"in e){var r={continuousPlay:n.continuousPlay};window.embeddedMedia.distributeConfigToPlayers(r,"",n.domid)}return n},fireSettingsChangedListeners:function(){for(var e=0;e<this.SettingsChangedListeners.length;e++)this.SettingsChangedListeners[e](this)},addSettingsChangedListener:function(e){this.SettingsChangedListeners.push(e)},init:function(e){var t=this,n=p.clone(M);for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);"object"!=typeof e&&(e={});var a=e.product||M.product,o=L[a]||L.generic;for(i in o){if(o.hasOwnProperty(i))N(t,i,o[i])}t.ui=p.merge(p.clone(A),o.ui);var r=window.navigator.connection;r&&t&&!1!==t.saveData&&(t.saveData=!!r.saveData);var s="";try{s=document.cookie+""}catch(m){}if(!e.allowTracking){for(var l=!1,d=["bbc.co.uk","bbc.com","britbox.com","bbcconnectedstudio.co.uk"],c=0;c<d.length;c++)-1!==location.host.indexOf(d[c])&&(l=!0);l||(t.noTracking=!0)}if(s.match(/NO-SA=1/)&&(t.noTracking=!0),s.match(/html5Debug=true/)&&(t.html5Debug=!0),!1!==e.enableToucan){var u=(""+e.counterName).split(".")[0];"weather"!=u&&"food"!=u||(t.enableToucan=!0)}return e.skipInterval&&(e.ui?e.ui.skipInterval||(e.ui.skipInterval=e.skipInterval):e.ui={skipInterval:e.skipInterval}),t.set(e)},locale:function(){return this.ui.locale.lang},playingAudio:function(){if(this.willPlayAudio)return!0;var e=S.firstProgramme(this.playlistObject);return!e||("radioProgramme"==e.kind||"audio"==e.kind)},posterUrl:function(e){if(!this._poster&&this.playlistObject&&this.playlistObject.holdingImage){var t=this.playlistObject.holdingImage;if(t.url&&t.orientation)return function(e,t,n){var i=e.orientation.charAt(0),a=0;t&&t.width&&(a=t.width()),(0===a||isNaN(a))&&(a=768),n&&n.densityMultiplier&&(a*=n.densityMultiplier);var o=[];for(var r in R)R.hasOwnProperty(r)&&o.push(Number(r));for(var s=o.length-1;s>0&&!(a/o[s]>.98);s--);var l="p"==i?"n":R[o[s]][i],d=o[s]+"x"+l;return e.url.replace(/[\${]recipe}?/,d)}(t,e,this.ui.poster)}return function(e,t,n){var i,a=!(!n||!n.availableWidths||"string"!=typeof n.availableWidths)&&n.availableWidths,o=a?a.split(","):O;if(e&&B.test(e)){var r=0;t&&t.width&&(r=t.width()),(0===r||isNaN(r))&&(r=768),n&&n.densityMultiplier&&(r*=n.densityMultiplier);for(var s=o.length-1;s>0&&!(r/o[s]>.98);s--);var l=O[s]+"x"+D[s];return i=a||o[s]<=1024?o[s]:1536,e.replace(/[\${]recipe}?/,l).replace(/[\${]width}?/,i)}}(this._poster||this.playlistObject&&this.playlistObject.holdingImageURL||this.overrideHoldingImage,e,this.ui.poster)}};var G,W,z,q,V,$,K,Y,J,Q,X,Z,ee,te,ne,ie,ae,oe,re={WindowState:{}};function se(){return this.duration=0,this.isLive=!1,this.hasPlayed=!1,this.hasInitiated=!1,this.hasSetMediaItem=!1,this.oldProperties=[],this.sessionProperties={},this._windowState="in-situ",this}function le(e,t){for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t[n]=e[n]);return t}function de(e,t){if(e._echo){t||(t={connections:[]}),e.delayedMediaSet||e.end(),e.durationSet=!1,e.isLive=t.isLive;var n=e.isLive?re.MediaConsumptionMode.LIVE:re.MediaConsumptionMode.ON_DEMAND,i="audio"==t.type?re.AvType.AUDIO:re.AvType.VIDEO,a=e.player.player._statsObject||{};a.overrideConsumptionMode&&(n=a.overrideConsumptionMode);var o=e.media=new F(i,n),r=t.identifier,s=t.versionID,l=t.serviceID;if(a.overrideVersionPID&&(s=a.overrideVersionPID),r)s||l||o.setVpId(r);else if(a.nonPipsContentId)o.setNonPipsContentId(a.nonPipsContentId);else if(a.playlistURL){var d=(a.playlistURL+"").replace(/\W+/gim,"-");o.setNonPipsContentId(d)}s&&o.setVersionId(s),l&&o.setServiceId(l),e.playlistName&&o.setPlaylist(e.playlistName),e.title&&o.setName(e.title),e.parentPID&&(e.parentPIDType==re.PIPsType.EPISODE&&o.setEpisodeId(e.parentPID),e.parentPIDType==re.PIPsType.CLIP&&o.setClipId(e.parentPID)),e.episodePID&&(o.setType(re.PIPsType.EPISODE),o.setEpisodeId(e.episodePID)),e.clipPID&&(o.setType(re.PIPsType.CLIP),o.setClipId(e.clipPID)),e.brandPID&&o.setBrand(e.brandPID),e.seriesPID&&o.setSeries(e.seriesPID);var c=e.player.player.playlist;c&&c.masterbrand&&c.masterbrand.id&&o.setProducerByMasterbrand(c.masterbrand.id),a.producer&&o.setProducer(a.producer),a.wsPartnerId&&o.setWsPartnerId(a.wsPartnerId),a.castingDeviceReferrer&&o.setCastingDeviceReferrer(a.castingDeviceReferrer),c&&c.hasAds&&o.setAdsEnabled(!0),e.player._settings.embeddedOffsite&&o.setIsEmbedded(!0);try{e.echo.setMedia(o),e.hasSetMediaItem=!0}catch(u){e.hasSetMediaItem=!1,console.log("SON",u)}}else e.delayedMediaSet=!0}function ce(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}(function(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var n=Array(80),i=1732584193,a=-271733879,o=-1732584194,r=271733878,s=-1009589776,l=0;l<e.length;l+=16){for(var d=i,c=a,u=o,p=r,m=s,g=0;g<80;g++){n[g]=g<16?e[l+g]:ge(n[g-3]^n[g-8]^n[g-14]^n[g-16],1);var h=me(me(ge(i,5),ue(g,a,o,r)),me(me(s,n[g]),pe(g)));s=r,r=o,o=ge(a,30),a=i,i=h}i=me(i,d),a=me(a,c),o=me(o,u),r=me(r,p),s=me(s,m)}return Array(i,a,o,r,s)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e),8*e.length))}function ue(e,t,n,i){return e<20?t&n|~t&i:e<40?t^n^i:e<60?t&n|t&i|n&i:t^n^i}function pe(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function me(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function ge(e,t){return e<<t|e>>>32-t}function he(e){return function(e){for(var t,n="0123456789abcdef",i="",a=0;a<e.length;a++)t=e.charCodeAt(a),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}(ce(function(e){for(var t,n,i="",a=-1;++a<e.length;)t=e.charCodeAt(a),n=a+1<e.length?e.charCodeAt(a+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),a++),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}(e)))}se.prototype={initComplete:function(e){var t=this;if(!t.delayed){t.delayed=[];var n=function(e){return function(){var n=arguments;t.delayed.push(function(){t.echo[e]&&t.echo[e].apply(t.echo,n)})}};t.echo={userActionEvent:n("userActionEvent"),setMedia:n("setMedia"),setMediaPlayer:n("setMediaPlayer"),setMediaLength:n("setMediaLength"),setPlayerVersion:n("setPlayerVersion"),setPlayerName:n("setPlayerName"),setCounterName:n("setCounterName"),addProperty:n("addProperty"),setPlayerIsSubtitled:n("setPlayerIsSubtitled"),setPlayerLocation:n("setPlayerLocation"),setPlayerPlaybackSpeed:n("setPlayerPlaybackSpeed"),setPlayerVolume:n("setPlayerVolume"),setPlayerWindowState:n("setPlayerWindowState"),setProducer:n("setProducer"),setPlayerPosition:n("setPlayerPosition"),setPlayerLaunchReason:n("setPlayerLaunchReason"),setPlayerAutoMode:n("setPlayerAutoMode"),setProducerByMasterbrand:n("setProducerByMasterbrand"),avPlayEvent:n("avPlayEvent"),avPlayInitiatedEvent:n("avPlayInitiatedEvent"),avPauseEvent:n("avPauseEvent"),avEndEvent:n("avEndEvent"),avSeekEvent:n("avSeekEvent"),avBufferEvent:n("avBufferEvent")}}if(j&&!t._echo){var i=e._settings,a=e.name().replace(/-/gm,""),o=i.appName&&""!==i.appName?i.appName:a,r=i.appType&&""!==i.appType?i.appType:re.ApplicationType.WEB,s={},l=e.player._statsObject||{};s[G.COMSCORE_ENABLED]=!1,i.liveEnvironment||(s[G.DEBUG_MODE]="info"),s[G.BARB_ENABLED]=function(e){var t=!1,n=e.counterName+"";n.indexOf("iplayer.tv")>=0&&(t=!0);return e.enableBarbReporting||t&&!1!==e.enableBarbReporting}(i),s[G.BARB_DEBUG]=!1,s[G.BARB_SITE_CODE]=i.liveEnvironment?"bbcdotcom":"bbcdotcomtest",t.bbcComOption&&(s[G.KEEPALIVE_DURATION]=2147483647);var d=l.echoProfile||"public_service";s[G.REPORTING_PROFILE]=d,s[G.USE_ESS]=!0,i.liveEnvironment||(s[G.ESS_HOSTNAME]="ess.test.api.bbci.co.uk",s[G.REMOTE_CONFIG_URL]="https://mybbc-analytics.stage.files.bbci.co.uk/analytics-remote-config/"),s[G.ATI_ENABLED]=i.enableAtiReporting,s[G.ATI_FORCE_HTTPS]=!0,l.deviceId&&(s[G.ECHO_DEVICE_ID]=l.deviceId),l.destination&&(s[G.DESTINATION]=l.destination);try{t._echo=new j(o,r,s,null,function(){var n=t._echo;t.echo=n,U&&n.setMediaPlayer(new U),i.appVersion&&n.setAppVersion(i.appVersion);try{t.player.player._version&&t.echo.setPlayerVersion(t.player.player._version)}catch(r){}t.processNewSettings(),t.volume(e.volume()),n.setPlayerPlaybackSpeed&&n.setPlayerPlaybackSpeed(1);try{n.setPlayerName(a)}catch(r){}n.setPlayerDelegate({getPosition:function(){return t.currentTime()},getTimestamp:function(){return t.currentTime(!0)}}),t.delayedMediaSet&&(de(t,t.player.player._mediaItem),t.delayedMediaSet=!1);for(var o=0;o<t.delayed.length;o++)t.delayed[o]()})}catch(c){console.log("SON",c)}}},report:function(e,t){var n=this;(n.hasSetMediaItem||n.delayedMediaSet)&&(isNaN(t)||!n.bbcComOption?t=n.currentTime():n.isLive&&(t=0),n.echo["av"+e+"Event"](t),n.player._settings.liveEnvironment||console.log("av"+e+"Event",t))},noPlayerAction:function(e,t,n,i){var a=this;if(a.echo)a.action(e,t,n);else{if(!a.nonPlayerEcho&&j){i||(i={});var o={};o[G.REPORTING_PROFILE]="public_service";var r=i.appName&&""!==i.appName?i.appName:name,s=i.appType&&""!==i.appType?i.appType:re.ApplicationType.WEB;a.nonPlayerEcho=new j(r,s,o),a.nonPlayerEcho.setCounterName(i.counterName||"smp.no-player.page")}a.nonPlayerEcho&&a.nonPlayerEcho.userActionEvent(e,t,le(n,{}))}},end:function(){(this.hasPlayed||this.hasInitiated)&&this.report("End")},action:function(e,t,n){this.echo&&this.echo.userActionEvent(e,t,le(n,{}))},newPlayer:function(e,t){var n=this;(n.player=e,t||n.boundEvents)&&(n.boundEvents=!0,e[t?"bind":"unbind"]("durationchange initialised mediaItemChanged SonarInitiatedEvent playing playlistLoaded loadedmetadata playlistLoading SonarSeekingEvent SonarAdEvent SonarEndEvent SonarPauseEvent SonarPlayEvent SonarBufferEvent error SonarResumeEvent SonarSeekEvent SonarUserActionEvent volumechange uiinfo fullscreenEnter fullscreenExit picInPicStarted picInPicStopped statsConfigChanged ratechange",{sonarReporter:n},n.eventHandler),n.initComplete(e))},init:function(e,t,n){var i=this;i.bbcComOption=n;var a=function(e){if(e&&(U=e.MediaPlayer,F=e.Media,j=e.EchoClient,re=e.Enums,G=e.ConfigKeys,W=e.Environment,F&&j&&re&&G&&W)){var t=i.player;t&&(t._settings.liveEnvironment||e.Debug.enable(),i.initComplete(t))}};if(window.require&&require.config){var o={},r="echo-13.5.0";n?o[r="echo-2.6.0-avi"]="https://mybbc-analytics.files.bbci.co.uk/echo-client-js/echo-"+"2.6.0-avi"+(e?"":".min"):o[r]="https://mybbc-analytics.files.bbci.co.uk/echo-client-js/echo-"+"13.5.0"+(e?"":".min");var s=!1;try{var l=require.s.contexts._.config.paths;for(var d in l)l.hasOwnProperty(d)&&l[d]==o[r]&&(s=!0,r=d)}catch(c){}s||require.config({paths:o}),require([r],a)}else try{a(window.echo_js)}catch(c){}},eventHandler:function(e,t){var n=t||e.data.sonarReporter;if(n.echo){var i=n.echo;switch(e.type){case"durationchange":n.media&&!n.isLive&&e.duration>0&&(n.durationSet||(i.setMediaLength(1e3*e.duration),n.durationSet=!0));break;case"initialised":n.player.player._version&&i.setPlayerVersion(n.player.player._version);break;case"mediaItemChanged":n.hasPlayed=!1,n.hasInitiated=!1,de(n,e.mediaItem);break;case"SonarInitiatedEvent":i.avPlayInitiatedEvent&&!n.hasInitiated&&(n.hasInitiated=!0,n.report("PlayInitiated"),n.report("Buffer"));break;case"loadedmetadata":break;case"playing":n.hasPlayed=!0;break;case"playlistLoaded":n.processNewSettings();break;case"playlistLoading":n.end();break;case"ratechange":i.setPlayerPlaybackSpeed&&i.setPlayerPlaybackSpeed(e.playbackRate);break;case"SonarSeekingEvent":n.report("Seek",Math.round(1e3*e.before)),n.hasPlayed&&!n.player.paused()&&n.report("Buffer");break;case"error":e&&("critical"==e.severity&&(n.end(),n.hasPlayed=!1,n.hasInitiated=!1,de(n,n.player.player._mediaItem)),2200!=e.code&&2210!=e.code||n.report("Pause"));break;case"SonarAdEvent":var a=n.currentTime(),o=e.detail;i["avAd"+o.report](a,o.labels);break;case"SonarEndEvent":case"SonarPauseEvent":n.report("Pause");break;case"SonarPlayEvent":case"SonarResumeEvent":n.report("Play");break;case"SonarBufferEvent":n.hasPlayed&&n.report("Buffer");break;case"SonarSeekEvent":n.player.paused()?n.bbcComOption&&n.report("Pause"):n.report("Play");break;case"SonarUserActionEvent":n.action(e.actionType,e.controlId,function(e,t){t=t||{};try{var n=[];if(e.media){var i=e.media.getVersionId()||e.media.getServiceId()||e.media.getVpId()||e.media.getNonPipsContentId();i&&n.push("PID="+i)}if(e.player){var a=e.player;if(t.includeVolume&&(n.push("VOL="+(11*a.volume()).toFixed(0)),delete t.includeVolume),!1!==t.playState){var o="unknown",r=a.player;r._seeking?o="seeking":r._ended&&(o="ended"),"unknown"==o&&(r._paused?o="paused":r._playing&&(o="playing")),n.push("PST="+o)}n.push("VPF="+e._windowState),delete t.playState,delete t.time}}catch(s){console.log("SON",s)}return t.metadata||(t.metadata=n.join("~").substr(0,250)),t}(n,e.labels));break;case"volumechange":n.volume(e.muted?0:e.volume);break;case"uiinfo":i.setPlayerIsSubtitled(!!e.subtitles);break;case"fullscreenEnter":n._windowState="fullscreen",i.setPlayerWindowState(re.WindowState.FULL);break;case"fullscreenExit":case"picInPicStopped":n._windowState="in-situ",i.setPlayerWindowState(re.WindowState.NORMAL);break;case"picInPicStarted":n._windowState="picture-in-picture",i.setPlayerWindowState(re.WindowState.PICTUREINPICTURE);break;case"statsConfigChanged":e.counterName&&(n.player._settings.counterName=e.counterName)}}},volume:function(e){e>=0&&e<=1&&this.echo.setPlayerVolume(Math.floor(100*e))},processNewSettings:function(){if(j){var e=this,t=e.player._settings,n=e.player.player._statsObject||{},i=e.player.player.playlist;if(e.echo.setCounterName(t.counterName),i&&i.masterbrand&&i.masterbrand.id&&e.echo.setProducerByMasterbrand(i.masterbrand.id),e.echo.setPlayerLocation&&e.echo.setPlayerLocation(e.player._settings.embeddedOffsite?"external":"internal"),n.playerPosition&&e.echo.setPlayerPosition&&e.echo.setPlayerPosition(n.playerPosition),n.launchReason&&e.echo.setPlayerLaunchReason&&e.echo.setPlayerLaunchReason(n.launchReason),!1!==n.playbackAutoStarted&&!0!==n.playbackAutoStarted||!e.echo.setPlayerAutoMode||e.echo.setPlayerAutoMode(n.playbackAutoStarted),n.producer&&e.echo.setProducer(n.producer),e.parentPID=n.parentPID,e.parentPIDType=re.PIPsType.EPISODE,e.episodePID=n.episodePID,e.clipPID=n.clipPID,e.brandPID=n.brandPID,e.seriesPID=n.seriesPID,e.playlistName=n.playlistName,e.playlistLabels=n.playlistLabels,e.oldProperties.length>0&&(e.echo.removeProperties(e.oldProperties),e.oldProperties=[]),n.playlistLabels)for(var a in n.playlistLabels)n.playlistLabels.hasOwnProperty(a)&&(e.echo.addProperty(a,n.playlistLabels[a]),e.oldProperties.push(a));if(n.sessionLabels)for(a in n.sessionLabels)n.sessionLabels.hasOwnProperty(a)&&!e.sessionProperties[a]&&(e.echo.addProperty(a,n.sessionLabels[a]),e.sessionProperties[a]=!0);i&&i.title&&(e.title=i.title.substr(0,60)),-1!=(n.parentPIDType+"").indexOf("clip")&&(e.parentPIDType=re.PIPsType.CLIP)}},currentTime:function(e){var t=Math.round(1e3*this.player.currentTime());return e?t<1e3*60*60*24*365?0:t:this.isLive?0:t}};var fe="ckns_",ye=[],ve=!1;function be(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function we(e){e.addEventListener&&(ye.push(e),e.addEventListener("keydown",Pe))}function Pe(e){32==e.keyCode&&e.preventDefault()}function _e(){return!!ne}function Ce(){Z="true"==xe(fe,"pgAgeConfirm"),ne=xe(fe,"pgPIN"),ie="true"==xe(fe,"pgUnlocked")}function ke(e,t){return X=[],Z=!1,this.closedCallbacks=[],this.updateCallbacks=[],this.openedCallbacks=[],ae=e||{noPlayerAction:function(){}},this.guidance={},this.isOver16=t.over16,this.isUnder16=t.under16,t.over16&&t.under16&&(this.isOver16=!1),oe=t,this.usingReith=!1,this.reithEnabled=!oe.ui.disableReithFonts,Ce(),this._isLocked=_e()&&!ie,J=window.embeddedMedia.language,this.updateGuidanceState(),this}function Ee(e,t){var n=document.getElementById(e);n.onmouseover=n.onfocus=function(){n.style.transition="0.3s",t?n.style.backgroundColor=oe.ui.guidance.pgColour:n.style.color=oe.ui.guidance.pgColour},n.onmouseout=n.onblur=function(){n.style.transition="0.3s",t?n.style.backgroundColor=oe.ui.guidance.pgBackgroundColour:n.style.color="#ffffff"}}function xe(e,t){try{var n=document.cookie}catch(o){n=""}var i=n.indexOf(e+t+"=");if(-1==i)return null;i=n.indexOf("=",i)+1;var a=n.indexOf(";",i);return-1==a&&(a=n.length),unescape(n.substring(i,a))}function Se(e,t,n,i){var a=new Date;a.setTime(a.getTime()+15552e6*1),a.setDate(15),a.setHours(12),a.setMinutes(0),a.setSeconds(0);var o="; expires="+a.toGMTString(),r=location.hostname;-1!==r.indexOf(".bbc.co.uk")&&(r=".bbc.co.uk"),-1!==r.indexOf(".bbc.com")&&(r=".bbc.com");try{document.cookie=e+t+"="+escape(n)+o+"; Domain="+r+"; Path=/"}catch(s){}}function Ie(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function Te(e,t){X.push(e),e.setAttribute("tabindex","0"),e.onkeydown=function(t){var n=(t=t||window.event).keyCode||t.which;if(9==n||13==n)if(be(t),9==n){var i=X.length-1;Q=t.shiftKey?0===Q?i:Q-1:Q===i?0:Q+1,setTimeout(function(){X[Q].focus()},200)}else setTimeout(function(){te=!0,e.click()},200)},t&&(Q=X.length-1,e.focus())}function Le(){Q=0,X=[],Te(K)}function Ae(e,t,n){t&&n&&n.isUnder16&&(Z=!1);var i="";Z?(e.style.backgroundPosition="center",i=J.t("pgAriaAgeConfirmCheckBox",Y)):(e.style.backgroundPosition="-30px",i=J.t("pgAriaAgeConfirmCheckBoxUnchecked",Y)),e.setAttribute("aria-label",i),e.textContent=e.innerText=i,e.onfocus=function(){e.style.border="2px solid "+oe.ui.guidance.pgColour},e.onblur=function(){e.style.border=""}}function Me(e,t,n){var i=document.getElementById("pgErrorMessage");if(i)Ie(i);else{(i=document.createElement("div")).id="pgErrorMessage";var a=i.style;a.width=q.style.width,a.backgroundColor=oe.ui.guidance.pgSeparatorColour,a.marginTop="15px",a.marginBottom="5px",a.left="-26px",a.position="relative"}e.appendChild(i);var o=document.createElement("div"),r=o.style;r.fontSize="14px",r.position="relative",r.width="100%",r.color="#ffffff",r.fontSize="11px",r.textAlign="center",r.paddingTop=r.paddingBottom="10px",o.innerHTML='<span style="display:inline-block;  background-image: url(https://emp.bbci.co.uk/emp/assets/2.2.6/alert-color.png); background-repeat: no-repeat; background-size: 100% 100%; margin-right:5px; width:15px; height:13px;"></span>'+t,i.appendChild(o)}function Ne(e,t){var n=document.createElement("a");n.id=t.id,n.textContent=n.innerText=t.text,n.setAttribute("aria-label",t.text+" button");var i=n.style;i.cursor="pointer";try{i.display="table"}catch(r){i.display="block"}i.verticalAlign="middle",i.width="100%",i.lineHeight="3.5",i.fontSize="14px",i.color="#ffffff",i.backgroundColor=oe.ui.guidance.pgBackgroundColour,$.appendChild(n),Ee(t.id,!0),we(n);var a=!1;setTimeout(function(){a=!0},500);var o=t.clickFunction;return n.onclick=function(){a&&(Ue(!1,n.id),o())},Te(n,t.focus),n}function Oe(e,t,n){var i,a,o;Ie($),i=$,a=document.createElement("div"),(o=a.style).marginTop="-1px",o.position="absolute",o.width="100%",o.height="1px",o.backgroundColor=oe.ui.guidance.pgSeparatorColour,i.appendChild(a);var r=Ne(0,t);n&&(r.style.borderBottom="1px solid "+oe.ui.guidance.pgSeparatorColour,Ne(0,n))}function De(e){var t=document.getElementById("pgHeader");t.textContent=t.innerText=J.t(e,Y)}function Be(e){Ie(V),Le();var t=document.createElement("div");if(t.setAttribute("role","alertdialog"),t.setAttribute("aria-labelledby","pgInfoHeader"),t.setAttribute("aria-describedby","pgInfo"),t.style.marginBottom="24px",V.appendChild(t),De("newPgTurnOnParentalGuidance"),ee)var n="pgUnlock";else{var i=e._intent;n="download"==i?"pgDownload":"play"==i?"newToolTipPlay":i}var a=document.createElement("div");a.id="infoLinkContainer";var o=document.createElement("div");o.style.color="#b2b7c4";var r=J.t("notSuitableForChildMessage",Y)+'</br> </br>  <a id="pgLink" target="_blank" style="color:#ffffff; text-decoration:none; font-size:0.9em;" href="//www.bbc.co.uk/iplayer/guidance">'+' <div style="display:inline-block; margin-right: 5px; color:black; font-weight:bold; width:13px; height:13px; background-color:white; border-radius:50px;font-family: Arial, Helvetica, freesans, sans-serif;">i</div>'+J.t("findOutMore",Y)+"</a> ",s=document.createElement("div");s.id="pgInfo",s.style.fontSize="13px",s.style.color="#868686",s.style.marginTop="35px",t.appendChild(s),s.appendChild(a),a.style.margin=" 0 auto",a.appendChild(o),o.innerHTML=r;var l=document.getElementById("pgLink");l.setAttribute("aria-label",J.t("findOutMore",Y)),l.style.outline="none",we(l),o.style.display="inline-block",a.style.textAlign="center";var d=s.getElementsByTagName("p");if(d)for(var c=0;c<d.length;c++)d[c].style.color="#868686",d[c].style.fontSize="13px";var u=document.getElementById("pgLink"),p=!1;setTimeout(function(){p=!0},500),u.onclick=function(){return p},Te(u,!0);var m={id:"pgTurnOn",text:J.t("newPgTurnOn",Y),clickFunction:function(){p&&(e.storeAgeConfirmation(),function(e){Ie(V),Le(),De("newPgTurnOnParentalGuidancePINsection");var t=document.createElement("div");t.id="activatePIN",t.style.marginTop="35px",t.style.fontSize="14px",t.style.color="#ffffff",V.appendChild(t);var n=document.createElement("span");n.innerHTML=J.t("newPgEnterPIN",Y),n.style.fontSize="14px",n.style.color="#ffffff",t.appendChild(n);var i=document.createElement("div");i.innerHTML='<span style="color:#b2b7c4;">'+J.t("newPgActivateInfo",Y)+"</span>",i.id="activatePINInfo",i.style.marginTop="10px",i.style.marginBottom="24px",i.style.fontSize="14px",i.style.color="#868686",V.appendChild(i);var a=Re(V);a.setAttribute("aria-label",J.t("pgAriaPINEntryDescription",Y)+"."+J.t("pgAriaPINPrompt",Y)),Te(a,!0);var o=function(){/^\d{4}$/.test(a.value)?(e.setPIN(a.value),e.setLocked(ee),e.close(!ee)):(a.value="",Me(i,J.t("newPgPINvalidationError",Y)),a.focus())},r=ze(e._intent,"pgActivate");Fe(a,o),Oe(0,{id:"pgActivate",text:J.t(r,Y),clickFunction:o})}(e))}},g={id:"toolTipPlay",text:J.t(n,Y),clickFunction:function(){p&&(e.storeAgeConfirmation(),e.close(!0))}};Oe(0,m,ee?null:g),Ee("pgLink")}function Re(e){var t=document.createElement("div");t.id="pinEntry",t.style.width="100%",t.style.height="40px",t.style.marginBottom="20px",e.appendChild(t);var n=document.createElement("input");n.id="pinEntryInputBox";var i=n.style;return n.setAttribute("maxlength",4),i.letterSpacing="5px",i.display="block",i.margin="0 auto",i.height="100%",i.width="60%",i.padding="0px",i.resize="none",i.color="#868686",i.fontSize="30px",i.textAlign="center",n.setAttribute("type","password"),n.pattern="[0-9]*",t.appendChild(n),n}function Ue(e,t){ae.noPlayerAction(te||e?"key_press":"click",t,null,oe),te=!1}function Fe(e,t){var n=!1,i=function(i){13===((i=i||window.event).keyCode||i.which)&&n&&(Ue(!0,e.id),setTimeout(t,300))};setTimeout(function(){n=!0},400),e.addEventListener?e.addEventListener("keyup",i):e.onkeyup=i}function je(e){Ie(V),Le(),De("newPgTurnOnParentalGuidanceInsertPIN");var t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("span"),a=document.createElement("div");a.id="needPINinfo",t.id="enterPIN",i.innerHTML=J.t("newPgEnterPINprompt",Y),t.style.marginTop=t.style.paddingBottom="16px",t.style.width="100%",t.style.position="relative",t.style.fontSize=i.style.fontSize="14px",i.style.color="#ffffff",t.style.marginTop=q.offsetWidth<330?"25px":"5px",V.appendChild(t),t.appendChild(n),n.appendChild(i),t.appendChild(a),a.innerHTML=J.t("newPgEnterPINinfo",Y),a.style.color="rgb(134, 134, 134)",a.style.marginTop="15px";var o=Re(V);o.setAttribute("aria-label",J.t("pgAriaPINEntryDescription",Y)+"."+J.t("newPgEnterPINprompt",Y)),Te(o,!0);var r=function(e,t){var n=document.createElement("div");n.style.marginBottom="20px",n.style.width="100%",n.style.height="15px",e.appendChild(n);var i=document.createElement("a");return i.setAttribute("target","_blank"),i.setAttribute("href","//www.bbc.co.uk/iplayer/guidance"),i.id="manageLock",i.innerHTML=t,i.style.color="#ffffff",i.style.textDecoration="none",i.style.width="100%",i.style.fontSize="12px",i.style.bottom="0px",i.style.textAlign="center",n.appendChild(i),Ee("manageLock"),we(i),i}(V,J.t("newPgManageYourPIN",Y));Te(r),r.onclick=function(){return s};var s=!1;setTimeout(function(){s=!0},500);var l=function(){s&&(e.verifyPIN(o.value)?(ee&&Se(fe,"pgUnlocked","true"),e.isUnder16&&e.setUnder16Permission(!0),e.setLocked(!1),e.close(!0)):(o.value="",Me(a,J.t("newPgIncorrectPIN",Y)),o.focus()))};Fe(o,l);var d=ze(e._intent,"pgUnlock");Oe(0,{id:"pgTurnOff",text:J.t(d,Y),clickFunction:l})}var He,Ge=0;function We(){Ge++,clearTimeout(He),He=setTimeout(qe,100),setTimeout(Ve,300)}function ze(e,t){return ee?t:"download"==e?"pgDownload":"play"==e?"toolTipPlay":e}function qe(){if(z){var e=z.style;e.left=e.top="-500px",e.height=e.width="5000px"}if(q){var t=Math.floor(window.innerWidth/2-q.offsetWidth/2);(t<0||Ge>0)&&(t=0),window.innerWidth>=400&&(q.style.left=t+"px");var n=window.innerHeight-q.offsetHeight;if(window.innerHeight>=q.offsetHeight){var i=Math.floor(n/2);(Ge>0||i<5)&&(i=5)}else i=2;q.style.marginTop="0px",q.style.top=i+"px"}}function Ve(){var e=document.getElementById("pgHeader"),t=document.getElementById("pgInfo"),n=document.getElementById("pgHeaderTitle"),i=document.getElementById("enterPIN"),a=document.getElementById("pinEntry"),o=document.getElementById("pgErrorMessage"),r=document.getElementById("needPINinfo"),s=document.getElementById("activatePIN"),l=document.getElementById("activatePINInfo"),d=document.getElementById("pinEntryInputBox");q.offsetHeight>window.innerHeight?(t&&(t.style.marginTop="10px"),q.style.width=window.innerWidth-20+"px",e.style.fontSize="22px",q.style.left="10px",n&&(n.style.marginTop="10px",n.style.height="35px"),s&&(s.style.marginTop="0"),i&&(i.style.marginTop=q.offsetWidth<330?"25px":"5px",i.style.marginBottom="5px",i.style.paddingBottom="0"),a&&(a.style.marginBottom="10px"),d&&(d.style.width="30%"),o&&(o.style.marginTop="5px",o.style.width=window.innerWidth-20+"px",o.style.marginLeft="0px",o.style.left="-26px",l&&(l.style.marginBottom="5px")),r&&(r.style.marginTop="5px",r.style.marginBottom="5px")):(q.style.left=(window.innerWidth-q.offsetWidth)/2+"px",n&&(n.style.marginTop="35px",n.style.height="42px"),s&&(s.style.marginTop="35px"),a&&(a.style.marginBottom="15px"),d&&(d.style.width="60%"),window.innerWidth<420&&(q.style.width=window.innerWidth-20+"px",q.style.left="10px",t&&(t.style.marginTop="35px"),o&&(o.style.marginTop="15px",o.style.width=window.innerWidth-20+"px",o.style.marginLeft="0px",o.style.left="-26px",l&&(l.style.marginBottom="24px"))),r&&(r.style.marginTop="15px"),i&&(i.style.marginTop=q.offsetWidth<330?"25px":"5px",i.style.paddingBottom="16px"))}function $e(){return this.type="html",this.includePoster=!1,this.transcript=null,this.requireSonarJS=!0,this}ke.prototype={show:function(e,t,n,i){var a=this;if(Y=n,Ce(),e||(e={}),ee=e.lockClicked,a._intent=e.intent||"play",window.embeddedMedia.opened({type:"guidanceShown",intent:a._intent}),i)for(var o=0;o<a.openedCallbacks.length;o++)a.openedCallbacks[o]();var r=Z&&(!_e()||!a._isLocked);a.isOver16&&(Z=!0),!r||ee||a.isUnder16?function(e){if(z)return!1;(z=document.createElement("div")).setAttribute("tabindex","0"),z.id="parentalGuidanceBackground",z.className="smpPG";var t=z.style;t.width=t.height="5000px",t.left=t.top="-500px",t.zIndex="2147483600",t.backgroundColor="#333333",t.filter="alpha(opacity=85)",t.opacity=.85,(q=document.createElement("div")).id="guidancePopup",q.setAttribute("role","alertdialog"),q.setAttribute("aria-labelledby","pgHeaderTitle"),q.className="smpPG";var n=q.style;n.position=t.position="fixed",window.innerWidth<400?(n.width=window.innerWidth-20+"px",n.left="10px"):(n.width="390px",n.left=(window.innerWidth-390)/2+"px"),window.innerHeight>350?(n.top="50%",n.marginTop="-175px"):(n.top="5px",n.marginTop="0px"),n.lineHeight="normal",n.verticalAlign="middle",n.color="white",n.zIndex="2147483600",n.backgroundColor=oe.ui.guidance.pgBackgroundColour,n.textAlign="left",document.documentElement.className.indexOf("b-reith-sans-font")>=0&&e.reithEnabled?(q.className+=" font-family-sans",e.usingReith=!0):n.fontFamily="helvetica, Arial, sans-serif",document.body.appendChild(z),document.body.appendChild(q),q.onkeydown=function(t){27===((t=t||window.event).keyCode||t.which)&&e.close(!1)};var i=document.createElement("div");i.id="guidanceContainer",i.style.paddingRight=i.style.paddingLeft="26px",i.style.textAlign="center",q.appendChild(i);var a=document.createElement("div");a.id="pgHeaderTitle",a.style.height="42px",a.style.position="relative",a.style.marginTop="35px",i.appendChild(a);var o=document.createElement("span");o.innerHTML=J.t("pgHeader",Y),o.id="pgHeader",o.style.fontSize="24px",o.style.color=oe.ui.guidance.pgColour,a.appendChild(o),(V=document.createElement("div")).id="guidanceBody",V.style.position="relative",V.style.width="100%",i.appendChild(V),($=document.createElement("div")).id="guidanceFooter";var r=$.style;r.width="100%",r.height="42px",r.bottom="0px",r.display="table",r.textAlign="center",q.appendChild($),(K=document.createElement("a")).setAttribute("aria-label",J.t("pgClose",Y)),K.id="pgExit";var s=K.style;K.title=J.t("pgClose",Y),s.position="absolute",s.right=s.top="12px",s.cursor="pointer",s.width=s.height="18px",s.backgroundImage="url(https://emp.bbci.co.uk/emp/assets/2.2.6/GEL_Remove_icon.png)",s.backgroundRepeat="no-repeat",q.appendChild(K),we(K);var l=!1;return setTimeout(function(){l=!0},500),K.onclick=function(t){l&&(be(t=t||window.event),Ue(!1,this.id),e.close(!1))},K.onfocus=function(){K.style.border="2px solid "+oe.ui.guidance.pgColour},K.onblur=function(){K.style.border=""},!0}(a)&&(_e()&&!ie&&!this.guidance.under16permissionConfirmed&&this._isLocked?je(a):ee&&r||a.isOver16?Be(a):function(e,t){Ie(V),Le();var n=document.createElement("div");n.id="guidanceMessage";var i=n.style;i.marginTop="15px",i.marginBottom="5px",i.width="100%",i.position="relative",i.fontSize="13px",V.appendChild(n),De("newAgeConfirmationTitle");var a=document.createElement("div");a.id="guidanceG";var o=a.style;o.display="inline-block",o.margin="auto",o.borderRadius="50%",o.width=o.height="15px",o.backgroundColor="#E51854",o.position="relative",o.top="-2px",o.fontSize="12px",e.usingReith&&(o.lineHeight="1px"),n.appendChild(a);var r=document.createElement("span");r.innerHTML="G";var s=r.style;s.lineHeight="normal",s.position="relative",s.left="-0.5px",s.top="1px",s.color="#ffffff",s.fontFamily="Arial, Helvetica, freesans, sans-serif",e.usingReith&&(s.left="0"),a.appendChild(r);var l=document.createElement("span");if(l.id="guidanceText",l.textContent=l.innerText=t,e.isUnder16){l.appendChild(document.createElement("br")),l.appendChild(document.createElement("br"));var d=document.createElement("span");d.textContent=d.innerText=J.t("newUnder16WithPermission",Y),l.appendChild(d)}(s=l.style).left="0px",s.top="16px",s.marginLeft="5px",s.lineHeight="16px",s.color="#b2b7c4",n.appendChild(l);var c=document.createElement("div");c.id="ageConfirm";var u=c.style;u.width="100%",u.height="57px",u.position="relative",u.fontSize="14px",u.color="#ffffff",u.display="-ms-inline-flexbox",u.justifyContent="center",V.appendChild(c);var p=document.createElement("button");p.id="ageConfirmCheck";var m=p.style;m.background="url(https://emp.bbci.co.uk/emp/assets/2.2.6/tick.png) no-repeat center",m.backgroundPosition="-30px",m.position="absolute",m.top="16px",m.height=m.width="25px",m.verticalAlign="middle",m.cursor="pointer",m.backgroundColor="#ffffff",m.borderWidth="0",m.textIndent="-9999px",m.whiteSpace="nowrap",m.overflow="hidden",c.appendChild(p),Te(p,!0),Ae(p,!0,e);var g=document.createElement("span");g.innerHTML=e.isUnder16?J.t("newPgAgeConfirmationUnder16",Y):J.t("pgAgeConfirmation",Y),g.style.position="relative",g.style.top="20px",g.style.marginLeft="35px",c.appendChild(g);var h=!1;setTimeout(function(){h=!0},500),p.onclick=function(){h&&(Z=!Z,Ae(p))},Oe(0,{id:"pgAgeContinue",text:e.isUnder16?J.t("newPgPlay",Y):J.t("pgContinue",Y),clickFunction:function(){if(e.isUnder16&&Z)e.storeAgeConfirmation(),e.setUnder16Permission(!0),e.updateGuidanceState(),e.close(!0);else if(Z)Be(e);else{var t=e.isUnder16?J.t("pgUnder16PermissionValidationError",Y):J.t("pgPasswordValidationError",Y);Me(n,t)}}})}(a,e.guidance),document.body.addEventListener&&document.body.addEventListener("touchmove",be),Ge=0,window.addEventListener&&(window.addEventListener("resize",qe),window.addEventListener("orientationchange",We))):a.close(!0)},close:function(e,t){if(document.body.removeEventListener&&document.body.removeEventListener("touchmove",be),window.removeEventListener&&(window.removeEventListener("resize",qe),window.removeEventListener("orientationchange",We)),function(){for(var e=0;e<ye.length;e++)ye[e].removeEventListener("keydown",Pe);ye=[]}(),z&&(z.parentNode.removeChild(z),z=void 0),q&&(q.parentNode.removeChild(q),q=void 0),!t){var n={type:"guidanceClosed"};n.success=e,window.embeddedMedia.closed(n);for(var i=0;i<this.closedCallbacks.length;i++)this.closedCallbacks[i](e)}},setPIN:function(e){ne=he("smpembed"+e),Se(fe,"pgPIN",ne)},setLocked:function(e,t){t&&(Se(fe,"pgUnlocked",e?"":"true"),ie=!e),this._isLocked=e,this.updateGuidanceState()},verify:function(e,t){var n=this.verifyPIN(e.verifyPIN);n&&(this.setLocked(!1),e.lockClicked&&Se(fe,"pgUnlocked","true")),t(n)},verifyPIN:function(e){return he("smpembed"+e)===ne},setAgeConfirmation:function(e){Z=e,this.storeAgeConfirmation()},storeAgeConfirmation:function(){this.isUnder16||(Se(fe,"pgAgeConfirm",Z),this.setLocked(!0))},setUnder16Permission:function(e){ve=e,this.updateGuidanceState()},updateGuidanceState:function(){var e=this.guidance;e.isGuidanceLocked=this._isLocked&&_e()&&!ie,e.hasGuidancePIN=_e(),e.guidanceSkipped=Z&&!_e(),e.guidancePINPassed=!this._isLocked&&_e(),e.under16permissionConfirmed=ve,e.canPlay=e.guidanceSkipped||e.hasGuidancePIN&&e.guidancePINPassed||ie,!this.isUnder16||e.isGuidanceLocked&&!e.guidancePINPassed||e.under16permissionConfirmed||(e.canPlay=!1);for(var t=0;t<this.updateCallbacks.length;t++)this.updateCallbacks[t](e)}};var Ke=$e.prototype=new T;Ke._name="smp-transcript",Ke.compatibility=function(e){return 1==e.transcriptPlayer},Ke.embed=function(e,t){var n=this;S.mediationUrls(e,e),n._settings=e,n._container=e.container,n._container.innerHTML="";var i=e.html5Debug?"https://emp.bbci.co.uk/emp/transcript/1.1.1/TranscriptPlayer.js":"https://emp.bbci.co.uk/emp/transcript/1.1.1/TranscriptPlayer.min.js";if(!window.require)throw"No require available, smp-transcript requires require.";require([i],function(i){n.transcript=new i(n._container,e,n),n._version=n.transcript._version,n.transcript.embed(),n.transcript._eventBus.registerForPublic(function(e){n.sonar&&"Sonar"===e.type.substring(0,5)?n.sonar.eventHandler(e,n.sonar):n.trigger(e)}),t(n,{markers:!1,queuedPlaylist:!1,inPage:!1,chromecast:!1,overlay:!1,slim:!1})})},Ke.loadPlaylist=function(){this._settings&&this._settings.playlistObject&&this.transcript.loadPlaylist(this._settings.playlistObject)},Ke.setData=function(e){this.transcript&&this.transcript.setData(e)},Ke.updateUiConfig=function(e){this.transcript&&(this.transcript.uiSettings=e)},Ke.linkMediaPlayer=function(e){this._linkedMp=e,this.transcript&&this.transcript.linkMediaPlayer(e)},Ke.mediaItem=function(){if(this.transcript)return this.transcript.mediaItem},Ke.call=function(e,t){this.transcript&&(this.transcript[e]?this.transcript[e](t):"closedSettingsPanels"!=e&&console.error("No "+e+" in Transcript"))};var Ye,Je="https://emp.bbci.co.uk/emp/assets/2.2.6/";function Qe(e,t,n,i){var a=document.createElement("div"),o=window.embeddedMedia.players.length,r=!i,s="",l=document.getElementsByClassName("p_cta")[0];l&&(s=window.getComputedStyle?window.getComputedStyle(l).direction:l.currentStyle.direction);var d="rtl"==s,c=d?"margin-right: 10px; ":"margin-right: -2px; ",u=d?"margin-right:10px;":"margin-left:10px;",p=d?"margin-right:80px;":"margin-left:80px;",m=d?"padding-left:30px;":"padding-right:30px;";a.id="p_guidance"+o;var g=document.createElement("div");g.id="p_guidanceBox"+o,g.className="p_guidanceBox";var h=document.createElement("span"),f=document.createElement("span"),y="display:inline-block;margin:auto;border-radius:50%;height:15px;width:15px;"+(n?"background-color:white; color:black;":"background-color:#E51854;")+"position: relative; top:-2px;";if(Ye)h.id="p_guidanceG"+o,f.id="p_guidanceW"+o,h.style.backgroundImage='url("'+Je+'svg/guidance.svg")',f.style.backgroundImage='url("'+Je+'svg/warningGuidance.svg")',f.style.display=n?"inline-block":"none",h.style.display=n?"none":"inline-block",h.setAttribute("aria-labelledby","p_guidanceText"+o),f.setAttribute("aria-labelledby","p_guidanceText"+o),y="width:15px;height:15px;display:inline-block;position: relative; top: 2px;"+c;else{h.id="p_guidanceG"+o;var v=document.createElement("span");v.id="p_guidanceGText"+o,h.appendChild(v),v.textContent="G",v.setAttribute("aria-labelledby","p_guidanceText"+o)}g.appendChild(h),g.appendChild(f);var b=document.createElement("span");b.id="p_guidanceText"+o,b.textContent=t,g.appendChild(b),a.appendChild(g);var w="position:absolute;height:80px;bottom:-0.5px;background-color: rgba(0, 0, 0, 0.7);"+p+"margin-top: -40px;display:table;"+m+"line-height:1";document.documentElement.className.indexOf("b-reith-sans-font")>=0&&r?a.className+="font-family-sans":w+="; font-family:helvetica, Arial, sans-serif";var P=e.sheet;return Xe(P,"#p_guidance"+o,w,0),Xe(P,".minimode #p_guidance"+o,"left: 61px;height:60px;",1),Xe(P,"#p_guidanceBox"+o,"color:#ffffff;font-size:12px;font-weight:bold;padding-left:8px;display:table-cell;vertical-align:middle;",2),Xe(P,"#p_guidanceG"+o,y,3),Xe(P,"#p_guidanceW"+o,y,3),Xe(P,"#p_guidanceGText"+o,"position:relative;left:3px;top:1px;line-height:normal;",4),Xe(P,"#p_guidanceText"+o,u,5),{text:b,div:a,id:o}}function Xe(e,t,n,i){e.insertRule?(i=void 0===i?e.cssRules.length:i,e.insertRule(t+"{"+n+"}",i)):e.addRule&&e.addRule(t,n,i)}function Ze(e){return this.immediate=!0,this._name=e,this}function et(e,t){var n={gMessage:t,isWarning:!1};return e.playlistObject&&(e.playlistObject.warning&&(n.gMessage=e.playlistObject.warning,n.isWarning=!0),e.playlistObject.guidance&&(n.gMessage=e.playlistObject.guidance,n.isWarning=!1)),n}var tt=Ze.prototype=new T;function nt(e){if(e&&e.items)for(var t=0;t<e.items.length;t++)if(!0===e.items[t].live)return!0;return!1}function it(e){e._settings.playlistObject&&nt(e._settings.playlistObject)?e.audiouiLiveIndicator.style.display="block":e.audiouiLiveIndicator.style.display="none";var t=at(e._settings);t&&e._settings.playlistObject&&!nt(e._settings.playlistObject)&&e._settings.ui.cta&&"duration"==e._settings.ui.cta.mode?(e.audioDurationHolder.innerHTML=t,e.audioDurationHolder.style.opacity=1):e.audioDurationHolder.style.opacity=0}function at(e){var t=null;if(e.overrideCtaDuration)t=e.overrideCtaDuration;else{var n=S.firstProgramme(e.playlistObject);n&&n.duration&&(t=function(e,t){if(!e)return"00:00";if(isNaN(e)||e<0||e>36e4)return"";var n=Math.floor(e/60),i=Math.floor(n/60);n=Math.floor(n%60);var a=Math.floor(e%60);n<10&&(n="0"+n),a<10&&(a="0"+a);var o=[n,a];return(i>0||t)&&o.unshift(i),o.join(":")}(n.duration,!1))}return t}function ot(){return this.daxname="SMPPHANTOM",this}tt.embed=function(e,t){var n=this,i=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(i),n.sheet=i.sheet?i.sheet:i.styleSheet,n._settings=e,n._container=e.container,n._version=window.embeddedMedia.version,function(e){var t,n,i=!1,a=!1;function o(){clearTimeout(t),i=!0,p.hasClass(e,"nonPointerFocus")&&p.className(e,"","nonPointerFocus"),t=setTimeout(r,250)}function r(){i=!1}p.hasClass(e,"nonPointerFocus")||p.className(e,"nonPointerFocus"),window.PointerEvent?document.addEventListener("pointerdown",o,!0):(document.addEventListener("touchstart",o,!0),document.addEventListener("mousedown",o,!0)),window.addEventListener("focus",function(){clearTimeout(n),a=!0,n=setTimeout(function(){a=!1},250)}),document.addEventListener("focusin",function(){i||a||p.hasClass(e,"nonPointerFocus")||p.className(e,"nonPointerFocus")},!0)}(n._container),n.uiDefaults(y.get()),n.ctaNeedsCreating=n.createCta(),n.extraEmbed&&n.extraEmbed(),t(n,n.capability),n.processPlaylist(null,!0),n.trigger({type:"initialised"}),n.processPlaylist()},tt.show=function(e){this.wrapper.children().show(),e&&this.play()},tt.hide=function(){this.wrapper.children().hide()},tt.setLocation=function(e){if(this._settings.insideIframe){var t={type:"navigateTo"};t.href=e,this.trigger(t)}else{try{var n=""===top.location.href&&!1}catch(i){n=!0}y.requiresWindowOpenSMPAirLaunch||n?window.open(e):top.location=e}},tt.hasPlaylist=function(){var e=this._settings;return e.playlist||e.playlistObject},tt.updateUiConfig=function(){var e=this,t=e._createdUI||{},n=e._settings.ui,i=!1;if((t.miniMode&&t.miniMode.enabled)!=(n.miniMode&&n.miniMode.enabled))i=!0;else if(t.colour!=n.colour)i=!0;else{var a=n[e.classStr]||n.CTAcss;e._ctaClassName!=a&&(i=!0)}i&&(this.wrapper&&(this.wrapper.innerHTML=""),this.createCta())},tt.processPlaylist=function(e,t){var n=this,i=n._settings,a=e||i.playlistObject;if(a){n.playlist=p.clone(a);var o=n.playlist.items;if(o)for(var r=o.length-1;r>=0;r--){var s=o[r];n.filterPlaylist&&("ident"!=s.kind&&"advert"!=s.kind&&"360"!=s.kind||o.splice(r,1)),s.versionID?s.vpid=s.versionID:s.serviceID&&(s.vpid=s.serviceID,s.live=!0,!1!==n.playlist.simulcast&&(n.playlist.simulcast=!0)),s.identifier=s.vpid}if(!t){var l={type:"playlistLoaded"};l.playlist=n.playlist,n.trigger(l)}}else n.playlist=null},tt.next=function(){var e=this,t=e.playlist;if(t)if(t.items&&t.items.length>1)t.items.shift();else if(t.queuedPlaylist){e.processPlaylist(t.queuedPlaylist);var n=e._settings;n.playlist="",n.playlistObject=t.queuedPlaylist,n.webcastData={},n.overrideHoldingImage=null,n.statsObject.parentPID=void 0,n.statsObject.parentPIDType=void 0,n.statsObject.episodePID=void 0,n.statsObject.clipPID=void 0,n.statsObject.brandPID=void 0,n.statsObject.seriesPID=void 0,n.statsObject.playlistLabels=void 0,n.statsObject.playlistName=void 0,t.queuedOptions&&p.merge(n,t.queuedOptions),e._statsObject=p.clone(n.statsObject)}},tt.loadPlaylist=function(){var e=this,t=e._settings;if(window.embeddedMedia.parentalGuidance.setUnder16Permission(!1),e.ctaNeedsCreating)setTimeout(function(){e.ctaNeedsCreating=e.createCta()},100);else if("audio"==t.ui.skin)it(e);else if(e.incGuidance&&(!t.ui.guidance||!1!==t.ui.guidance.enabled)){var n=t.playlistObject&&(t.playlistObject.guidance||t.playlistObject.warning)||t.forceGuidance||t[e._guidance];if(n){var i=et(t,n);if(e.guidanceWrapper){if(Ye){var a=document.getElementById("p_guidanceG"+e.guidanceWrapper.id),o=document.getElementById("p_guidanceW"+e.guidanceWrapper.id);i.isWarning?(o.style.display="inline-block",a.style.display="none"):(o.style.display="none",a.style.display="inline-block")}else{var r=document.getElementById("p_guidanceGText"+e.guidanceWrapper.id),s=document.getElementById("p_guidanceG"+e.guidanceWrapper.id);i.isWarning?(r.style.color="black",s.style.backgroundColor="white"):(r.style.color="white",s.style.backgroundColor="#E51854")}e.guidanceWrapper.div.style.display="",e.guidanceWrapper.text.textContent=i.gMessage}else e.guidanceWrapper=Qe(e,i.gMessage,i.isWarning,t.ui.disableReithFonts),e.wrapper.appendChild(e.guidanceWrapper.div)}else e.guidanceWrapper&&(e.guidanceWrapper.div.style.display="none",e.guidanceWrapper.text.textContent="")}e.processPlaylist(),t.autoplay&&e.play(),e.resetContainer&&e.resetContainer(),e.setPoster()},tt.createCta=function(){return!this.hasPlaylist()||("audio"==this._settings.ui.skin?this.createAudioCta():this.createClassicCta(),!1)},tt.createAudioCta=function(){var e=this,t=function(e){var t=e._settings.locale(),n=window.embeddedMedia.language,i=e.sheet;Xe(i,"#p_audioui_playpause_circle","stroke: #fff;stroke-width: 3;fill: none;"),Xe(i,"#p_audioui_playpause_highlightCircle","opacity: 0;-webkit-transition: 100ms opacity linear;transition: 100ms opacity linear;fill:"+e._settings.ui.colour+";"),Xe(i,"#p_audioui_playpause.hovering #p_audioui_playpause_highlightCircle,#p_audioui_playpause.pressed #p_audioui_playpause_highlightCircle,.nonPointerFocus #p_audioui_playpause.focused #p_audioui_playpause_highlightCircle","opacity: 1;"),Xe(i,"#p_audioui_playpause_playIcon","-webkit-transform-origin: 34px 34px;transform-origin: 34px 34px;-webkit-transition: 100ms -webkit-transform ease-out;transition: 100ms -webkit-transform ease-out;transition: 100ms transform ease-out;transition: 100ms transform ease-out, 100ms -webkit-transform ease-out;-webkit-transform: scale(1);transform: scale(1);"),Xe(i,"#p_audioui_playpause.pressed #p_audioui_playpause_playIcon","-webkit-transform: scale(1.4);transform: scale(1.4);");var a=document.createElement("button");a.id="p_audioui_playpause",a.setAttribute("aria-label",n.t("aaampPlay",t));var o=p.createSVGElement("svg",{width:68,height:68,viewbox:"0 0 68 68"}),r=p.createSVGElement("circle",{id:"p_audioui_playpause_circle",cx:34,cy:34,r:32}),s=p.createSVGElement("circle",{id:"p_audioui_playpause_highlightCircle",cx:34,cy:34,r:34}),l=p.createSVGElement("polygon",{id:"p_audioui_playpause_playIcon",points:"27 46 46 34 27 22"});return o.appendChild(r),o.appendChild(s),o.appendChild(l),a.appendChild(o),p.hoverMoveAction(a,function(){p.className(a,"hovering")}),p.hoverLeaveAction(a,function(){p.className(a,"","hovering")}),p.downAction(a,function(){p.className(a,"pressed")}),p.upAction(document,function(){p.className(a,"","pressed")},!0),p.multiAddEventListener(a,"focus focusin",p.throttleFn(function(){p.className(a,"focused")})),p.multiAddEventListener(a,"blur focusout",p.throttleFn(function(){p.className(a,"","focused")})),a.addEventListener("keydown",function(e){13!=e.keyCode&&32!=e.keyCode||p.className(a,"pressed")}),a.addEventListener("keyup",function(){p.className(a,"","pressed")}),e._settings.includeAppClickHandler&&p.multiAddEventListener(a,"mouseup touchend click",p.throttleFn(e.getUserPlay())),a}(e);Xe(e.sheet,"#p_audioui_playpause","position: absolute;left: 50%;margin: 0 0 0 -34px;bottom: 16px;width: 68px;height: 68px;fill: #FFFFFF;padding: 0;border: 0;outline: 0;background: transparent;cursor: pointer;");var n=e.audioDurationHolder=document.createElement("div");n.id="p_audioui_durationHolder",Xe(e.sheet,"#p_audioui_durationHolder","position: absolute; bottom: 42px; left: 50%; margin-left: 50px; width: 150px; color: #FFF; font-size: 15px; line-height: 15px; opacity: 0;");var i=e.wrapper=document.createElement("div");i.className="p_audioui_wrapper",Xe(e.sheet,".p_audioui_wrapper","width:100%;height:100%;position:relative;opacity:0;transition: opacity 1000ms linear;"),(-1==document.documentElement.className.indexOf("b-reith-sans-font")||e._settings.ui.disableReithFonts)&&Xe(e.sheet,".p_audioui_wrapper","font-family: helvetica, Arial, sans-serif;");var a=document.createElement("div");a.id="p_audioui_progressBar",Xe(e.sheet,"#p_audioui_progressBar","position: absolute; bottom: 119px; height: 2px; left: 16px; right: 16px; background-color: rgba(255,255,255, 0.3);"),e.sheet.insertRule&&e.sheet.insertRule("@media (max-width: 399px) { #p_audioui_progressBar { left: 10px; right: 10px; } }",e.sheet.cssRules.length);var o=e.audiouiLiveIndicator=document.createElement("div");o.id="p_audioui_liveIndicator",Xe(e.sheet,"#p_audioui_liveIndicator","position: absolute; right: 16px; bottom: 92px;"),it(e);var r=document.createElement("span");r.className="p_audioui_liveText",r.innerHTML="LIVE",Xe(e.sheet,".p_audioui_liveText","display: block; float: right; margin-left: 3px; height: 12px; line-height: 12px; font-size: 12px; color: #FFF;");var s=p.createSVGElement("svg",{width:12,height:12});Xe(e.sheet,"#p_audioui_liveIndicator svg","display: block; float: right; fill: #fff;");var l=p.createSVGElement("path",{d:"M5.96681502,10.3410568 C8.38342771,10.3410568 10.3424794,8.38388329 10.3424794,5.96958745 C10.3424794,3.5552916 8.38342771,1.59811812 5.96681502,1.59811812 C3.55020233,1.59811812 1.59115067,3.5552916 1.59115067,5.96958745 C1.59115067,8.38388329 3.55020233,10.3410568 5.96681502,10.3410568 Z M5.96681502,11.930682 C2.67143408,11.930682 0,9.26180906 0,5.96958745 C0,2.67736584 2.67143408,0.00849290887 5.96681502,0.00849290887 C9.26219596,0.00849290887 11.93363,2.67736584 11.93363,5.96958745 C11.93363,9.26180906 9.26219596,11.930682 5.96681502,11.930682 Z"}),d=p.createSVGElement("circle",{class:"p_audioui_liveIconCentre",cx:6,cy:6,r:3});e.sheet.insertRule&&(e.sheet.insertRule("@media (prefers-reduced-motion: no-preference) { .p_audioui_liveIconCentre { animation: 1.7s ease 3 p_audioui_pulsate; } }",e.sheet.cssRules.length),e.sheet.insertRule("@keyframes p_audioui_pulsate { from { opacity: 1; } 50% { opacity: 0.3; } to { opacity: 1; } }",e.sheet.cssRules.length),e.sheet.insertRule("@media (max-width: 399px) { #p_audioui_liveIndicator { right: 10px; } }",e.sheet.cssRules.length)),s.appendChild(d),s.appendChild(l),o.appendChild(r),o.appendChild(s),i.appendChild(t),i.appendChild(n),i.appendChild(a),i.appendChild(o),e._container.innerHTML="",e._container.appendChild(i),i.style.opacity=1},tt.createClassicCta=function(){var e=this,t=e._settings,n=t.ui.miniMode&&t.ui.miniMode.enabled;e._createdUI=p.clone(t.ui);var i=!1,a=at(t),o=S.firstProgramme(t.playlistObject);o&&(i=function(e){return!!e&&("radioProgramme"===e.kind||"audio"===e.kind)}(o));var r=(t.ui.colour+"").replace("0x","#").substring(0,7),s=t.ui.foreColour?t.ui.foreColour:"#ffffff";e.wrapper||(e.wrapper=p.getWrapper(t,999)),e.wrapper.className=n?"minimode":"";var l=window.embeddedMedia.players.length,d=document.createElement("button");d.setAttribute("id","cta"+l),d.className="p_cta",d.title=window.embeddedMedia.language.t("aaampPlay",t.locale());var c=e._ctaClassName=t.ui[e.classStr]||t.ui.CTAcss;e.incGuidance=!0;var u=null;if(a&&t.ui.cta&&"duration"===t.ui.cta.mode&&((u=document.createElement("span")).className="p_ctaDuration",u.textContent=a,d.appendChild(u)),c)e.incGuidance=!1,d.className=c;else{Ye=t.ui.useHighResIcons;var m=t.ui.cta||{};m.ignoreAudio&&(i=!1);var g=!1;!Ye||i||n||(g=!0);var h=function(e,t,n){var i="cta_play.png";return t?i=n?"svg/white/audio.svg":"svg/white/play.svg":n&&(i="cta_play_audio.png"),i}(0,Ye,i),f=function(e,t,n,i){var a={ctaSize:n?"60px":"80px",ctaBackgroundSize:"52px 52px",ctaBackgroundPosition:"50% "+(t?"38%":"50%")};return e?(a.ctaBackgroundSize="60px 60px",t&&(a.ctaBackgroundPosition="10px 5px"),n?i?(t&&(a.ctaBackgroundPosition="7px 1px"),a.ctaBackgroundSize="45px 45px"):(t&&(a.ctaBackgroundPosition="10px 4px"),a.ctaBackgroundSize="40px 40px"):i&&(t&&(a.ctaBackgroundPosition="9px 4px"),a.ctaBackgroundSize="62px 62px")):n?i?(a.ctaBackgroundSize="22px 22px",t&&(a.ctaBackgroundPosition="50% 34%")):a.ctaBackgroundSize="35px 35px":i&&(a.ctaBackgroundSize="28px 28px"),a}(Ye,u,n,i),y='url("'+Je+h+'")';if(void 0!==m.custom&&(y='url("'+m.custom+'")'),g){e._container.style.cursor="pointer";var v=u?28:32,b=p.createSVGElement("svg",{width:v,height:v,viewBox:"0 0 32 32",fill:"#ffffff"}),w=p.createSVGElement("path",{d:"M4.4,32V0l25.1,16L4.4,32z"});b.appendChild(w),u?(b.style.marginTop="-10px",d.insertBefore(b,u)):d.appendChild(b),d.setAttribute("style","opacity : 0.9;background-color:#000;margin : 0;padding: 0; border: 0;width  : "+f.ctaSize+";height : "+f.ctaSize+";display :  block;position : absolute;cursor:pointer; bottom : -0.5px")}else d.setAttribute("style","background-image : "+y+";background-position : "+f.ctaBackgroundPosition+";background-repeat:no-repeat;background-color :#000000;background-size : "+f.ctaBackgroundSize+";opacity : 0.8;margin : 0;padding: 0; border: 0;width  : "+f.ctaSize+";height : "+f.ctaSize+";display :  block;position : absolute; bottom : -0.5px");if(u){var P=n?"6px":"8px",_=n?"60px":"80px";u.setAttribute("style","font-size: 0.75rem;text-align : center;position: absolute;bottom: "+P+";left: 0px;width: "+_+";color: #fff;background-colour:transparent")}var C=function(){g&&(d.style.transition="background-color 0.4s ease-out",d.firstChild.setAttribute("fill",s),u&&(u.style.color=s)),d.style.backgroundColor=r,d.style.opacity=1},k=function(){d.style.backgroundColor="#000000",d.style.opacity=.9,g&&(d.firstChild.setAttribute("fill","#ffffff"),u&&(u.style.color="#ffffff"))};e._container.addEventListener("mousedown",C),e._container.addEventListener("mouseover",C),e._container.addEventListener("touchstart",C),e._container.addEventListener("focusin",C),e._container.addEventListener("mouseup",k),e._container.addEventListener("mouseout",k),e._container.addEventListener("touchend",k),e._container.addEventListener("touchmove",k),e._container.addEventListener("focusout",k)}if(t.includeAppClickHandler){d.setAttribute("tabIndex",0);var E=p.throttleFn(e.getUserPlay());p.multiAddEventListener(e._container,"mouseup touchend click",E),p.multiAddEventListener(d,"click",E)}if(e.wrapper.appendChild(d),e._container.innerHTML="",e._container.appendChild(e.wrapper),e.incGuidance&&(!t.ui.guidance||!1!==t.ui.guidance.enabled)){var x=t.playlistObject&&(t.playlistObject.guidance||t.playlistObject.warning)||t.forceGuidance||t[e._guidance];if(x){var I=et(t,x);e.guidanceWrapper=Qe(e,I.gMessage,I.isWarning),e.wrapper.appendChild(e.guidanceWrapper.div)}}},tt.getUserPlay=function(){var e=this;return function(){e.sonar&&setTimeout(function(){e.trigger({type:"userPlay"}),e.sonar.action("click","play_"+e.daxname)},50),e.play()}};var rt=ot.prototype=new Ze("smp-phantom");function st(e){var t=p.clone(e,{_container:!0,container:!0,dispatch:!0,init:!0,trigger:!0,initialisationListenerTimeout:!0});S.mediationUrls(t,t),t.mediator||(t.mediator={}),t.mediator.mediaset=S.mediaSet(t);var n=y.get();return t.mobileNetwork=n.connection.mobile,t._demiIsUK=window.embeddedMedia.demi.isUK,t}function lt(){return this.type="html",this.includePoster=!1,this.requireSonarJS=!0,this}rt._name="smp-phantom",rt.play=function(){},rt.compatibility=function(e){return!0===e.phantomPlayer};var dt=lt.prototype=new T;dt._name="toucan",dt.compatibility=function(e,t){return function(){if(!window.customElements)return!1;if(!window.HTMLElement||!window.HTMLElement.prototype.attachShadow)return!1;if(!window.ResizeObserver)return!1;if(!window.PointerEvent)return!1;try{document.querySelector(":focus-visible")}catch(e){return!1}return!0}()&&!function(e){var t=S.firstProgramme(e.playlistObject);if(t&&"360"==t.kind)return!0}(e)&&function(e){return!!e.supportFakeFullscreen||!(!e.ui||"audio"!=e.ui.skin)||!(!window.HTMLElement||!window.HTMLElement.prototype.requestFullscreen&&!window.HTMLElement.prototype.webkitRequestFullscreen)}(e)&&(t||function(e){return(e.enableToucan||/ck[pn]s_smpj2Optin=optin/.test(document.cookie))&&!/ckps_smpj2Optin=optout/.test(document.cookie)}(e))&&-1==(location.hostname+"").indexOf(".onion")},dt.getId=function(){return this._name+"-"+this._settings.domid},dt.prepare=function(e){var t=e.html5Debug?"https://emp.bbci.co.uk/emp/toucan/bundle/1.42.0/debug/js/ToucanPlayer.js":"https://emp.bbci.co.uk/emp/toucan/bundle/1.42.0/live/js/ToucanPlayer.js",n=document.createElement("script");n.type="module",n.src=t,n.onload=function(){},document.head.appendChild(n)},dt.embed=function(e,t){var n=this;this._settings=e,this._container=e.container,window.customElements.whenDefined("smp-toucan-player").then(function(){for(;n._container.firstChild;)n._container.removeChild(n._container.firstChild);var i=p.getWrapper(e,999);n._container.appendChild(i);var a=document.createElement("smp-toucan-player");a.style.cssText="position:absolute;width:100%;height:100%;left:0;right:0;flex:none;",n._version=a.version&&a.version.replace(/\.SMPToucan/i,"").replace(/[^\d\.]/gim,"");var o=window.embeddedMedia.language,r=n._settings.locale(),s=o.getList(r);s&&(a.language=s),n.toucan=a,n.toucan.id=n.getId();var l=y.get();n.uiDefaults(l),n.toucan.settings=st(e),n._preInitPlaylist=n.toucan.settings.playlistObject,n.toucan.uiSettings=n.toucan.settings.ui,a.__bumpInit=function(){t(n,{markers:!0,queuedPlaylist:!0,previousPlaylist:!1,threeSixty:!1,inPage:!0,overlay:!0,slim:!0}),n.before(),n.toucan._eventBus.registerForPublic(function(e){var t,i=e.type,a={type:i};switch(n.processEvent(a,e,e.detail),i){case"durationchange":n._duration=e.duration;break;case"volumechange":n._muted=e.muted,n._volume=e.volume;break;case"pause":n._ended=a.ended;break;case"mediaItemChanged":n._mediaItem=a.mediaItem;break;case"guidanceShow":n._gCalled=!0,window.embeddedMedia.parentalGuidance.show(e,n._settings.ui.colour,n._settings.locale(),!0);break;case"playlistLoading":e.statsObject&&(t=function(){n._statsObject=e.statsObject})}n.sonar&&"Sonar"===e.type.substring(0,5)?n.sonar.eventHandler(e,n.sonar):n.trigger(a),t&&t()}),n.trigger({type:"initialised"});for(var i=0;i<e.plugins.toLoad.length;i++){var a=e.plugins.toLoad[i],o=a.html;if(o||a.playerOnly||(o=a.j2),o){var r={url:o,data:a.data,module:a.module};n.loadPluginWithCheck(r)}}n._preInitPlaylist&&(delete n._preInitPlaylist,n.loadPlaylist()),n.started(y.get())},i.appendChild(a)})},dt.call=function(e,t){this.toucan&&(this.toucan[e]?this.toucan[e](t):console.error("No "+e+" in Toucan"))},dt.resetForPlaylist=function(){this.call("resetForPlaylist")},dt.loadPlaylist=function(e){if(this.toucan){delete this._preInitPlaylist,!0===e&&(this._settings.nonUserBypass=!0),this._settings.playlistObject&&this._settings.playlistObject.queueCurrentPlaylist&&this.toucan.readyCurrentPlaylistForQueuing&&this.toucan.readyCurrentPlaylistForQueuing(),this.toucan.settings=st(this._settings),this._settings.nonUserBypass=!1,this.toucan.playlist=this._settings.playlistObject;var t=this._settings.webcastData;t&&(t.accurateStartTime||t.scheduledStartTime||t.accurateEndTime||t.scheduledEndTime)&&this.webcastData(t)}},dt.updateQuality=dt.updateConfig=function(e){this.toucan&&(this.toucan.settings=st(e))},dt.captureIntent=function(e){this.call("captureIntent",e)},dt.focusButton=function(e,t){this.call("focusButton",{name:e,after:t})},dt.currentTime=function(e){if(this.toucan)return"number"==typeof e&&(this.toucan.currentTime=e),this.toucan.currentTime},dt.updateUiConfig=function(e){this.toucan&&(this.toucan.uiSettings=e)},dt.setPreviousPlaylist=function(e,t){this.toucan&&(this.toucan.previousItem={playlist:e,options:t})},dt.queuePlaylist=function(e,t){this.toucan&&(this.toucan.queuedItem={playlist:e,options:t})},dt.webcastData=function(e){this.toucan&&e&&(T.prototype.webcastData.call(this,e),this.setData({name:"SMP.webcastData",data:e}))},dt.paused=function(){if(this.toucan)return this.toucan.paused},dt.ended=function(){if(this.toucan)return this.toucan.ended},dt.seeking=function(){if(this.toucan)return this.toucan.seeking},dt.playbackRate=function(e){if(this.toucan)return"number"==typeof e&&(this.toucan.playbackRate=e),this.toucan.playbackRate},dt.volume=function(e){return isNaN(e)||(this._volume=e,this.toucan&&(this.toucan.volume=e)),this._volume},dt.muted=function(e){if(this.toucan)return"boolean"==typeof e&&(this.toucan.muted=e),this.toucan.muted},dt.dispatchEvent=function(e,t){this.toucan&&this.toucan.dispatchEventToPlugins(e,t)},dt.loadPlugin=function(e,t){if(e){var n=e.html;if(n||e.playerOnly||(n=e.j2),n){var i={url:n,data:t,module:e.module};this.toucan?this.loadPluginWithCheck(i):(t&&(e.data=t),this._settings.plugins.toLoad.push(e))}}};var ct=0,ut=function(e,t,n){if(t.enableRdotReporting){var i=t.customRdotBaseURL;if(i&&0===(i+"").indexOf("https://")){n="c~"+navigator.platform+(n?"~"+n:"");var a=encodeURIComponent(t.counterName),o=[i,"av","0","-","bump","1.0.0","bump",window.embeddedMedia.version,"-",ct++,a,"-","-","-","-","-","-","-","-","-","-","-","-","-",e,n].join("/");return(new Image).src=o,o}}},pt=function(e,t){var n=t._settings;if(n.enableRdotReporting){var i=n.customRdotBaseURL;if(i&&0===(i+"").indexOf("https://")){var a=encodeURIComponent(n.counterName),o=[i.replace("/e/","/i/"),"mediaplayout","0","-","bump",window.embeddedMedia.version,"-",ct++,a,"init",t.name(),t._version||"-",e.load,e.init,e.playlist||"-"].join("/");navigator.sendBeacon&&navigator.sendBeacon(o,"")}}},mt=function(e){var t=this,n=document.getElementById(e);t._receiveKey=e+Math.random(),n&&n.contentWindow&&(t._postElement=n.contentWindow),t._url=n.src,t._listeners={},t.post({initXD:{receiveKey:t._receiveKey}}),t.receive(function(e){if(e.data){var n=e.data.type,i=e.data.data,a=t._listeners[n];if(a)for(var o=0;o<a.length;o++){a[o].call(t,i)}}})};mt.prototype={_receiveKey:"",_postElement:null,_listeners:{},post:function(e){var t=this;return e&&t._postElement&&t._postElement.postMessage&&t._postElement.postMessage(JSON.stringify(e),"*"),t},receive:function(e){var t=this,n=function(n){var i=n.origin+"";if((0===t._url.indexOf(i)||0===t._url.indexOf(i.replace("https://","http://")))&&n.data&&n.data.indexOf&&0===n.data.indexOf("{")){var a={};for(var o in n)a[o]="data"==o?JSON.parse(n[o]):n[o];if(!a.data.receiveKey||a.data.receiveKey!==t._receiveKey)return!1;e(a)}};return window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n),t},on:function(e,t){var n=this;return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(function(){setTimeout(function(e){t.apply(n,e)},0,arguments)}),n},fire:function(e,t){this.post({receiveKey:this._receiveKey,type:e,data:t})}};var gt,ht=function(e){e.preventDefault()};function ft(){return this.type="html",this.includePoster=!1,this.requireSonarJS=!0,this._currentTime=0,this._duration=0,this._playbackRate=1,this._fullScreen=!1,this._lastSignificant=0,this._kind="",this.pluginsToLoad=[],this}var yt=!1;function vt(e){return function(t){var n,i=t.type,a={type:i};for(var o in t)"type"!=o&&"_"!=o&&"unwanted"!=o&&(a[o]=t[o]);switch(e.processEvent(a,t,t.data),i){case"durationchange":e._duration=t.duration;break;case"initialised":e._version=(t.version+"").replace(/\.smphtml5/i,"").replace(/[^\d\.]/gim,""),e.initialised(),clearTimeout(e.iframeLoadAndInitialiseTimeout);break;case"volumechange":e._muted=t.muted,e._volume=t.volume;break;case"guidanceShow":e._gCalled=!0,e._lockClicked=t.lockClicked,window.embeddedMedia.parentalGuidance.show(t,e._settings.ui.colour,e._settings.locale()),e._fullScreen&&(e.wrapper.style.WebkitTransform="");break;case"pause":e._ended=a.ended;break;case"mediaItemInfoChanged":case"mediaItemChanged":case"playing":e._mediaItem=a.mediaItem;break;case"playlistLoaded":var r=document.getElementById(e.getId());if(r)if(e.playlist.title)r.title=e.playlist.title;else{var s=window.embeddedMedia.language;r.title=s.t("screenreaderDefaultIframeTitle",e._settings.locale())}break;case"playlistLoading":t.statsObject&&(n=function(){t.statsObject.playlistURL||(t.statsObject.playlistURL=t.url),e._statsObject=t.statsObject});break;case"beforeFullscreenEnter":t.applyPageFullScreen&&e._pfse();break;case"beforeFullscreenExit":e._settings.superResponsive&&(e.wrapper.style.paddingBottom="",setTimeout(function(){e.wrapper.style.paddingBottom="56.25%"},10)),t.applyPageFullScreen&&e._pfsx();break;case"loadingThreeSixty":!function(e){yt||(yt=!0,window.addEventListener("devicemotion",function(t){var n={rotationRate:{alpha:t.rotationRate.alpha,beta:t.rotationRate.beta,gamma:t.rotationRate.gamma},orientation:window.orientation};e.xd.fire("devicemotion",n)}))}(e);break;case"verify":window.embeddedMedia.parentalGuidance.verify(t,function(t){e.call("PINverified",{isCorrect:t})})}try{e.trigger(a),n&&n()}catch(l){throw n&&n(),l}}}var bt=ft.prototype=new T;function wt(e){var t,n,i=p.clone(e,{_container:!0,container:!0,dispatch:!0,init:!0,trigger:!0,initialisationListenerTimeout:!0}),a=y.get();return i.embedReferer=document.referrer||"",i.uiClass=(n=[],(t=i).uiClass&&n.push(t.uiClass),t.defaultUiClass&&n.push(t.defaultUiClass),n.join(" ")),S.mediationUrls(i,i,!0),i.mobileNetwork=a.connection.mobile,i.playVideoExternally=!i.preferHtmlOnMobile&&i.preferInlineAudioPlayback&&a.htmlAudio&&e.playingAudio()&&!i.playerWasForced,i._demiIsUK=window.embeddedMedia.demi.isUK,i}function Pt(){return this.type="html",this.includePoster=!1,this.backgroundPlayer=null,this}bt._name="smphtml5",bt.compatibility=function(e){var t=y.get(),n=!1;return!(n=e.dashPlaybackOnly?t.hasMseSupport:p.hasVideo&&(t.hasHlsVodSupport||t.isMobileOrTablet||t.hasMseSupport))&&t.hybrid&&(n=!0),n},bt.embedUrl=function(e){return e.html5Debug?"//emp.bbc.co.uk/emp/SMPj/2.61.7/debug.html":"//emp.bbc.co.uk/emp/SMPj/2.61.7/iframe.html"},bt.embed=function(e,t){var n=this;for(n._settings=e,n._container=e.container,clearTimeout(e.initialisationListenerTimeout);n._container.firstChild;)n._container.removeChild(n._container.firstChild);var i=y.get();e.saveData&&(n._settings.delayEmbed=!0,n._settings.ui.thumbnail.enabled=!1,n._settings.ui.disableReithFonts=!0),n.uiDefaults(i),e.supportHls=i.hasHlsVodSupport,e.deviceSupports360=i.support360;for(var a=0;a<e.plugins.toLoad.length;a++){var o=e.plugins.toLoad[a];n.loadPlugin(o,o.data)}var r=n.embedUrl(e),s=!1,l=["bbc.co.uk","bbc.com","britbox.com","bbcrewind.co.uk","bbcconnectedstudio.co.uk","labs.bbc"];if("http:"==location.protocol||"https:"==location.protocol)for(a=0;a<l.length;a++)if(-1!==location.host.indexOf(l[a])){r=r.replace("bbc.co.uk",l[a]);try{document.domain=l[a],s=!0}catch(g){}}s&&/^http/.test(location.protocol)||(r=r.replace(/^\/\//,"https://")),n.uniqueId="X"+Math.random();var d=n._container,c=n.getId(),u=n.wrapper=p.getWrapper(e,999);u.setAttribute("id",c+"wrp"),d.appendChild(u);var m=document.createElement("iframe");m.setAttribute("id",c),m.setAttribute("name",c),m.setAttribute("allow","autoplay"),m.setAttribute("frameborder",0),m.setAttribute("scrolling","no"),m.setAttribute("lang",n._settings.locale()),m.setAttribute("allowfullscreen",""),m.setAttribute("allowtransparency",""),m.setAttribute("style","position:absolute;left:0;top:0;width:1px;min-width:100%;height:100%"),n._settings.delayEmbed&&m.setAttribute("loading","lazy"),u.appendChild(m),m.onload=function(){var t=c;if(n.iframeLoadAndInitialiseTimeout=setTimeout(function(){var t=new Error(6007,e);ut(t.code,e,"smphtml5"),n.trigger(t)},5e3),function(e,t){var n,i,a,o,r,s,l,d,c=e,u=c.wrapper,p=document.body.style,m=document.documentElement.style,g=y.get(),h=g.os.ios&&!g.isTabletDevice;c._pfse=function(){c._fullScreen=!0,d||(d=document.createElement("style"),document.createTextNode&&d.appendChild(document.createTextNode(""))),document.head.appendChild(d);var e=d.sheet?d.sheet:d.styleSheet;e.cssRules&&0===e.cssRules.length&&(e.insertRule("#"+t+"wrp{z-index:2147483600!important}",0),e.insertRule("div{z-index:auto!important}",1),e.insertRule(".smpPG {z-index:2147483600!important}",2)),a=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,n=p.overflow,p.overflow="hidden",i=m.overflow,m.overflow="hidden",document.body.addEventListener("touchmove",ht);var g=c.resizePlayer=function(){var e=window.innerWidth,t=window.innerHeight;u.style.position="fixed",u.style.left="0",u.style.top="0",u.style.height=t+"px",u.style.paddingBottom=0,u.style.width=e+(h?.5:0)+"px",u.style.setProperty&&u.style.setProperty("position","fixed","important"),u.style.WebkitTransform="translate3d(0,0,10em)"};if(window.removeEventListener("resize",gt),window.removeEventListener("orientationchange",gt),gt=function(){g(),clearTimeout(l);var e=200;(y.get().os.safariVersion>=16.2||y.get().os.iosSafariVersion>=17.2)&&(e=600),l=setTimeout(g,e)},window.addEventListener("resize",gt),window.addEventListener("orientationchange",gt),!r){for(var f="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",v=document.getElementsByTagName("meta"),b=0;b<v.length;b++)if("viewport"===v[b].name){s=v[b].content,v[b].content=f,r=v[b];break}s||((r=document.createElement("meta")).name="viewport",r.content=f,document.getElementsByTagName("head")[0].appendChild(r))}setTimeout(g,250)},c._pfsx=function(){c._fullScreen=!1,c.resizePlayer=null,clearTimeout(l),d&&document.head.removeChild(d),window.removeEventListener("resize",gt),window.removeEventListener("orientationchange",gt),u.style.removeProperty&&u.style.removeProperty("position","fixed","important"),u.style.height="100%",u.style.width="100%",u.style.left="",u.style.top="",u.style.position="relative",u.style.WebkitTransform="",p.overflow=n,m.overflow=i,document.body.removeEventListener("touchmove",ht),s?(r.content=s,s=null,r=null):r&&r.parentNode&&(r.content="",r.parentNode.removeChild(r),r=null),window.scroll(a,o)}}(n,t),n.xd&&(n.xd._listeners={}),n.xd=new mt(t),n.xd.on("jsapi",vt(n)),"object"!=typeof window.JSON){var i,a=document.createElement("script");a.async=!0,a.src="https://emp.bbci.co.uk/emp/assets/bump-3/json.js",a.onload=function(){clearTimeout(i),n.fireBootstrap()},document.head.appendChild(a);var o=function(){window.JSON?n.fireBootstrap():i=setTimeout(o,1e3)};i=setTimeout(o,1e3)}else n.fireBootstrap()},m.setAttribute("src",r),window.addEventListener&&window.addEventListener("pageshow",function(e){e.persisted&&(m.setAttribute("src",r),n._fullScreen&&n._pfsx())}),t(n,{markers:!0,queuedPlaylist:!0,previousPlaylist:!0,threeSixty:i.support360,inPage:!0,overlay:!0,slim:!1})},bt.fireBootstrap=function(){var e=this;window.embeddedMedia.playerInstances[e.uniqueId]=e;var t={player:{vars:wt(e._settings)},id:e.uniqueId,requireMap:window.bbcRequireMap};try{document.getElementById(e.getId()).contentWindow.bootstrap(t)}catch(n){e.xd.fire("bootstrap",t)}},bt.updateUiConfig=function(e){try{var t=document.getElementById(this.getId());t&&(e.hidePlayerFromAT?(t.setAttribute("aria-hidden",!0),t.setAttribute("tabindex","-1")):(t.removeAttribute("aria-hidden"),t.removeAttribute("tabindex")))}catch(n){}this.call("uiConfigFromBump",e)},bt.updateConfig=function(e){this.call("configFromBump",e)},bt.captureIntent=function(e){this.call("captureIntent",e)},bt.focusButton=function(e,t){this.call("focusButton",{name:e,after:t})},bt.loadPlaylist=function(e){var t=this;if(t.ready){var n=wt(t._settings);n.nonUserBypass=n.nonUserBypass||!0===e,t.playlist=null,t._mediaItem=null,t.call("loadPlaylist2",n),n.playlistObject&&n.playlistObject.embedRights&&!n.externalEmbedUrl&&t.updateUiConfig({embed:{enabled:!1}});var i=n.webcastData;i&&(i.accurateStartTime||i.scheduledStartTime||i.accurateEndTime||i.scheduledEndTime)&&t.webcastData(i),n.nonUserBypass=!1}},bt.getId=function(){return this._name+"iframe"+this._settings.domid},bt.call=function(e,t){try{var n=document.getElementById(this.getId()),i=n.contentWindow.publicApi.api[e];i||(i=n.contentWindow.publicApi[e]),i(t)}catch(a){this.xd&&this.xd.fire("jsapi",{call:e,params:t})}},bt.setPreviousPlaylist=function(e,t){this.call("setPreviousPlaylist",{playlist:e,options:t})},bt.queuePlaylist=function(e,t){this.call("queuePlaylist",{playlist:e,options:t})},bt.loadPlugin=function(e,t){if(e){var n=e.j2;if(n||e.playerOnly||(n=e.html),n){var i={url:n,data:t};this.ready?(this.setData(i.data),this.loadPluginWithCheck(i,"loadPlugin2")):this.pluginsToLoad.push(i)}}},bt.webcastData=function(e){e&&(T.prototype.webcastData.call(this,e),this.setData({name:"SMP.webcastData",data:e}))},bt.dispatchEvent=function(e,t){e&&this.call("dispatch",{type:e,data:t},!0)},bt.show=function(e){this.wrapper.firstChild.style.width="100%",this._settings.tryPlayAfterInHtml&&e&&this.play(!0)},bt.hide=function(){this.wrapper.firstChild.style.width="0%"},bt.getHandleJSAPI=function(){return vt(this)},bt.initialised=function(){var e=this,t=e._settings;e.before();for(var n=0;n<e.pluginsToLoad.length;n++){var i=e.pluginsToLoad[n];i.waitOnPluginLoad=t.waitOnPluginLoad,e.setData(i.data),this.loadPluginWithCheck(i,"loadPlugin2")}(t.playlistObject||t.playlist)&&e.loadPlaylist(!0),e.started(y.get())},bt.persistSettings=function(e){this.call("persistSettings",{settings:e})};var _t=Pt.prototype;function Ct(e){return this.setSettings(e),this}function kt(e){this._settings=e;var t=this;window["__onGCastApiAvailable"]=function(e){e&&t._init()};var n=document.createElement("script");n.async=!0,n.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.getElementsByTagName("head")[0].appendChild(n),this.sendCastIconState=this.sendCastIconState.bind(this)}_t._name="smp-html-background",_t.compatibility=function(e){return!("background"!=e.product||!p.hasVideo||e.disableHtml)},_t.embed=function(e,t){var n=this;S.mediationUrls(e,e),n._settings=e,n._container=e.container,n._container.innerHTML="";var i=e.html5Debug?"https://emp.bbci.co.uk/emp/htmlbackground/1.3.1/backgroundplayer.js":"https://emp.bbci.co.uk/emp/htmlbackground/1.3.1/backgroundplayer.min.js";if(!window.require)throw"No require available, smp-html-background requires require.";require([i],function(i){n.backgroundPlayer=new i(n._container,e,n),t(n,{markers:!1,queuedPlaylist:!1,inPage:!0,chromecast:!1,overlay:!1})})},_t.loadPlaylist=function(){this.backgroundPlayer&&this.backgroundPlayer.loadPlaylist(this._settings)},_t.play=function(){this.backgroundPlayer&&this.backgroundPlayer.play()},_t.pause=function(){this.backgroundPlayer&&this.backgroundPlayer.pause()},_t.muted=function(e){if(this.backgroundPlayer)return this.backgroundPlayer.muted(e)},_t.volume=function(e){if(this.backgroundPlayer)return this.backgroundPlayer.volume(e)},_t.updateConfig=function(){},_t.updateUiConfig=function(){},_t.resetForPlaylist=function(){},_t.captureIntent=function(){},_t.updateUiConfig=function(){},_t.updateConfig=function(){},_t.distributeConfig=function(){},_t.focusButton=function(){},Ct.prototype={setSettings:function(e){var t=this;t._settings=e;var n=[$e,ot,lt,ft],i=y.get(),a="";try{a=document.cookie+""}catch(d){}var o=a.match(/bbcBumpForcePlayer=(.*?)(?:;|$)/),r=o&&o.length?o[1]:"";if("background"==e.product)t.Class=Pt;else if(e.threeSixty)(i.support360||/force360Support=true/i.test(a))&&(t.Class=ft);else if(e.forceToucan)t.Class=lt;else if(e.transcriptPlayer)t.Class=$e;else if(!e.showUnsupportedMessage||""!==r)for(var s=0;s<n.length;s++){var l=n[s];if(r==l.prototype._name||""===r&&l.prototype.compatibility(e)){""!==r&&(e.playerWasForced=!0),t.Class=l;break}}t.Class&&t.Class.prototype.prepare&&t.Class.prototype.prepare(e)},decide:function(){var e=this;return e.Class?(e.player=new e.Class,e.name=e.player._name):e.name=null,e.player}},kt.prototype={_getAppId:function(){var e="1F306A22";return this._settings.forceCastReceiver?e=this._settings.forceCastReceiver:"iplayer"==this._settings.product?e="2BA92214":"sport"==this._settings.product?e="15983BD8":"sounds"==this._settings.product&&(e="D350F6A9"),e},_isAndroidReceiverCompatible:function(){return!!this._settings.androidReceiverCompatible},_init:function(){this._castContext=cast.framework.CastContext.getInstance(),this._castContext.setOptions({receiverApplicationId:this._getAppId(),androidReceiverCompatible:this._isAndroidReceiverCompatible(),autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),this._castContext.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.sendCastIconState),this.sendCastIconState(),this._addRemotePlayerListeners(),this.initialised=!0},_addRemotePlayerListeners:function(){var e=this;this._remotePlayer=new cast.framework.RemotePlayer,this._remotePlayerController=new cast.framework.RemotePlayerController(this._remotePlayer),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,function(){e._remotePlayer.isConnected?e._connected():e._disconnected()}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,function(t){e.sendToLoadedPlayer({event:"timechange",time:t.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,function(t){e.sendToLoadedPlayer({event:"durationchanged",duration:t.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,function(t){e.sendToLoadedPlayer({event:"ispausedchanged",ispaused:t.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.LIVE_SEEKABLE_RANGE_CHANGED,function(){}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED,function(t){e.sendToLoadedPlayer({event:"ismedialoadedchanged",ismedialoaded:t.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(t){e.sendToLoadedPlayer({event:"mutedchanged",muted:t.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,function(t){e.sendToLoadedPlayer({event:"volumechanged",volume:t.value})}),this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,function(t){var n;switch(t.value){case chrome.cast.media.PlayerState.IDLE:n="IDLE";break;case chrome.cast.media.PlayerState.PLAYING:n="PLAYING";break;case chrome.cast.media.PlayerState.PAUSED:n="PAUSED";break;case chrome.cast.media.PlayerState.BUFFERING:n="BUFFERING"}e.sendToLoadedPlayer({event:"playerstatechanged",state:n})})},_connected:function(){var e=this;this._castSession=this._castContext.getCurrentSession(),this._requestPlayer&&(this.loadMedia(this._requestPlayer),this._requestPlayer=null),this._castSession.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,function(){e.loading||(e._loadedPlayer=null,window.embeddedMedia.sendEventToPlayers("ccInfo",{event:"notCasting",state:e.translateCastState(e._castContext.getCastState())}))}),this._castSession.addMessageListener("urn:x-cast:uk.co.bbc.general",function(t,n){var i=JSON.parse(n);if("subtitlesPreference"===i.type)e.sendToLoadedPlayer({event:"subson",on:!!i.value})})},_disconnected:function(){this._castSession=null,this._requestPlayer=null,this._loadedPlayer=null,window.embeddedMedia.sendEventToPlayers("ccInfo",{event:"disconnect"})},sendToLoadedPlayer:function(e){this._loadedPlayer&&this._loadedPlayer.call("ccInfo",e)},sendToRequestPlayer:function(e){this._requestPlayer&&this._requestPlayer.call("ccInfo",e)},isConnected:function(){return!!this._castSession},requestSession:function(){var e=this;this._castContext.requestSession().then(function(){},function(){e.sendToRequestPlayer({event:"requestfailed"})})},hasSubs:function(e){if(e&&e.tracks)for(var t=0;t<e.tracks.length;t++)if(e.tracks[t].type==chrome.cast.media.TrackType.TEXT)return!0;return!1},loadMedia:function(e){var t=this,n=e.mediaItem(),i=e.loadedPlaylist();if(this.loading=!0,!this.isConnected())return this._requestPlayer=e,void this.requestSession();var a=new chrome.cast.media.MediaInfo(n.identifier),o=new chrome.cast.media.GenericMediaMetadata;if(o.title=i.title?i.title:"",o.subtitle=i.summary?i.summary:"",i.posterImg){var r=new chrome.cast.Image(i.posterImg.replace("{recipe}","1280x720").replace("$recipe","1280x720"));r.width=1280,r.height=720,o.images=[r]}a.metadata=o,a.customData={secondary_title:i.summary?i.summary:""},n.castConnectUrl&&(a.customData.connect=n.castConnectUrl),e._settings.counterName&&(a.customData.counterName=e._settings.counterName),a.streamType=n.isLive?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED;var s=new chrome.cast.media.LoadRequest(a);s.currentTime=e.currentTime(),this._castSession.loadMedia(s).then(function(){t.loading=!1,t._loadedPlayer=e,window.embeddedMedia.sendEventToPlayers("ccInfo",{event:"notCasting",state:t.translateCastState(t._castContext.getCastState())},t._loadedPlayer),t._loadedPlayer.call("ccInfo",{event:"loadedMedia",duration:t._remotePlayer.duration,currentTime:t._remotePlayer.currentTime,isPaused:t._remotePlayer.isPaused,hasSubs:t.hasSubs(t._remotePlayer.mediaInfo)});var n=t._castSession.getMediaSession();n.addUpdateListener(function(){n.idleReason==chrome.cast.media.IdleReason.FINISHED&&t.sendToLoadedPlayer({event:"ended"})})},function(){t.loading=!1})},pause:function(){this._remotePlayerController.playOrPause()},play:function(){this._remotePlayerController.playOrPause()},seek:function(e){this._remotePlayer.currentTime=e,this._remotePlayerController.seek()},translateCastState:function(e){var t={};return t[cast.framework.CastState.NO_DEVICES_AVAILABLE]="no_devices",t[cast.framework.CastState.NOT_CONNECTED]="not_connected",t[cast.framework.CastState.CONNECTING]="connecting",t[cast.framework.CastState.CONNECTED]="connected",t[e]},sendCastIconState:function(){var e=this._castContext.getCastState(),t=this._castContext.getCurrentSession(),n=t&&t.getCastDevice()?t.getCastDevice().friendlyName:null;window.embeddedMedia.sendEventToPlayers("ccInfo",{event:"CASTSTATE",value:this.translateCastState(e),deviceName:n})},subtitlesOn:function(){if(this._castSession){var e=new chrome.cast.media.EditTracksInfoRequest;e.enableTextTracks=!0,this._castSession.getMediaSession().editTracksInfo(e,function(){},function(){})}},subtitlesOff:function(){if(this._castSession){var e=new chrome.cast.media.EditTracksInfoRequest;e.enableTextTracks=!1,this._castSession.getMediaSession().editTracksInfo(e,function(){},function(){})}},setVolume:function(e){this._castSession&&this._castSession.setVolume(e)},setMuted:function(e){this._castSession&&this._castSession.setMute(e)}};var Et,xt={6e3:"unableToEmbed",6003:"errorUnsupported",6004:"initialiseFailed",6005:"initialiseFailed",6010:"flashNotAvailable",6012:"errorUnsupported",1003:"defaultErrorMessage",1040:"flashNotAvailable"};function St(e,t){return this.type="error",this.code=e,this.severity="critical",this.description=function(e,t,n){var i="en";if(e&&(i=e.locale()),t=xt[t]||t,window.embeddedMedia.language){var a=window.embeddedMedia.language.t(t,i);if(a!=t)return a}return n||"Unknown Error"}(t,e+""),this}function It(){return window.performance&&window.performance.now&&window.performance.now().toFixed(0)}function Tt(e){var t=e._settings;if("audio"!=t.ui.skin){var n=t.container,i=t.posterUrl(n);if(!i||e.player&&!e.player.includePoster)n.style.backgroundImage="";else{var a="contain";(t.ui.displayCover||Math.abs(16/9-n.getBoundingClientRect("width")/n.getBoundingClientRect("height"))<.2)&&(a="cover"),n.style.backgroundImage="url("+i+")",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center center",n.style.backgroundSize=a,n.style.backgroundColor="black",n.style.overflow="hidden"}"html"==e.type&&(n.style.overflow="")}}function Lt(e,t){var n=window.embeddedMedia;(Et=y.get()).os.phantomjs&&(t.enableRdotReporting=!1),this.player=new T,this.player.fake=!0,this._events={},this.capability={markers:!1,queuedPlaylist:!1,previousPlaylist:!1,inPage:!1,chromecast:!1,overlay:!1,slim:!1},t.container=e,t.domid=e.getAttribute("id");var i=this._settings=new H(t);if(i.enableSonarReporting&&!i.noTracking){this._sonarReporter=new se;var a=!1;i.statsObject&&0==(i.statsObject.destination+"").indexOf("BBCS_")&&(a=!0),this._sonarReporter.init(i.html5Debug,t.counterName,a)}n.parentalGuidance||(n.parentalGuidance=new ke(this._sonarReporter,i)),i.guidance=n.parentalGuidance.guidance;var o=this,r=n.parentalGuidance;return r.closedCallbacks.push(function(){var e={type:"guidanceClosed",guidance:i.guidance};o.trigger(e)}),r.openedCallbacks.push(function(){o.trigger({type:"guidanceShown"})}),r.updateCallbacks.push(function(e){e.noPin=i.guidanceCleared,i.guidance=e;var t={type:"guidanceUpdated",guidance:i.guidance};o.trigger(t)}),this._decisionEngine=new Ct(i),this}Lt.prototype={showGuidance:function(e,t,n,i){var a={lockClicked:n};a.title=e||"",a.guidance=t||"",a.intent=i||"play";var o=window.embeddedMedia.parentalGuidance,r=this._settings;r.guidanceCleared||o.show(a,r.ui.colour,r.locale(),!0)},lockGuidance:function(){!0===this._settings.guidance.hasGuidancePIN?window.embeddedMedia.parentalGuidance.setLocked(!0,!0):this.unlockGuidance()},unlockGuidance:function(){this.showGuidance("","",!0)},name:function(){return this._decisionEngine.name||"no-player"},decide:function(){return(!this.player||this.player.fake||"smp-phantom"==this.name()&&!this._settings.phantomPlayer)&&(this.player=this._decisionEngine.decide()),this.name()},settings:function(e){return e&&(this._settings.set(e),this.player.updateConfig(e)),this._settings},distributedConfig:function(e,t){p.isObjectEmpty(e)||("ui"==t&&(e={ui:e}),this._settings.set(e,!0),"ui"==t?this.player.updateUiConfig(e.ui):this.player.updateConfig(e))},poster:function(e){"string"==typeof e&&(this._settings._poster=e,Tt(this))},play:function(e){this.player.play(!1!==e)},pause:function(){this.player.pause()},suspend:function(){this.player.suspend()},next:function(e){this.player.next(e)},previous:function(e){this.player.previous(e)},currentTime:function(e){return this.player.currentTime(e)},showSubtitles:function(e){return this.player.showSubtitles(e)},showBumpPlaybackSettings:function(){this.player.showBumpPlaybackSettings()},duration:function(){return this.player.duration()},muted:function(e){return this.player.muted(e)},focusButton:function(e,t){this.player.focusButton(e,t)},queuePlaylist:function(e,t){this.player.queuePlaylist(e,t)},setPreviousPlaylist:function(e,t){this.player.setPreviousPlaylist(e,t)},loadPlaylist:function(e,t){var n=this,i=n.player,a=n._settings;a.autoplay=!1,a.playlist="",a._poster=null,a.playlistObject=null,a.overrideHoldingImage=null,a.overrideCtaDuration=null,a.webcastData={},a.statsObject.parentPID=void 0,a.statsObject.parentPIDType=void 0,a.statsObject.episodePID=void 0,a.statsObject.clipPID=void 0,a.statsObject.brandPID=void 0,a.statsObject.seriesPID=void 0,a.statsObject.playlistLabels=void 0,a.statsObject.playlistURL=void 0,a.statsObject.playlistName=void 0,a.playlistObject=e,a.startTime=0,i.resetForPlaylist(),n.settings(t),i._statsObject=p.clone(a.statsObject),i.includePoster&&(a.autoplay?setTimeout(function(){Tt(n)},100):Tt(n)),i._lastSignificant=a.startTime,a.phantomPlayer||"smp-phantom"!=i._name?i.loadPlaylist(n):this.load()},kind:function(){return this.player.kind()},captureIntent:function(e){return this.player.captureIntent(e)},stop:function(){return this._settings.autoplay=!1,this.player.stop()},loadPlugin:function(e,t){this.player.loadPlugin?this.player.loadPlugin(e,t):e&&(e.data=t,this._settings.plugins.toLoad.push(e))},linkMediaPlayer:function(e){this.player.linkMediaPlayer?this.player.linkMediaPlayer(e):console.error("No link available")},updateUiConfig:function(e){this._settings.set({ui:e}),this.player.updateUiConfig(e)},updateQuality:function(e){this._settings.set(e),this.player.updateQuality(e)},setData:function(e){this.player.setData(e)},setPoster:function(e,t){this.player.setPoster(e,t)},dispatchEvent:function(e,t){this.player.dispatchEvent(e,t)},pauseAt:function(e){this.player.pauseAt(e)},webcastData:function(e){this._settings.webcastData=e,this.player.webcastData(e)},volume:function(e){return this.player.volume(e)},playbackRate:function(e){return this.player.playbackRate(e)},paused:function(){return this.player.paused()},ended:function(){return this.player.ended()},seeking:function(){return this.player.seeking()},mediaItem:function(){return this.player.mediaItem()},playlist:function(){return this.player.loadedPlaylist()},bind:function(e,t,n){for(var i=(e+"").split(/\s/),a=0;a<i.length;a++){var o=i[a];if(this._events[o]||(this._events[o]=[]),n)r={obj:t,handler:n};else var r=t;this._events[o].push(r)}},trigger:function(e){var t=e.type;if(this._events[t]){for(var n=[],i=0;i<this._events[t].length;i++)n.push(this._events[t][i]);for(i=0;i<n.length;i++){var a=n[i];a.handler?(e.data=a.obj,a.handler(e)):a(e)}}},unbind:function(e,t){if(this._events[e])for(var n=this._events[e].length;n>=0;n--)this._events[e][n]==t&&this._events[e].splice(n,1)},_loadOptions:function(e){var t=this;t._decisionEngine.setSettings(t._settings);var n=t._settings;if(n.playlistObject&&n.playlistObject.items){var i=n.playlistObject.items[0];if(i){var a=i.versionID||i.vpid||"";a.length>7&&"p09108vv,p09hh03z,p09hh046,p09hh03f,p09hh049,p09hh03x,p09hh04t,p09hh063,p09hh05v,p09hh3k5,p09hgzj3,p0g9hlfp,p0g9hm83,p0g9hm8f,p0g9hm9b,p0g9hm9n,p0g9hmb5,p0g9hmcs,p0g9hmdh,p0g9hmf0,p0g9hmfq".indexOf(a)>-1&&(n.plugins.toLoad.push({html:"https://storyplayer.pilots.bbcconnectedstudio.co.uk/smp-js"}),n.ui.skin="storykit",n.waitOnPluginLoad=!0)}}t.player&&t.player.immediate&&(e=!0),t.decide(),t.loadingData={now:It,load:It()};var o=t._decisionEngine.name,r=window.embeddedMedia;if("smphtml5"==o&&!r.chromeCast.castInterface&&Et.supportChromecast&&n.allowCasting&&(r.chromeCast.castInterface=new kt(n)),o){var s=function(e,i){window.embeddedMedia.addPlayer(n.domid,e),t.player=e,e.showErrorDialog=t.showErrorDialog,e.includePoster&&(e.setPoster=function(e){t.poster(e)},Tt(t)),n.statsObject.playlistURL||(n.statsObject.playlistURL=n.playlist||void 0),e._statsObject=p.clone(n.statsObject),t._sonarReporter&&(t._sonarReporter.newPlayer(t,e.requireSonarJS),e.sonar=t._sonarReporter),i&&(t.capability=i,i.toucanCompatible=lt.prototype.compatibility(n,!0)),e.reloadScope=t};if("html"==t.player.type){var l=window.innerHeight;if(isNaN(l)&&(l=1e3),n.container&&n.container.getClientRects){var d=n.container.getClientRects();(!d[0]||d[0].y<l)&&(e=!0)}}if(window.embeddedMedia.playerInits++,t.create=function(){t.addInitialisationListener(t),t.player.trigger=function(e){t.trigger(e)},t.player.embed(n,s)},e||t.player.immediate)t.create();else if(0===window.embeddedMedia.players.length)t.create();else if(window.embeddedMedia.players[0].ready)t.create();else{var c=500*(window.embeddedMedia.playerInits+2);setTimeout(function(){t.create()},c)}}else{Tt(t);var u=6003;n.dashPlaybackOnly&&!n.threeSixty?u=6012:!Et.supportedFlash||n.showUnsupportedMessage||n.threeSixty||(u=6010);var m=new St(u,n);n.ui.hideDefaultErrors||this.showErrorDialog(m),t.trigger(m),ut(m.code,n),t.player=new T,t.player.fake=!0}return this},load:function(e){var t=this;return"string"==typeof e?t._settings.playlist=e:"object"==typeof e&&t._settings.set(e),window.embeddedMedia.language.load(t._settings.locale(),function(){t._loadOptions()}),t},addInitialisationListener:function(e){var t=this._settings;clearTimeout(t.initialisationListenerTimeout),t.initialisationListenerTimeout=setTimeout(function(){var n=new St(6004,t);ut(n.code,t,e.player._name),e.trigger(n)},1e4),e.bind("initialised",function(){clearTimeout(t.initialisationListenerTimeout);var n=It();if(n){e.loadingData.init=n;var i=!1;setTimeout(function(){i||(i=!0,pt(e.loadingData,e))},1e4)}})},showErrorDialog:function(e){var t=this._settings,n=t.container,i=t.ui.miniMode&&t.ui.miniMode.enabled,a=document.createElement("div");a.setAttribute("style","width:100%;height:100%;background:rgba(51,51,51,0.85);position:relative;min-height:160px");var o=document.createElement("div"),r=o.style;r.position="absolute",i?(r.width="150px",r.height="80px",r.fontSize="16px"):(r.width="440px",r.height="160px",r.fontSize="18px",Et.os.winphone?r.top=r.left=r.marginLeft=r.marginTop=0:(r.top=r.left="50%",r.marginLeft="-220px",r.marginTop="-80px")),r.verticalAlign="middle",r.textAlign="center",r.color="white",r.fontFamily="arial, helvetica, sans-serif";var s=document.createElement("div");s.style.backgroundImage="url(https://emp.bbci.co.uk/emp/assets/2.2.6/alert.png)",s.style.backgroundRepeat="no-repeat",s.style.backgroundPosition="50% 0",s.style.height="22px",s.style.backgroundSize="22px";var l=document.createElement("div"),d=l.style;if(d.position="absolute",d.display="block",i?d.top=d.left=d.right="8px":(d.top="38px",d.left=d.right="20px"),l.innerHTML=e.description,!i){if(6010==e.code){var c=document.createElement("div"),u=c.style;u.position="absolute",u.bottom="20px",u.right=u.left="10px",c.innerHTML='<a href="https://www.bbc.co.uk/iplayer/help/questions/computer-issues/flash"'+' target="_blank" style="color:white;text-decoration:underline;background-color : transparent;">'+window.embeddedMedia.language.t("deprecationMessageLongLink",t.locale())+"</a>",o.appendChild(c)}}a.appendChild(o),i||o.appendChild(s),n.getBoundingClientRect("width")<440&&(r.width="100%",r.fontSize="14px",i||(r.left="220px")),o.appendChild(l),n.appendChild(p.getWrapper(t).appendChild(a))}};var At={},Mt=p.addEmbeddedMedia();Mt.version="4.40.4",Mt.api||(Mt.api={player:function(e,t){if(!e)throw"You need to provide a container for the player";var n=e.getAttribute("id");if(void 0===At[n]||At[n].settings().container!=e){if(!t)throw"No player settings. If you're trying to get a reference, it's probably not created yet.";if(!n){var i="bbcMediaPlayer",a=0;do{n=i+a++}while(document.getElementById(n));e.setAttribute("id",n)}At[n]=new Lt(e,t)}else At[n].settings(t);return At[n]},players:function(){return At}}),"function"==typeof define&&define.amd&&define("bump-4",[],function(){return window.embeddedMedia.api})}();